/*! VersionVI: 30F200066p x */
function WDBarreBoutonOnOffGraphe(n,t,i){arguments.length&&WDBarreBoutonOnOff.prototype.constructor.apply(this,[n,t,"ExecuteCommande",[i]])}function WDGraphe(){if(arguments.length){WDBarre.prototype.constructor.apply(this,arguments);var n=this;this.m_fRafBarreTrue=function(t){return n.RafBarre(t||event,!0)};this.m_fRafBarreFalse=function(t){return n.RafBarre(t||event)};this.m_fRafBarreTrueMMove=function(t){return n.RafBarreMMove(t||event)};this.m_oVue=new WDChartView(this);this.m_oModele=undefined}}function IWDConstante(){}function Align(){}function IWDChartConstant(){}function ETimeScale(){}function eDESSINVALEURNULLE(){}function ETypeCategorieWaterfall(){}function _clone(n,t){return clWDUtil.isObject(n)&&clWDUtil.isObject(t)?$.extend(!0,t,n):JSON.parse(JSON.stringify(n))}function sGetFunctionName(n){var t=n.name;if(!t){var i=n.toString(),r=i.indexOf(" ")+1,u=i.indexOf("(");t=i.substr(r,u-r).trim()}return t}function bCompareFonctions(n,t){return n==t?!0:sGetFunctionName(n)==sGetFunctionName(t)?!0:!1}function stPath(n,t,i,r,u){if(arguments.length){if(clWDUtil.isObject(n)){var f=n;i=WDRect.getWidth(f)/2;r=WDRect.getHeight(f)/2;u=t;t=f.m_nTop+WDRect.getHeight(f)/2;n=f.m_nLeft+WDRect.getWidth(f)/2}this.x=n;this.y=t;this.width=i;this.height=r;this.options=u}}function WDPictureSVG(n){arguments.length&&(this.m_Id=$(n.m_oHoteImage).attr("id"),this.m_domBaliseSVG=undefined,this.m_domDefsSVG=undefined,this.m_tabClipActif=[],this.m_bDessinDirectementDansLaPage=!0,this.m_nDureeFonduHote=1e3,this.m_b3DActive=!1,this.m_b3DInnerOuterDansPartEffet=!1,this.m_oGraphe=undefined,this.m_tabCache=[])}function WDSvgAnimation(n,t,i,r,u,f){arguments.length&&(WDChartAnimation.prototype.constructor.apply(this,arguments),this.m_domBalise=i,this.m_oAttributsAvant=r,this.m_oAttributs=u,this.m_oPicture=t,this.duration=100,this.easing="linear",this.queue=sGetFunctionName(this.constructor),this.m_domBaliseAnim=this.m_domBalise,this.ArreteEtVideAnimations(this.m_domBaliseAnim),this.m_fFinAnimation=undefined,f&&(this.oStyleCssAnimation=f))}function WDSvgAnimationGridLine(n){arguments.length&&(WDSvgAnimation.prototype.constructor.apply(this,arguments),this.duration=n.m_oModele.m_oParametres.m_nDureeAnimation,WDSvgAnimationGridLine.ms_bActiveAnimation!==!0&&(this.duration=0))}function WDSvgAnimationBulle(n,t){if(arguments.length){WDSvgAnimation.prototype.constructor.apply(this,arguments);this.duration=WDSvgAnimationBulle.gbEase==!0?200:150;var i=(n||t.m_oGraphe).m_oModele.m_oParametres.getType();(i==WDChartParameters.kSecteur||i==WDChartParameters.kDonut||i==WDChartParameters.kHemicycle)&&(this.duration=200);this.easing=WDSvgAnimationBulle.gbEase==!0?"easeOutExpo":"linear"}}function WDSvgAnimationLegende(){arguments.length&&(WDSvgAnimation.prototype.constructor.apply(this,arguments),this.duration=600,this.easing="easeOutExpo")}function WDChartView(){arguments.length&&(this.m_oRenderer=undefined,this.m_oPicture=undefined,this.m_oModeleInitialSeries=undefined,this.m_tabSeriesMasquees=[],this.m_oModelePrecedent=undefined)}function WDMathUtils(){}function WDChartUtils(){}function WDRect(n,t,i,r){this.set(n,t,i,r)}function WDChartParameters(n,t){var i,r;arguments.length&&(JSONPOO.prototype.constructor.apply(this,[t]),this.m_bAnimationGraphe===!1&&(this.m_nDureeAnimation=0),this.m_sClasseBulle||this.m_oPoliceBulle||(i=WDPaintCSS.oGetInfoCSS(this.m_sClasseLibelle,"0",["fontFamily","fontWeight","fontStyle","textDecoration","fontSize","color"],"color:black"),this.m_oPoliceBulle={m_sNom:i.fontFamily,m_nGras:i.fontWeight,m_bItalique:i.fontStyle=="italic",m_bSouligne:(i.textDecoration||"").indexOf("underline")>-1?1:0,m_bBarre:(i.textDecoration||"").indexOf("line-through")>-1?1:0,m_sTaille:i.fontSize,m_sCouleur:i.color}),r=this,clWDUtil.bForEachIn(["Titre","Axe","Legende","Libelle","Valeur","Bulle"],function(t,i){return r["m_oPolice"+i]&&(r["m_sClasse"+i]=WDChartParameters.__sCreeClasseDepuisPolice(n,r["m_oPolice"+i],i)),!0}),this.m_sClasseValeur&&this.m_sClasseValeur!=""||(this.m_sClasseValeur=this.m_sClasseLibelle))}function WDChartCategories(n,t){if(arguments.length&&(JSONPOO.prototype.constructor.apply(this,[t]),this.m_axis=undefined,this.m_oModele=n,this.bEchelleTemporelle())){var i=this.m_tabValeur.length&&this.m_tabValeur[0].length==WDChartParameters.sMasqueDate.length?WDChartParameters.sMasqueDate:WDChartParameters.sMasqueDateHeure;this.m_tabValeurMS=WDChartCategories.tabConvertionVersValeursTemporels(i,this.m_tabValeur)}}function WDChartSeries(n,t,i){if(arguments.length){JSONPOO.prototype.constructor.apply(this,[t]);i&&(this.m_tabValeur=i);this.m_oGraphe=n;this.m_dMinValue=Number.POSITIVE_INFINITY;this.m_dMaxValue=Number.NEGATIVE_INFINITY;this.m_bContainDecimalValues=!1;for(var r=0;r<this.m_tabValeur.length;++r)this.onValueAddedOrChanged(this.m_tabValeur[r])}}function EPointStyle(){}function WDChartModel(n){if(arguments.length){this.m_oGraphe=n;JSONPOO.prototype.constructor.apply(this,[n.m_oDonnees]);for(var t=0;this.m_tabSeries&&t<this.m_tabSeries.length;++t)this.m_tabSeries[t]=new WDChartSeries(n,this.m_tabSeries[t]);this.m_oParametres=new WDChartParameters(n,n.m_oParametres);this.m_oCategories=new WDChartCategories(this,this.m_oCategories);this.m_lstAxis=undefined}}function JSONPOO(n){arguments.length&&$.extend(this,n)}function WDPaintCSS(n){this.m_oStyle={};this.m_stRadialGradient=undefined;this.m_stLinearGradient=undefined;this.m_sClasse=undefined;JSONPOO.prototype.constructor.apply(this,[n])}function WDChartRenderer(){arguments.length&&(this.m_oPaint=undefined,this.m_oGraphe=undefined,this.m_rectChart=undefined,this.m_rectChartInitial=undefined,this.m_dInitialStartAngle=0,this.m_domGroupeSeries=undefined,this.m_domGroupeLegendeEtTitre=undefined,this.m_domBulle=undefined)}function WDXYChartRenderer(){arguments.length&&(WDChartRenderer.prototype.constructor.apply(this,arguments),this.m_tabAxisRenderer=[],this.m_rectAxis=new WDRect,this.m_nXOrigin=0,this.m_nYOrigin=0,this.m_nXOrigin2=0,this.m_nYOrigin2=0,this.m_dXPixelsPerUnit=0,this.m_dX2PixelsPerUnit=0,this.m_dYPixelsPerUnit=0,this.m_dY2PixelsPerUnit=0,this.m_timeScale=ETimeScale.NONE)}function WDBarChartRenderer(){arguments.length&&(WDXYChartRenderer.prototype.constructor.apply(this,arguments),this.m_tabCumulatedValues=undefined,this.m_nBarWidth=0,this.m_nBarSpacing=0,this.m_barRect=new WDRect)}function WDBarChartAxisRenderer(){arguments.length&&WDChartAxisRenderer.prototype.constructor.apply(this,arguments)}function WDWaterfallChartRenderer(){arguments.length&&WDBarChartRenderer.prototype.constructor.apply(this,arguments)}function WDLineChartRenderer(){arguments.length&&WDXYChartRenderer.prototype.constructor.apply(this,arguments)}function Path(){this.d=""}function WDChartAxisRenderer(){arguments.length&&(this.m_axis=undefined,this.m_tabGraduationLabels=[],this.m_dStep=0,this.m_dLeftOverflow=0,this.m_dRightOverflow=0,this.m_dTopOverflow=0,this.m_dBottomOverflow=0,this.m_nNbPositiveGraduations=0,this.m_nNbNegativeGraduations=0,this.m_bVerticalOrientationLabel=!1)}function WDLineChartAxisRenderer(){arguments.length&&WDChartAxisRenderer.prototype.constructor.apply(this,arguments)}function EAxisType(){}function EAxisOrientation(){}function WDChartAxis(n,t,i){var r,u,f;if(arguments.length){for(this.m_type=n,this.m_lstData=t,this.m_dOriginValue=0,this.m_dMinValue=Number.NEGATIVE_INFINITY,this.m_dMaxValue=Number.POSITIVE_INFINITY,this.m_oModele=i,this.m_dOriginValue=0,r=this.isXAxis(),this.m_oModele.m_oParametres.m_bAxeXHorizontal||(r=!r),this.m_orientation=r?EAxisOrientation.HORIZONTAL:EAxisOrientation.VERTICAL,u=0;u<this.m_lstData.length;++u)f=this.m_lstData[u],f.m_axis=this;this.update(this.m_oModele.m_oParametres)}}function WDPieChartRenderer(){arguments.length&&(WDChartRenderer.prototype.constructor.apply(this,arguments),this.m_nCenterX=0,this.m_nCenterY=0,this.m_nRadius=0,this.m_dTotalValue=0,this.tabLabelRenderers=undefined)}function WDLabelRenderer(n,t,i,r){arguments.length&&(this.m_oRenderer=n,this.m_strValueLabel=undefined,this.m_bValueLabel=!1,this.m_strCategoryLabel=undefined,this.m_bCategoryLabel=!1,this.m_strPercentLabel=undefined,this.m_bPercentLabel=!1,this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE,this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_HAUT,this.m_dAngleR=0,this.m_dWidth=0,this.m_nIndice=r,this.setAngle(t,i))}function WDChartAnimator(n){arguments.length&&(this.m_tabAnimations=[],this.m_oGraphe=n,this.m_bDessinComplet=!0)}function WDChartAnimation(n,t){arguments.length&&(this.duration=400,this.easing="swing",this.m_oAnimator=undefined,this.m_oPicture=t,this.m_domEtatInitial=undefined,this.m_oGraphe=n,this.m_dNow=0,this.m_dProgress=0,this.m_dRemainingMS=this.duration,this.m_domBaliseAnim=$("<p/>"),this.oStyleCssAnimation={content:1})}function WDChartAnimationValeur(n){arguments.length&&(WDChartAnimation.prototype.constructor.apply(this,arguments),this.m_oModelePrecedent=n.m_oVue.m_oModelePrecedent===undefined?undefined:n.m_oVue.m_oModelePrecedent,this.duration=600,this.easing="swing")}function WDChartXYAnimationValeur(){arguments.length&&(WDChartAnimationValeur.prototype.constructor.apply(this,arguments),this.m_bDejaRelativise=!1)}function WDXYChartAnimator(){arguments.length&&WDChartAnimator.prototype.constructor.apply(this,arguments)}function WDPieChartAnimator(){arguments.length&&WDChartAnimator.prototype.constructor.apply(this,arguments)}function WDPieChartZoomAnimation(n,t,i,r){arguments.length&&(WDChartAnimation.prototype.constructor.apply(this,arguments),this.duration=200,this.easing="easeInOutQuint",this.m_bIn=i,this.m_dZoom=1+(this.m_bIn?1:-1)*.1*(r||1))}function WDChartAnimationNoDraw(){arguments.length&&WDChartAnimation.prototype.constructor.apply(this,arguments)}function WDPieChartAnimationSurbrillancePartNoDraw(n,t,i,r){arguments.length&&(WDChartAnimationNoDraw.prototype.constructor.apply(this,arguments),this.m_domPartEnSurbrillance=r,this.m_bEtat=i,this.m_nEcart=10,this.m_nEcartInitial=r.parent().data("wbGrfAnimSurbrillanceEcart")||0,this.duration=200,this.easing="swing")}function WDPieChartAnimationSelectionLegende(n,t,i){arguments.length&&(WDChartAnimation.prototype.constructor.apply(this,arguments),this.m_domPartSelectionne=i,this.m_nIndiceValeurDansSerie=WDPieChartRenderer.nGetIndicePart(t,this.m_domPartSelectionne),this.m_bAffiche=!this.m_oGraphe.m_oVue.toggleSerieMasquee(this.m_nIndiceValeurDansSerie),this.duration=1e3,this.easing="easeOutExpo")}function WDPieChartAnimationSurbrillancePart(n,t,i,r){arguments.length&&(WDChartAnimation.prototype.constructor.apply(this,arguments),this.m_domPartEnSurbrillance=r,this.m_bEtat=i,this.duration=this.m_bEtat?1:1,this.easing="swing")}function WDPieChartAnimation1erAffichageBase(n){arguments.length&&(WDChartAnimation.prototype.constructor.apply(this,arguments),this.duration=n.m_oModele.m_oParametres.m_nDureeAnimation>0?n.m_oModele.m_oParametres.m_nDureeAnimation:1500,this.easing="easeOutExpo")}function WDPieChartAnimation1erAffichageArretDuVinyle(){arguments.length&&(WDPieChartAnimation1erAffichageBase.prototype.constructor.apply(this,arguments),this.m_dPourcentRotation=.2)}function WDPieChartAnimationSelectionPart(n,t,i){if(arguments.length){WDChartAnimation.prototype.constructor.apply(this,arguments);this.m_dAngleAffichage=90;this.m_dAngleInitial=n.m_oVue.m_oRenderer.getInitialStartAngle(n.m_oVue.m_oRenderer.m_params);var r=i.data("wbGrfDrawPath");for(this.m_dAngleFinal=(this.m_dAngleAffichage-(r.options.startAngle-r.options.firstAngle+r.options.sweep/2))%360;(this.m_dAngleInitial>this.m_dAngleFinal?this.m_dAngleInitial-this.m_dAngleFinal:this.m_dAngleFinal-this.m_dAngleInitial)>180;)this.m_dAngleInitial>this.m_dAngleFinal?this.m_dAngleFinal+=360:this.m_dAngleInitial+=360}}function WDPieChartAnimation1erAffichageWindevLike(){arguments.length&&(WDPieChartAnimation1erAffichageBase.prototype.constructor.apply(this,arguments),this.m_dPourcentRotation=0,this.easing="swing")}function WDPieChartAnimation1erAffichageClipPath(){arguments.length&&WDPieChartAnimation1erAffichageBase.prototype.constructor.apply(this,arguments)}function WDPieChartAnimation1erAffichageAngleFinCroissant(n){arguments.length&&(WDPieChartAnimation1erAffichageBase.prototype.constructor.apply(this,arguments),this.duration=1e3,this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect")===undefined&&this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect",n.m_oVue.m_oRenderer.m_rectChart))}function WDChartListener(n,t){arguments.length&&(this.m_oVue=n.m_oVue,this.m_oGraphe=n,this.m_domBalise=t)}function WDChartMireListener(n,t,i){arguments.length&&(WDChartListener.prototype.constructor.apply(this,arguments),this.m_domBulle=i)}function WDXYChartLegendListener(n,t,i,r){arguments.length&&(WDChartListener.prototype.constructor.apply(this,arguments),this.m_domLegende=t,this.m_domGroupeSerie=i,this.m_nIndexSerie=r)}function WDPieChartSelectionnePartListenerBase(){arguments.length&&WDChartListener.prototype.constructor.apply(this,arguments)}function WDPieChartAnimationTourneNoDraw(n,t,i){arguments.length&&(WDChartAnimationNoDraw.prototype.constructor.apply(this,arguments),this.m_nAngle=i)}function WDPieChartPartListener(){arguments.length&&(WDPieChartSelectionnePartListenerBase.prototype.constructor.apply(this,arguments),this.m_domLegende=undefined)}function WDPieChartLegendListener(){arguments.length&&(WDPieChartSelectionnePartListenerBase.prototype.constructor.apply(this,arguments),this.m_domPart=undefined)}WDBarreBoutonOnOffGraphe.prototype=new WDBarreBoutonOnOff;WDBarreBoutonOnOffGraphe.prototype.constructor=WDBarreBoutonOnOffGraphe;WDBarreBoutonOnOffGraphe.prototype.bActif=function(){return this.m_oObjetParent.bActif(this.m_oParamCommande)};WDGraphe.prototype=new WDBarre;WDGraphe.prototype.constructor=WDGraphe;WDGraphe.prototype.GetProp=function(n){switch(n){case this.XML_CHAMP_PROP_NUM_OPACITE:return this.m_oVue.bEstInteractif()?this.m_oModele.m_oParametres.byGetAlpha()/2.55:clWDUtil.nGetOpacite(undefined,this.m_oHoteImage);default:return WDChampParametres.prototype.GetProp.apply(this,arguments)}};WDGraphe.prototype.SetProp=function(n,t,i){switch(n){case this.XML_CHAMP_PROP_NUM_ETAT:return this.m_oVue.bEstInteractif()&&(this.m_oParametres.m_eEtat=i,this.relanceInitialisation()),WDChampParametres.prototype.SetProp.apply(this,arguments);case this.XML_CHAMP_PROP_NUM_COULEURFOND:return this.m_oVue.bEstInteractif()&&(this.m_oParametres.m_sCouleurFond=i,this.relanceInitialisation()),WDChampParametres.prototype.SetProp.apply(this,arguments);case this.XML_CHAMP_PROP_NUM_OPACITE:return this.m_oVue.bEstInteractif()?(this.m_oParametres.m_bInterditAlpha=!1,this.m_oParametres.m_byAlpha=i*2.55,this.relanceInitialisation(),1):clWDUtil.nSetOpacite(i,this.m_oHoteImage);default:return WDChampParametres.prototype.SetProp.apply(this,arguments)}};WDGraphe.prototype.m_tabDescBarre=[{nType:0,sSuf:"GDH",sCom:"GDH"},{nType:0,sSuf:"GDV",sCom:"GDV"},{nType:0,sSuf:"SMO",sCom:"SMO"},{nType:0,sSuf:"GRA",sCom:"GRA"},{nType:0,sSuf:"RAI",sCom:"RAI"},{nType:0,sSuf:"ANT",sCom:"ANT"},{nType:0,sSuf:"TRA",sCom:"TRA"},{nType:2,sSuf:"SAV",sCom:"OnSave",tabP:[]},{nType:2,sSuf:"PRI",sCom:"OnPrint",tabP:[]},{nType:5,sSuf:"PIE",sCom:"OnOption",tabP:["P","H","D","E"]},{nType:5,sSuf:"COL",sCom:"OnOption",tabP:["C","S","HC","HS","W"]},{nType:5,sSuf:"CUR",sCom:"OnOption",tabP:["C","S","A","R","B"]},{nType:5,sSuf:"STO",sCom:"OnOption",tabP:["C","B","M"]},{nType:4,sSuf:"LEG",sCom:"OnOption",tabP:["S","D","G","H","B"]},{nType:0,sSuf:"ANI",sCom:"ANI"},{nType:0,sSuf:"INT",sCom:"INT"},{nType:5,sSuf:"MIR",sCom:"OnOption",tabP:["MUL","MIR","BUL"]}];WDGraphe.prototype.m_tabConversionCom={PIE:"TYP",COL:"TYP",CUR:"TYP",STO:"TYP",LEG:"LEG",MIR:"MIR"};WDGraphe.prototype.m_tabConversionVal={PIE:[0,26,23,33],COL:[1,9,27,28,35],CUR:[2,5,24,25,32],STO:[6,7,8],LEG:[0,1,2,3,4],MIR:[0,1,2]};WDGraphe.prototype.Init=function(n,t,i,r){WDBarre.prototype.Init.apply(this,[i]);this.DeduitParamBarre(n);this.m_sUrlBase=t;this.m_oVue.Init(this,r);this.RafBarre(null)};WDGraphe.prototype._vLiaisonHTML=function(n,t){n="";t="";WDBarre.prototype._vLiaisonHTML.apply(this,[n,t]);this.m_oHoteImage=this.m_oHote};WDGraphe.prototype._vOnResize=function(){WDBarre.prototype._vOnResize.apply(this,arguments);this._DeplaceBarre()};WDGraphe.prototype._InitBarreAutomatique=function(){clWDUtil.AttacheDetacheEvent(!0,this.m_oHote,"mouseover",this.m_fRafBarreTrue);clWDUtil.AttacheDetacheEvent(!0,this.m_oHote,"mouseout",this.m_fRafBarreFalse);clWDUtil.AttacheDetacheEvent(!0,this.m_oBarre,"mouseout",this.m_fRafBarreFalse);clWDUtil.AttacheDetacheEvent(!0,this.m_oHote,"mousemove",this.m_fRafBarreTrueMMove)};WDGraphe.prototype._voNewBoutonOnOff=function(n,t){return new WDBarreBoutonOnOffGraphe(this,n,t.sCom,t.sSty,t.tabP)};WDGraphe.prototype._voNewBoutonAction=function(n,t){return new WDBarreBouton(this,n,t.sCom,t.tabP)};WDGraphe.prototype._voNewBoutonMenu=function(n,t){for(var r=new Array(t.tabP.length),u=t.tabP.length,i=0;i<u;i++)r[i]={oTD:this.oGetElementByIdBarre(document,t.sSuf+"_"+t.tabP[i]),oParamCommande:[this.m_tabConversionCom[t.sSuf],this.m_tabConversionVal[t.sSuf][i]],sTexte:CHART_TOOLBAR[t.sSuf][i]};return t.nType==this.ms_nBoutonPopupMenu?new WDBarreBoutonPopupMenu(this,n,t.sCom,this.oGetElementByIdBarre(document,t.sSuf+"P"),r):new WDBarreBoutonPopupMenuS(this,n,t.sCom,this.oGetElementByIdBarre(document,t.sSuf+"P"),r)};WDGraphe.prototype._voNewBoutonMenuS=function(n,t){return this._voNewBoutonMenu(n,t)};WDGraphe.prototype.RafBarre=function(n,t){switch(this.m_oParametres?this.m_oParametres.m_eEtat||WDChamp.prototype.ms_eEtatActif:WDChamp.prototype.ms_eEtatActif){case WDChamp.prototype.ms_eEtatLectureSeule:case WDChamp.prototype.ms_eEtatGrise:t=!1;break;default:case WDChamp.prototype.ms_eEtatActif:if(this.m_eModeBarre==this.ms_eModeBarreAutomatique&&t===undefined&&(t=!1,n)){var i=null;bIE||(i=n.relatedTarget);i||(i=n.toElement);(clWDUtil.bEstFils(i,this.m_oBarre,document)||clWDUtil.bEstFils(i,this.m_oHote,document))&&(t=!0)}}WDBarre.prototype.RafBarre.apply(this,[n,t])};WDGraphe.prototype.RafBarreMMove=function(n){clWDUtil.AttacheDetacheEvent(!1,this.m_oHote,"mousemove",this.m_fRafBarreTrueMMove);delete this.m_fRafBarreTrueMMove;this.RafBarre(n,!0)};WDGraphe.prototype.bActif=function(n){return this.m_tabEtat[n[0]]};WDGraphe.prototype.ExecuteCommande=function(n,t){this.m_tabEtat[t[0]]=this.m_tabEtat[t[0]]?0:1;this.m_oVue.ExecuteCommande(this);this.RafBarre(n,!0)};WDGraphe.prototype.OnOption=function(n,t){this.m_tabEtat[t[0]]=t[1];this.m_oVue.OnOption(this);this.RafBarre(n,!0)};WDGraphe.prototype.bActifOption=function(n,t){return this.m_tabEtat[t[0]]==t[1]};WDGraphe.prototype.OnSave=function(){this.m_oVue.OnSave(this)};WDGraphe.prototype.OnPrint=function(){this.m_oVue.OnPrint(this)};WDGraphe.prototype.sGetRequete=function(n){var t=this.m_sUrlBase;return t=t+(t.indexOf("?")==-1?"?":"&"),t+"WD_ACTION_="+(n?"GRAPHESAUVE":"GRAPHEPARAM")+"&WD_BUTTON_CLICK_="+this.m_sAliasChamp+"&WD_PARAM_="+this._vsConstruitParam()+"&"+this.m_sAliasChamp+"="+(new Date).getTime()};WDGraphe.prototype._vsConstruitParam=function(){var n=[],t=WDChamp.prototype._vsConstruitParam.apply(this,arguments);return t.length>0&&n.push(t),n.push(this.m_tabEtat.TYP),n.push(this.m_tabEtat.GDH),n.push(this.m_tabEtat.GDV),n.push(this.m_tabEtat.SMO),n.push(this.m_tabEtat.GRA),n.push(this.m_tabEtat.RAI),n.push(this.m_tabEtat.ANT),n.push(this.m_tabEtat.TRA),n.push(this.m_tabEtat.LEG),n.push(this.m_tabEtat.MIR),n.push(this.m_tabEtat.ANI),n.push(this.m_tabEtat.INT),n.join(",")};WDGraphe.prototype.DeduitParamBarre=function(n){this.m_tabEtat=clWDUtil.oEvalJSON(n)};WDGraphe.prototype.sGetAltText=function(n){return CHART_TOOLBAR.ALTTEXT[n]};WDGraphe.prototype._vAppliqueParametres=function(){WDBarre.prototype._vAppliqueParametres.apply(this,arguments);this.relanceInitialisation();this.ConstruitParam()};WDGraphe.prototype.grInfoXY=function(n,t,i){var f,h,r,c,u,l,e,o,s;if(t===undefined&&(t=this.m_grInfoX),i===undefined&&(i=this.m_grInfoY),this.m_grInfoX=t,this.m_grInfoX=i,this.m_oVue&&this.m_oVue.m_oPicture&&this.m_oVue.m_oPicture.m_domBaliseSVG){for(h=this.m_oVue.m_oPicture.m_domBaliseSVG[0],r=h.createSVGRect(),r.x=t,r.y=i,r.width=r.height=1,c=h.getIntersectionList(r,null),e=c.length-1;e>-1;--e)(o=$(c[e]),s=o.data("wbGrfGrInfoXY"),s!==undefined&&s[n]!=undefined)&&(u===undefined||o.is(":hover"))&&(u=s,l=o);u||(u=this.m_oVue.m_oRenderer.drawMire(this.m_oVue.m_oPicture,this.m_oVue.m_oAnimator,this.m_oVue.m_oRenderer.m_domBulle,undefined,t,i));u&&(f=clWDUtil.isFunction(u[n])?u[n].apply(this,[l,r.x,r.y]):u[n])}switch(n){case IWDChartConstant.GR_SERIE:case IWDChartConstant.GR_CATEGORIE:return f!==undefined?f+1:-1;case IWDChartConstant.GR_VALEUR:default:return f!==undefined?f:0}};WDGraphe.prototype.relanceInitialisation=function(n){var t,r,i,f,u;if(this.m_oVue.m_bInteractif&&(this.m_oModele&&(this.m_oModele=undefined,delete this.m_oModele),this.m_oModele=new WDChartModel(this),n=this.m_oVue.RecreerRenderer(this,n),this.m_oVue.Redessine(this,n),this.m_oVue.m_oPicture&&this.m_oVue.m_oPicture.m_domBaliseSVG))for(this.m_oVue.m_oPicture.m_domBaliseSVG.find("desc").remove(),t=0;t<this.m_oModele.m_tabSeries.length;++t){for(r=this.m_oModele.m_tabSeries[t].m_sLibelle,i=0;i<this.m_oModele.m_tabSeries[t].m_tabValeur.length;++i)(f=this.m_oModele.getCategoryLabelAt(i),u=this.m_oModele.m_tabSeries[t].getValueAtWithNull(i),u!==IWDChartConstant.NULL_VALUE)&&(r+="\t"+f+"="+u);this.m_oVue.m_oPicture.tag(this.m_oVue.m_oPicture.m_domBaliseSVG,"desc-"+t,"desc").html(r)}};IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE=0;IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE=1;IWDConstante.ALIGNEMENT_HORIZONTAL_DROIT=2;IWDConstante.ALIGNEMENT_HORIZONTAL_JUSTIFIE=3;IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE_PICTO_GAUCHE=4;IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE_PICTO_DROITE=5;IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE_PICTO_GAUCHE=6;IWDConstante.ALIGNEMENT_HORIZONTAL_DROITE_PICTO_DROITE=7;Align.LEFT=IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE;Align.CENTER=IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE;Align.RIGHT=IWDConstante.ALIGNEMENT_HORIZONTAL_DROIT;IWDConstante.ALIGNEMENT_VERTICAL_HAUT=0;IWDConstante.ALIGNEMENT_VERTICAL_CENTRE=1;IWDConstante.ALIGNEMENT_VERTICAL_BAS=2;IWDChartConstant.DEFAULT_VALUE=-2e9;IWDChartConstant.SPECIAL_VALUE=-Math.pow(2,31);IWDChartConstant.NULL_VALUE=undefined;IWDChartConstant.FLAG_LEGEND_POSITION_NONE=0;IWDChartConstant.FLAG_LEGEND_POSITION_LEFT=1;IWDChartConstant.FLAG_LEGEND_POSITION_RIGHT=2;IWDChartConstant.FLAG_LEGEND_POSITION_TOP=4;IWDChartConstant.FLAG_LEGEND_POSITION_BOTTOM=8;IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL=16;IWDChartConstant.FLAG_LEGEND_POSITION_MASK=31;IWDChartConstant.FLAG_LEGEND_LABEL_IN_ROW=32;IWDChartConstant.FLAG_LEGEND_ADAPT_SIZE=64;IWDChartConstant.FLAG_LEGEND_ROUNDED_BORDER=128;IWDChartConstant.FLAG_TITLE_POSITION_NONE=0;IWDChartConstant.FLAG_TITLE_POSITION_TOP=256;IWDChartConstant.FLAG_TITLE_POSITION_BOTTOM=512;IWDChartConstant.FLAG_TITLE_POSITION_MANUAL=1024;IWDChartConstant.FLAG_TITLE_POSITION_MASK=1792;IWDChartConstant.FLAG_AXIS_LABEL_ORIENTATION_AUTO=0;IWDChartConstant.FLAG_X_AXIS_LABEL_ORIENTATION_VERTICAL=4096;IWDChartConstant.FLAG_X_AXIS_LABEL_ORIENTATION_HORIZONAL=8192;IWDChartConstant.FLAG_X_AXIS_LABEL_ORIENTATION_MASK=12288;IWDChartConstant.FLAG_Y_AXIS_LABEL_ORIENTATION_VERTICAL=16384;IWDChartConstant.FLAG_Y_AXIS_LABEL_ORIENTATION_HORIZONAL=32768;IWDChartConstant.FLAG_Y_AXIS_LABEL_ORIENTATION_MASK=49152;IWDChartConstant.FLAG_VERTICAL_GRID=65536;IWDChartConstant.FLAG_HORIZONTAL_GRID=131072;IWDChartConstant.FLAG_ANTIALIASING=262144;IWDChartConstant.FLAG_BORDER_COLOR_AUTO=524288;IWDChartConstant.FLAG_NO_GRADIENT=0;IWDChartConstant.FLAG_VERTICAL_GRADIENT=1048576;IWDChartConstant.FLAG_HORIZONTAL_GRADIENT=2097152;IWDChartConstant.FLAG_GRADIENT_MASK=3145728;IWDChartConstant.FLAG_NULL_VALUES_NOT_DRAWN=0;IWDChartConstant.FLAG_NULL_VALUES_IGNORED=4194304;IWDChartConstant.FLAG_NULL_VALUES_BACK_TO_ZERO=8388608;IWDChartConstant.FLAG_NULL_VALUES_MASK=12582912;IWDChartConstant.FLAG_ZOOM_NONE=0;IWDChartConstant.FLAG_ZOOM_HORIZONTAL=16777216;IWDChartConstant.FLAG_ZOOM_VERTICAL=33554432;IWDChartConstant.FLAG_ZOOM_MASK=50331648;IWDChartConstant.FLAG_LINE_SMOOTING=67108864;IWDChartConstant.FLAG_SHOW_VALUES_LABEL=134217728;IWDChartConstant.FLAG_BAR_CHART_STACKED=268435456;IWDChartConstant.FLAG_SHOW_CATEGORIES_LABEL=536870912;IWDChartConstant.FLAG_SHOW_PERCENTAGE=1073741824;IWDChartConstant.FLAG_HIDE_NULL_VALUES=2147483648;IWDChartConstant.FLAG_X_AXIS_TIME_SCALE=4294967296;IWDChartConstant.ReInitModeCompact=function(n){IWDChartConstant.DESSIN_COMPACT=n;IWDChartConstant.MARGIN_BORDER=7;IWDChartConstant.MARGIN_AXIS_TITLE=IWDChartConstant.DESSIN_COMPACT?3:5;IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL=4;IWDChartConstant.MARGIN_HORIZONTAL_GRADUATION_LABEL=4;IWDChartConstant.MARGIN_TITLE_GRAPH=IWDChartConstant.DESSIN_COMPACT?4:10;IWDChartConstant.MARGIN_LEGEND_BORDER=IWDChartConstant.DESSIN_COMPACT?4:10;IWDChartConstant.MARGIN_LEGEND_ELEMENTS=IWDChartConstant.DESSIN_COMPACT?4:10;IWDChartConstant.MARGIN_PIE=IWDChartConstant.DESSIN_COMPACT?3:5;IWDChartConstant.MARGIN_LABEL_PIE=IWDChartConstant.DESSIN_COMPACT?8:10;IWDChartConstant.MARGIN_LABEL=5;IWDChartConstant.MARGIN_LABEL_HORIZ=IWDChartConstant.MARGIN_LABEL;IWDChartConstant.LEGEND_SQUARE_SIZE=IWDChartConstant.DESSIN_COMPACT?4:10};IWDChartConstant.ReInitModeCompact(!1);IWDChartConstant.GRADUATION_MIN_SIZE_Y=25;IWDChartConstant.GRADUATION_MIN_SIZE_X_HORIZONTAL=20;IWDChartConstant.GRADUATION_MIN_SIZE_X_VERTICAL=10;IWDChartConstant.GRADUATION_TICK_SIZE=3;IWDChartConstant.BAR_MIN_WIDTH=5;IWDChartConstant.BAR_MIN_SPACING=1;IWDChartConstant.GR_COULEUR_AXE=0;IWDChartConstant.GR_COULEUR_AXE_RELIEF=1;IWDChartConstant.GR_COULEUR_QUADRILLAGE=2;IWDChartConstant.GR_COULEUR_QUADRILLAGE_RELIEF=3;IWDChartConstant.GR_COULEUR_LEGENDE=4;IWDChartConstant.GR_COULEUR_LEGENDE_FOND=5;IWDChartConstant.GR_COULEUR_BORDURE=6;IWDChartConstant.GR_COULEUR_CHANDELIER_HAUSSIER=7;IWDChartConstant.GR_TOUTES_SERIES=0;IWDChartConstant.GR_ORDONNEE=0;IWDChartConstant.GR_ABSCISSE=1;IWDChartConstant.GR_ORDONNEE_SECONDAIRE=2;IWDChartConstant.GR_SANS=0;IWDChartConstant.GR_DROITE=1;IWDChartConstant.GR_GAUCHE=2;IWDChartConstant.GR_HAUT=3;IWDChartConstant.GR_BAS=4;IWDChartConstant.GR_AFFICHE_VALEUR=0;IWDChartConstant.GR_AFFICHE_POURCENTAGE=1;IWDChartConstant.GR_AFFICHE_ETIQUETTE=2;IWDChartConstant.GR_AFFICHE_VALEUR_SI_NULLE=3;IWDChartConstant.GR_MASQUE_VALEUR=0;IWDChartConstant.GR_MASQUE_POURCENTAGE=1;IWDChartConstant.GR_MASQUE_AXE=2;IWDChartConstant.GR_PROGRAMMATION=0;IWDChartConstant.GR_FONCTION=1;IWDChartConstant.GR_RUBRIQUE=2;IWDChartConstant.GR_TABLEAU=3;IWDChartConstant.GR_LISTE=4;IWDChartConstant.GR_DONNEES=-1;IWDChartConstant.GR_DONNEES_ET_STYLE=-2;IWDChartConstant.GR_SECTEUR=0;IWDChartConstant.GR_HISTO=1;IWDChartConstant.GR_COURBE=2;IWDChartConstant.GR_HISTO_EMPILE=9;IWDChartConstant.GR_DONUT=23;IWDChartConstant.GR_AIRE=24;IWDChartConstant.GR_MIN=-20001;IWDChartConstant.GR_MAX=-20002;IWDChartConstant.GR_AXE_X=-10001;IWDChartConstant.GR_AXE_Y=-10002;IWDChartConstant.GR_SERIE=0;IWDChartConstant.GR_CATEGORIE=1;IWDChartConstant.GR_VALEUR=2;ETimeScale.DATE=0;ETimeScale.TIME=1;ETimeScale.NONE=2;eDESSINVALEURNULLE.eValeurNulleNonDessinee=0;eDESSINVALEURNULLE.eValeurNulleIgnoree=1;eDESSINVALEURNULLE.eValeurNulleAZero=2;ETypeCategorieWaterfall.eWaterfallDefaut=0;ETypeCategorieWaterfall.eWaterfallTotal=1;ETypeCategorieWaterfall.eWaterfallSousTotal=2;ETypeCategorieWaterfall.eWaterfallPositif=3;ETypeCategorieWaterfall.eWaterfallNegatif=4;typeof Number.prototype.toRad=="undefined"&&(Number.prototype.toRad=function(n){return(n?this%360:this)*Math.PI/180},Number.prototype.toDeg=function(n){return(n?this%360:this)*(180/Math.PI)});stPath.prototype.constructor=stPath();WDPictureSVG.prototype.constructor=WDPictureSVG;WDPictureSVG.prototype.svgns="http://www.w3.org/2000/svg";WDPictureSVG.prototype.smilanimns="http://www.w3.org/2001/smil-animation";WDPictureSVG.prototype.smil2ns="http://www.w3.org/2001/SMIL20";WDPictureSVG.prototype.smil21ns="http://www.w3.org/2005/SMIL21";WDPictureSVG.prototype.smil3ns="http://www.w3.org/ns/SMIL30";WDPictureSVG.prototype.timesheetns="http://www.w3.org/2007/07/SMIL30/Timesheets";WDPictureSVG.prototype.xlinkns="http://www.w3.org/1999/xlink";WDPictureSVG.prototype.PlaceDansLaPage=function(n){var t=$(n.m_oHoteImage);t.css("display","none");t[0].nextSibling!==undefined?t[0].parentNode.insertBefore(this.m_domBaliseSVG[0],t[0].nextSibling):t[0].appendChild(this.m_domBaliseSVG[0]);t.parent().is("a")&&t.parent().css("text-decoration","none")};WDPictureSVG.prototype.Raz=function(){this.m_domBaliseSVG!==undefined?(this.m_domBaliseSVG.empty(),this.m_domBaliseSVG.data("wbGrfNbDessins",0),this.m_domDefsSVG=this.tag(this.m_domBaliseSVG,"defs","defs")):this.m_domBaliseSVG=this.tag("svg")};WDPictureSVG.prototype.Init=function(n){var o,t;this.Raz();this.m_oGraphe=n;var e=n.m_oHoteImage.width,u=n.m_oHoteImage.height,i=$(n.m_oHoteImage);i.data("width")&&(e=i.data("width"),u=i.data("height"));var s=(i.attr("style")||"").replace(/ /g,""),f=s.indexOf("width:100%")>-1||i.attr("width")=="100%",r=s.indexOf("height:100%")>-1||i.attr("height")=="100%";(f||r)&&(f&&i.data("width",e=i.parent().width()),r&&(o=i.parent().height(),i.data("height",u=o==0?u:o)),this.m_nTimerRedim=null,this.m_bRedimEnCours=!1,t=this,$(window).resize(function(){!t.m_bRedimEnCours&&(t.m_oGraphe.m_oParametres.m_bInteractif||t.m_oGraphe.m_tabEtat.INT)&&(t.m_nTimerRedim==null||clearTimeout(t.m_nTimerRedim),t.m_nTimerRedim=setTimeout(function(){try{t.m_bRedimEnCours=!0;var n=r&&i.data("height")<10;if(f&&i.data("width",i.parent().width()),r&&i.data("height",i.parent().height()),t.Init(t.m_oGraphe),t.m_oGraphe.relanceInitialisation(),n)try{t.m_oGraphe.m_tabEtat.INT=!1;t.m_oGraphe.m_oVue.ExecuteCommande(t.m_oGraphe);t.m_oGraphe.m_tabEtat.INT=!0;t.m_oGraphe.m_oVue.ExecuteCommande(t.m_oGraphe)}catch(u){}finally{t.m_oGraphe.m_tabEtat.INT=!0}}catch(u){}finally{t.m_oGraphe.m_tabEtat.INT=!0;t.m_bRedimEnCours=!1;t.m_nTimerRedim=null}},50))}));this.m_domBaliseSVG.attr("version","1.1").attr("xmlns",this.svgns).css("width",f?"100%":i.css("width")).css("height",r?"100%":i.css("height")).attr("title",i.attr("title")||"").css("line-height","normal").data("wbGrfAnimDuree",n.m_oModele.m_oParametres.m_nDureeAnimation);this.attrNS(this.m_domBaliseSVG,null,"viewBox","0 0 "+e+" "+u);this.m_bDessinDirectementDansLaPage&&this.PlaceDansLaPage(n)};WDPictureSVG.prototype.SetImageFond=function(n){n.applyStyle(this,this.m_domBaliseSVG)};WDPictureSVG.prototype.insert=function(n,t){n===undefined&&(n=this.m_domBaliseSVG);var i=n.children().first();return i.length>0?n[0].insertBefore(t[0],i[0]):this.append(n,t)};WDPictureSVG.prototype.insertAfter=function(n,t,i){return n===undefined&&(n=this.m_domBaliseSVG),i!==undefined&&i[0]!==undefined&&i[0].nextSibling!==undefined?n[0].insertBefore(t[0],i[0].nextSibling):this.append(n,t)};WDPictureSVG.prototype.append=function(n,t){if(n!==undefined||(n=this.m_domBaliseSVG,n!==undefined))return n[0].appendChild(t[0])};WDPictureSVG.prototype.SetAntiAliasing=function(n,t){t===undefined&&(t=this.m_domBaliseSVG);t.attr("shape-rendering",n?"auto":"crispEdges")};WDPictureSVG.prototype.path=function(n,t){return this.tag(n,t,"path")};WDPictureSVG.prototype.drawPath=function(n,t,i,r){var u=clWDUtil.isArray(t)||clWDUtil.bEstChaineNonVide(t)?{d:t}:t;return clWDUtil.isArray(u.d)&&(u.d=u.d.join(" ")),r===undefined&&(r=WDSvgAnimation),this.bDrawAvecAnimation(r,n,u)||(n.attr("d",u.d),r&&r.afffiche(n),n.data("wbGrfDrawInfos",u)),n.attr("fill")===undefined&&n.attr("fill","none"),i&&i.applyStyle(this,n),n};WDPictureSVG.prototype.drawPathFactory=function(n,t,i,r){var u=this.drawPath(n,i,r);return $.extend(u,t),n.data("wbGrfDrawPath",t),u};WDPictureSVG.prototype.tag=function(n,t,i){var r=n,f=t,e=i,u;return(arguments.length===2?(e=f,r=undefined,f=undefined):arguments.length===1?(e=r,r=undefined,f=undefined):arguments.length!==3||clWDUtil.isObject(r)||f||!e||(f=r,r=undefined),r===undefined&&(r=this.m_domBaliseSVG),u=r?this.findFromId(r,f):undefined,u&&u.length===1)?u:(u=$(document.createElementNS(this.svgns,e)),this.setId(u,f),this.append(r,u),u)};WDPictureSVG.prototype.getId=function(n){return n.attr("id")};WDPictureSVG.prototype.setId=function(n,t){n.attr("id",this.sConstruitId(t))};WDPictureSVG.prototype.sConstruitId=function(n){return this.m_Id+"-"+(n||"svg")};WDPictureSVG.prototype.find=function(n,t){return $.contains(document,n)?$(document.getElementById(this.getId(t))):n.find("#"+this.getId(t))};WDPictureSVG.prototype.findFromId=function(n,t){return $.contains(document,n)?$(document.getElementById(this.sConstruitId(t))):n.find("#"+this.sConstruitId(t))};WDPictureSVG.prototype.drawContenu=function(n,t){var i=n.contents(),r;return i&&i[0]&&i[0].nodeType==3?(i[0].nodeValue=t,i):(r=$(document.createTextNode(t)),n.append(r),r)};WDPictureSVG.prototype.attrNS=function(n,t,i,r){return n[0]!==undefined&&(n=n[0]),n.setAttributeNS(t,i,r)};WDPictureSVG.bDessinPossible=function(){return!!document.createElementNS&&!!document.createElementNS(WDPictureSVG.prototype.svgns,"svg").createSVGRect};WDPictureSVG.prototype.g=function(n,t){return this.tag(n,t,"g").attr("role","presentation")};WDPictureSVG.prototype.arc=function(n,t){return this.path(n,t)};WDPictureSVG.prototype.line=function(n,t){return this.tag(n,t,"line")};WDPictureSVG.prototype.bDrawAvecAnimation=function(n,t,i,r,u){if(n===!1)return!1;var f=this.m_domBaliseSVG.data("wbGrfAnimDuree")===0&&this.m_domBaliseSVG.data("wbGrfModeAffichage")===WDChartView.ms_nDessin1erAffichage;return!f&&(n.bIgnorePendantAnimation()||!this.bPendantAnimation())&&t.data("wbGrfDrawInfos")!==undefined?(new n.prototype.constructor(this.m_oGraphe,this,t,t.data("wbGrfDrawInfos"),i,r,u).run(),!0):!1};WDPictureSVG.prototype.drawLine=function(n,t,i,r,u,f,e){var o={x1:t,y1:i,x2:r,y2:u};return e===undefined&&(e=WDSvgAnimation),this.bDrawAvecAnimation(e,n,o)||(this.attrNS(n,null,"x1",t),this.attrNS(n,null,"y1",i),this.attrNS(n,null,"x2",r),this.attrNS(n,null,"y2",u),e&&e.afffiche(n),n.data("wbGrfDrawInfos",o)),f.applyStyle(this,n),n};WDPictureSVG.prototype.rect=function(n,t){return this.tag(n,t,"rect")};WDSvgAnimation.prototype=new WDChartAnimation;WDSvgAnimation.prototype.constructor=WDSvgAnimation;WDSvgAnimation.prototype.ArreteEtVideAnimations=function(n){n||(n=this.m_domBaliseAnim);n.stop(this.queue,!0);var t=this;n.children().each(function(){t.ArreteEtVideAnimations($(this))})};WDSvgAnimation.prototype.start=function(){var n=WDChartAnimation.getAnim(this);clWDUtil.bForEachIn(n.m_oAttributs,function(t,i){return i!==undefined&&n.m_oAttributsAvant[t]===undefined&&(n.m_oAttributsAvant[t]=n.m_domBalise.attr(t)),!0})};WDSvgAnimation.prototype.step=function(n){var t=WDChartAnimation.getAnim(this),i;t&&(t.m_dNow=n,t.m_dNow!==0)&&(i={},clWDUtil.bForEachIn(t.m_oAttributs,function(r,u){if(u!==undefined){if(r.indexOf("data-")===0)return i[r]||(i[r]=u),!0;if(t.m_dNow!==1||clWDUtil.isObject(u))if(r.indexOf("color")>-1||r=="fill"||r=="stroke"){var f=new WDCouleur(t.m_oAttributsAvant[r]),e=new WDCouleur(u),s=t.tween(f.m_nTeinte,e.m_nTeinte),h=t.tween(f.m_nSaturation,e.m_nSaturation),c=t.tween(f.m_nLuminosite,e.m_nLuminosite),o=new WDCouleur(TSL(s,h,c));i[r]=clWDUtil.sRVB2HTML([o.m_nRouge,o.m_nVert,o.m_nBleu])}else r==="d"?(oPath=t.tweenPath(t.m_oAttributsAvant[r],u,n),clWDUtil.bForEachIn(oPath,function(n){return i[n]=oPath[n],!0})):i[r]=r==="dx"||r==="x"||r==="width"?t.tweenX(t.m_oAttributsAvant[r],u,n):r==="dy"||r==="y"||r==="height"?t.tweenY(t.m_oAttributsAvant[r],u,n):t.tween(t.m_oAttributsAvant[r],u,n);else i[r]=u;t.m_oPicture.attrNS(t.m_domBalise,null,r,i[r])}return!0}),t.m_domBalise.data("wbGrfDrawInfos",i))};WDSvgAnimation.prototype.tweenPath=function(n,t,i){var u=clWDUtil.isArray(n)?n:n.split(" "),e=clWDUtil.isArray(t)?t:t.split(" "),r,s,h;if(u.length!==e.length)return u.join(" ");var f=[],c=!1,o=0;for(r=0;r<u.length;++r)s=parseInt10(u[r]),h=parseInt10(e[r]),isNaN(s)||isNaN(h)?(f[r]=u[r],c=f[r]=="M"||f[r]=="L",o=0):(f[r]=o%2==0?this.tweenX(u[r],e[r],i):this.tweenY(u[r],e[r],i),++o);return{d:f.join(" ")}};WDSvgAnimation.prototype.done=function(){var n=WDChartAnimation.getAnim(this);n&&n.m_fFinAnimation&&n.m_fFinAnimation.apply(arguments)};WDSvgAnimation.afffiche=function(){};WDSvgAnimation.bIgnorePendantAnimation=function(){return!1};WDSvgAnimationGridLine.prototype=new WDSvgAnimation;WDSvgAnimationGridLine.prototype.constructor=WDSvgAnimationGridLine;WDSvgAnimationGridLine.prototype.step=function(n){WDSvgAnimation.prototype.step.apply(this,arguments);$(this).css("opacity",n)};WDSvgAnimationGridLine.afffiche=function(n){n.css("opacity",0).fadeTo(800,1)};WDSvgAnimationGridLine.bIgnorePendantAnimation=function(){return!0};WDSvgAnimationBulle.prototype=new WDSvgAnimation;WDSvgAnimationBulle.prototype.constructor=WDSvgAnimationBulle;WDSvgAnimationBulle.prototype.step=function(){WDSvgAnimation.prototype.step.apply(this,arguments)};WDSvgAnimationBulle.prototype.ArreteEtVideAnimations=function(){WDSvgAnimation.prototype.ArreteEtVideAnimations.apply(this,arguments)};WDSvgAnimationBulle.prototype.bAnimationBullePathPossible=function(n,t){var i=t.data("wbGrfDrawInfos"),r;return i?(r=clWDUtil.isArray(i.d)?i.d:i.d.split(" "),!r||r.length!=n.d.length)?!1:!0:!1};WDSvgAnimationBulle.prototype.tweenX=function(n,t,i){if(WDSvgAnimationBulle.gbEase===!0)return WDSvgAnimation.prototype.tweenX.apply(this,arguments);var r=new clWDUtil.WDBezier(.25,.25,.225,.855);return this.tween(n,t,r.dCalcule(i,this.duration))};WDSvgAnimationBulle.prototype.tweenY=function(){return WDSvgAnimation.prototype.tweenY.apply(this,arguments)};WDSvgAnimationBulle.prototype.tweenPath=function(n,t,i){var u=this.m_oAttributsAvant["data-arguments"],f,o;if(!u||!clWDUtil.isArray(u))return WDSvgAnimation.prototype.tweenPath.apply(this,arguments);if(f=clWDUtil.isArray(n)?n:n.split(" "),o=clWDUtil.isArray(t)?t:t.split(" "),f.length!==o.length)return f.join(" ");var r=this.m_oAttributs["data-arguments"],s=this.tweenRect(u[0],r[0]),e=WDChartRenderer.prototype.__oPathBulle(s,this.tween(u[1],r[1]),this.tween(u[2],r[2]),this.tween(u[3],r[3]),this.tweenX(u[0].m_nRight,r[0].m_nRight,i)-(r[0].m_nRight-r[4]),this.tweenY(u[0].m_nBottom,r[0].m_nBottom,i)-(r[5]-r[0].m_nBottom));return e.d=e.d.join(" "),e};WDSvgAnimationBulle.afffiche=function(n){return WDSvgAnimation.afffiche(n)};WDSvgAnimationBulle.bIgnorePendantAnimation=function(){return WDSvgAnimation.bIgnorePendantAnimation()};WDSvgAnimationLegende.prototype=new WDSvgAnimation;WDSvgAnimationLegende.prototype.constructor=WDSvgAnimationLegende;WDSvgAnimationLegende.afffiche=function(n){return WDSvgAnimationGridLine.afffiche(n)};WDSvgAnimationLegende.bIgnorePendantAnimation=function(){return WDSvgAnimationGridLine.bIgnorePendantAnimation()};WDPictureSVG.prototype.drawRect=function(n,t,i,r,u,f){var e={x:t.m_nLeft,y:t.m_nTop,width:WDRect.getWidth(t),height:WDRect.getHeight(t),rx:r,ry:u};return f===undefined&&(f=WDSvgAnimation),this.bDrawAvecAnimation(f,n,e)||(this.attrNS(n,null,"x",e.x),this.attrNS(n,null,"y",e.y),this.attrNS(n,null,"width",e.width),this.attrNS(n,null,"height",e.height),r!==undefined&&this.attrNS(n,null,"rx",r),u!==undefined&&this.attrNS(n,null,"ry",u),f&&f.afffiche(n),n.data("wbGrfDrawInfos",e)),i&&(i.m_oStyle.fill===undefined&&i.setFill("none"),i.applyStyle(this,n)),n};WDPictureSVG.prototype.text=function(n,t){return this.tag(n,t,"text")};WDPictureSVG.prototype.tspan=function(n,t){return this.tag(n,t,"tspan")};WDPictureSVG.prototype.circle=function(n,t){return this.tag(n,t,"circle")};WDPictureSVG.prototype.polygon=function(n,t){return this.tag(n,t,"polygon")};WDPictureSVG.prototype.drawPolygon=function(n,t,i){return this.attrNS(n,null,"points",t.join(" ")),i.applyStyle(this,n),n};WDPictureSVG.prototype.drawCircle=function(n,t,i,r,u){return this.attrNS(n,null,"cx",t),this.attrNS(n,null,"cy",i),this.attrNS(n,null,"r",r),u.applyStyle(this,n),n};WDPictureSVG.prototype.drawTextVertically=function(n,t,i,r,u,f,e,o){return this.rotate(n,270,r,u,!0,!1),this.drawText(n,t,i,r,u,f,e,o)};WDPictureSVG.prototype.applyStyleAvecHackColor=function(n,t){var i,r;t!=undefined&&t.m_oStyle.fill==undefined&&(this.m_tabCache[t.m_sClasse]||(i=$('<span style="position:absolute;visibility:hidden" class="'+t.m_sClasse+'"><\/span>'),$("body").append(i),r=window.getComputedStyle(i[0]),this.m_tabCache[t.m_sClasse]=r.color,i.remove()),t.setFill(this.m_tabCache[t.m_sClasse]));t.applyStyle(this,n)};WDPictureSVG.prototype.bPendantAnimation=function(){return this.m_domBaliseSVG.data("wbGrfModeAffichage")==WDChartView.ms_nDessinAnimation};WDPictureSVG.prototype.addClass=function(n,t){this.removeClass(n,t);n.attr("class",((n.attr("class")||"").trim()+" "+t).trim())};WDPictureSVG.prototype.removeClass=function(n,t){n.attr("class",(n.attr("class")||"").replace(t,"").trim())};WDPictureSVG.prototype.drawText=function(n,t,i,r,u,f,e,o){var h={x:r,y:u+i},v=clWDUtil.isArray(t)?t:[t],a=[t,r,u],s,c,l;return n.data("wbGrfCacheDrawText")==a?n:(n.data("wbGrfCacheDrawText",a),s=this,n.find("*").each(function(){s.addClass($(this),"wbGrfGC")}),this.attrNS(n,null,"text-anchor",f==IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE?"middle":f==IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE?"start":"end"),o===undefined&&(o=WDSvgAnimation),clWDUtil.isArray(e)?(c=e[0],e=e.slice(1)):c=e,this.bDrawAvecAnimation(o,n,h)||(this.attrNS(n,null,"x",h.x),this.attrNS(n,null,"y",h.y),o&&o.afffiche(n),n.data("wbGrfDrawInfos",h)),l=0,clWDUtil.bForEachIn(v,function(t,r){var c=undefined,f,a,u,v;for(!clWDUtil.isArray(r)&&r.length>1&&r.indexOf("\n")&&(c=r.split("\n")),f=r,a=0;a<(c?c.length:1);++a)c&&(f=c[a]),u=s.tspan(n,s.getId(n)+"-texte-ligne-"+ ++l),s.removeClass(u,"wbGrfGC"),(t>0||a>0)&&(s.attrNS(u,null,"dy",i),u.data("wbGrfDrawInfos",n.data("wbGrfDrawInfos"))),v={x:h.x},s.bDrawAvecAnimation(o,u,v)||(s.attrNS(u,null,"x",h.x),u.data("wbGrfDrawInfos",v),o&&o.afffiche(u)),clWDUtil.isArray(f)&&f.length>1?clWDUtil.bForEachIn(f,function(i,r){var f,o;return i>0?(o=s.tspan(n,"texte-ligne-"+l+"-sous-"+i),s.attrNS(o,null,"dx",0),f=o):f=u,s.removeClass(f,"wbGrfGC"),s.drawContenu(f,r),clWDUtil.isArray(e)&&clWDUtil.isArray(e[t])&&clWDUtil.isObject(e[t][i])&&s.applyStyleAvecHackColor(f,e[t][i]),!0}):(s.drawContenu(u,f),clWDUtil.isArray(e)&&clWDUtil.isObject(e[t])?s.applyStyleAvecHackColor(u,e[t]):s.applyStyleAvecHackColor(u,new WDPaintCSS(e)));return!0}),c&&this.applyStyleAvecHackColor(n,c),n.find(".wbGrfGC").empty(),n)};WDPictureSVG.prototype.translate=function(n,t,i,r,u){var f=(""+(t||"")).split(",");return f.length==2&&(t=f[0],i=f[1]),r||bIEAvec11?n.attr("transform",(!u?"":(n.attr("transform")||"")+" ")+"translate("+t+","+i+")"):n.css("transform",(!u?"":(n.css("transform")||"")+" ")+"translateX("+t+") translateY("+i+")"),n.data("wbGrfDrawTranslate",arguments),n};WDPictureSVG.prototype.scale=function(n,t,i,r,u){var f=(""+(t||"")).split(",");return f.length==2&&(t=f[0],i=f[1]),r||bIEAvec11?n.attr("transform",(!u?"":(n.attr("transform")||"")+" ")+"scale("+t+","+i+")"):n.css("transform",(!u?"":(n.css("transform")||"")+" ")+"scale("+t+","+i+")"),n.data("wbGrfDrawScale",arguments),n};WDPictureSVG.prototype.rotate=function(n,t,i,r,u,f){var e=(""+(t||"")).split(","),o;return e.length==3&&(t=e[0],i=e[1],r=e[2]),u||bIEAvec11?(o="rotate("+t,i!==undefined&&r!=undefined&&(o+=","+i+","+r),o+=")",n.attr("transform",(!f?"":(n.attr("transform")||"")+" ")+o)):(n.css("transform",(!f?"":(n.css("transform")||"")+" ")+"rotateZ("+(""+t).replace("deg","")+"deg)"),n.css("transform-origin",(typeof i=="string"?i:i+"px")+" "+(typeof r=="string"?r:r+"px"))),n.data("wbGrfDrawRotate",arguments),n};WDPictureSVG.prototype.bulle=function(n,t){return this.tag(n,t,"title")};WDPictureSVG.prototype.drawBulle=function(n,t,i){return this.drawContenu(n,t),i.applyStyle(this,n),n};WDPictureSVG.prototype.__tabPathVersArc=function(n,t,i,r,u){var s=Number(u.start).toRad(),f=u.rx||i||r,e=u.ry||f,h=Number(Math.abs(u.start+u.sweep)%360).toRad()-.001,o=u.rDonut||0,l=u.open,a=Math.cos(s),v=Math.sin(s),y=Math.cos(h),p=Math.sin(h),w=h-s<Math.PI?0:1,c=o*(e/f);return["M",n+f*a,t+e*v,"A",f,e,0,w,1,n+f*y,t+e*p,l?"M":"L",n+o*y,t+c*p,"A",o,c,0,w,0,n+o*a,t+c*v,l?"":"Z"]};WDPictureSVG.prototype.drawArc=function(n,t,i){var r=this.__tabPathVersArc(Math.round(t.x),Math.round(t.y),t.width,t.height,t.options);return this.drawPathFactory(n,t,r,i),n};WDPictureSVG.prototype.draw=function(n){this.m_bDessinDirectementDansLaPage||this.PlaceDansLaPage(n);this.removeGradient()};WDPictureSVG.prototype.removeGradient=function(){this._removeGradient(document.getElementsByTagName("linearGradient"));this._removeGradient(document.getElementsByTagName("radialGradient"))};WDPictureSVG.prototype._removeGradient=function(n){for(var t,r=this.m_domDefsSVG[0].attributes.id.value.split("-")[0],i=0;i<n.length;++i)t=n[i],t.attributes.id.value.indexOf(r)!=0||document.getElementById(t.attributes.id.value.substr(this.m_Id.length+1+t.tagName.length+5))||this.m_domDefsSVG[0].removeChild(t)};WDPictureSVG.prototype.clipRect=function(n,t,i){var r=this.tag(this.m_domDefsSVG,t,"clipPath"),u=this.rect(r,t+"-rect");return this.drawRect(u,n,undefined,undefined,undefined,i===undefined?!1:i),this.m_tabClipActif.push(r),u};WDPictureSVG.prototype.restoreClip=function(){this.m_tabClipActif.pop()};WDChartView.prototype.constructor=WDChartView;WDChartView.ms_nDessinImpossible=-1;WDChartView.ms_nDessinParDefaut=0;WDChartView.ms_nDessin1erAffichage=1;WDChartView.ms_nDessinModifTypeGraphe=2;WDChartView.ms_nDessinAnimation=4;WDChartView.ms_nDessinNouvellesDonnees=5;WDChartView.DELAI_1ERAFFICHAGE=400;WDChartView.prototype.updateModeleReference=function(n,t){this.m_oModelePrecedent=this._updateModele(n);t&&!this.m_oModeleInitialSeries&&(this.m_oModeleInitialSeries=this._updateModele(n))};WDChartView.prototype._updateModele=function(n,t){for(var r,f,u,t={m_tabSeries:[]},i=0;i<n.m_oModele.m_tabSeries.length;++i){for(r=n.m_oModele.m_tabSeries[i],t.m_tabSeries[i]={m_tabValeur:[]},f=1;f<r.m_nOffset;++f)t.m_tabSeries[i].m_tabValeur.push(0);t.m_tabSeries[i].m_tabValeur=t.m_tabSeries[i].m_tabValeur.concat([].concat(r.m_tabValeur));u=n.m_oModele.getAxisByType(r.isOnSecondaryAxis()?EAxisType.Y2:EAxisType.Y);u&&(t.m_tabSeries[i].m_oAxis={m_dMinValue:u.m_dMinValue,m_dMaxValue:u.m_dMaxValue})}return t};WDChartView.prototype.toggleSerieMasquee=function(n){return this.m_tabSeriesMasquees[n]=!this.bEstSerieMasquee(n),this.m_tabSeriesMasquees[n]};WDChartView.prototype.bEstSerieMasquee=function(n){return this.m_tabSeriesMasquees[n]===undefined||this.m_tabSeriesMasquees[n]===!1?!1:!0};WDChartView.prototype.RecreerRenderer=function(n,t){var i=WDChartView.ms_nDessinImpossible;if(this.m_bInteractif&&WDPictureSVG.bDessinPossible()){i=WDChartView.ms_nDessinParDefaut;this.m_oPicture===undefined?(this.m_oPicture=new WDPictureSVG(n),this.m_oPicture.Init(n),i=WDChartView.ms_nDessin1erAffichage):this.m_oRenderer&&n.m_oModele.bDonneesDejaDessinnees()?i=this.nGetTypeAffichage(n,this.m_oRenderer):(this.m_oRenderer||this.m_oPicture.Raz(),i=WDChartView.ms_nDessinNouvellesDonnees);i=t&&i===WDChartView.ms_nDessinParDefaut?t:i;switch(n.m_oModele.m_oParametres.getType()){case WDChartParameters.kHistoHorizontal:case WDChartParameters.kHistoEmpileHorizontal:n.m_oModele.m_oParametres.m_bAxeXHorizontal=!1;case WDChartParameters.kHisto:case WDChartParameters.kHistoEmpile:WDBarChartRenderer.bParametresSupportes(this.m_oPicture,n.m_oModele)?this.m_oRenderer&&this.m_oRenderer.constructor==WDBarChartRenderer.prototype.constructor?(this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer.RecreerRenderer(this.m_oPicture,i)):(this.m_oPicture.Raz(),i=WDChartView.ms_nDessin1erAffichage,this.m_oRenderer&&this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer=new WDBarChartRenderer(n),this.m_oAnimator=new WDXYChartAnimator(n)):this.m_oRenderer=undefined;break;case WDChartParameters.kWaterfall:WDWaterfallChartRenderer.bParametresSupportes(this.m_oPicture,n.m_oModele)?this.m_oRenderer&&this.m_oRenderer.constructor==WDWaterfallChartRenderer.prototype.constructor?(this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer.RecreerRenderer(this.m_oPicture,i)):(this.m_oPicture.Raz(),i=WDChartView.ms_nDessin1erAffichage,this.m_oRenderer&&this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer=new WDWaterfallChartRenderer(n),this.m_oAnimator=new WDXYChartAnimator(n)):this.m_oRenderer=undefined;break;case WDChartParameters.kSecteur:case WDChartParameters.kDonut:case WDChartParameters.kHemicycle:WDPieChartRenderer.bParametresSupportes(this.m_oPicture,n.m_oModele)?this.m_oRenderer&&this.m_oRenderer.constructor==WDPieChartRenderer.prototype.constructor?(this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer.RecreerRenderer(this.m_oPicture,i)):(this.m_oPicture.Raz(),i=WDChartView.ms_nDessin1erAffichage,this.m_oRenderer&&this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer=new WDPieChartRenderer(n),this.m_oAnimator=new WDPieChartAnimator(n)):this.m_oRenderer=undefined;break;case WDChartParameters.kCourbe:case WDChartParameters.kAire:WDLineChartRenderer.bParametresSupportes(this.m_oPicture,n.m_oModele)?this.m_oRenderer&&this.m_oRenderer.constructor==WDLineChartRenderer.prototype.constructor?(this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer.RecreerRenderer(this.m_oPicture,i)):(this.m_oPicture.Raz(),i=WDChartView.ms_nDessin1erAffichage,this.m_oRenderer&&this.m_oRenderer.TermRenderer(this.m_oPicture,i),this.m_oRenderer=new WDLineChartRenderer(n),this.m_oAnimator=new WDXYChartAnimator(n)):this.m_oRenderer=undefined;break;default:this.m_oRenderer=undefined}}return this.m_oRenderer!==undefined?(this.m_oPicture.m_domBaliseSVG.attr("id",this.m_sIdHoteImageOrig),$(n.m_oHoteImage).attr("name",this.m_sIdHoteImageOrig).attr("id",""),n.m_oHote=this.m_oPicture.m_domBaliseSVG.parent()[0]):(this.m_oPicture&&this.m_oPicture.m_domBaliseSVG&&this.m_oPicture.m_domBaliseSVG.attr("id",""),$(n.m_oHoteImage).attr("id",this.m_sIdHoteImageOrig),n.m_oHote=n.m_oHoteImage),i};WDChartView.prototype.bEstInteractif=function(){return this.m_bInteractif&&this.m_oRenderer!==undefined};WDChartView.prototype.Redessine=function(n,t){var i=$(n.m_oHoteImage),r;if(this.m_oRenderer===undefined)this.m_oPicture&&this.m_oPicture.m_domBaliseSVG&&this.m_oPicture.m_domBaliseSVG.css("display","none"),i.css("display","block"),r=i.attr("src")||"",(r==""||r.indexOf("vide.gif")==r.length-8)&&i.attr("data-src")!==undefined&&(i.attr("src",i.attr("data-src")),i.attr("data-src",undefined));else{i.css("display","none");this.m_oPicture&&this.m_oPicture.m_domBaliseSVG&&this.m_oPicture.m_domBaliseSVG.css("display","block");this.onDraw(n,t)}};WDChartView.prototype.Init=function(n,t){if(function(n){function e(){r&&(i(e),n.fx.tick())}for(var r,t=0,u=["webkit","moz"],i=window.requestAnimationFrame,f=window.cancelAnimationFrame;t<u.length&&!i;t++)i=window[u[t]+"RequestAnimationFrame"],f=f||window[u[t]+"CancelAnimationFrame"]||window[u[t]+"CancelRequestAnimationFrame"];i?(window.requestAnimationFrame=i,window.cancelAnimationFrame=f,n.fx.timer=function(t){t()&&n.timers.push(t)&&!r&&(r=!0,e())},n.fx.stop=function(){r=!1}):(window.requestAnimationFrame=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),u=window.setTimeout(function(){n(i+r)},r);return t=i+r,u},window.cancelAnimationFrame=function(n){clearTimeout(n)})}(jQuery),this.m_sIdHoteImageOrig=$(n.m_oHoteImage).attr("id"),n.m_oBarre!==undefined&&t&&$(n.m_oBarre).css("opacity",0),this.m_bInteractif=t,this.m_bInteractif){if(n.relanceInitialisation(),this.m_oPicture!==undefined&&this.m_oPicture.m_domBaliseSVG){clWDUtil.AttacheDetacheEvent(!0,this.m_oPicture.m_domBaliseSVG[0],"mouseover",n.m_fRafBarreTrue);clWDUtil.AttacheDetacheEvent(!0,this.m_oPicture.m_domBaliseSVG[0],"mouseout",n.m_fRafBarreFalse);clWDUtil.AttacheDetacheEvent(!0,this.m_oPicture.m_domBaliseSVG[0],"mousemove",n.m_fRafBarreTrueMMove);var i=$(n.m_oHoteImage),r=i.prop("attributes");$(r).each(function(){var t=this.name.toLowerCase();t.substr(0,2)=="on"&&t!="onload"&&n.m_oVue.m_oPicture.m_domBaliseSVG.attr(this.name,(this.value||"").replace("event","arguments[0]"))});n.m_oHoteImage.onload&&n.m_oHoteImage.onload()}}else this.Redessine(n);n.m_oBarre!==undefined&&t&&$(n.m_oBarre).find("[data-src]").each(function(){$(this).attr("src",$(this).attr("data-src")).bind("load",function(){$(this).removeAttr("data-src");var n=$(this).closest("table");n.find("[data-src]").length===0&&n.css("opacity",1)})})};WDChartView.prototype.nGetTypeAffichage=function(n,t){var r=n.m_oParametres,u=t.m_params,i=WDChartView.ms_nDessinParDefaut;return r.m_eType!=u.m_eType&&(i=WDChartView.ms_nDessinModifTypeGraphe),i};WDChartView.prototype.updateDepuisBarreOutils=function(n){var t=n.m_oParametres,i=n.m_tabEtat,f=WDChartView.ms_nDessinParDefaut,r,u;return t.m_eType!=i.TYP&&(f=WDChartView.ms_nDessinModifTypeGraphe,t.m_eType=i.TYP),t.m_ePosLegende=i.LEG,r=t.m_bAxeXHorizontal?t.m_oAxeX:t.m_oAxeY,r&&(r.m_bQuadrillage=i.GDV),u=t.m_bAxeXHorizontal?t.m_oAxeY:t.m_oAxeX,u&&(u.m_bQuadrillage=i.GDH),t.m_bSpline=i.SMO,t.m_bDegrade=i.GRA,t.m_bDegrade&&(t.m_bDegradeHorizontal=t.m_eType!=WDChartParameters.kAire),t.m_bInterdit3D=!i.RAI,t.m_bInterdit3D||(t.m_nProfondeur=10,t.m_nPourcentageBiseau=10),t.m_bAntiAliasing=i.ANT,t.m_bInterditAlpha=!i.TRA,t.m_byAlpha=t.m_bInterditAlpha?255:127,t.m_nDureeAnimation=i.ANI?600:0,t.m_bInteractif=i.INT==0?!1:!0,t.m_bMireMultiple=i.MIR==0,t.m_bMire=t.m_bMireMultiple||i.MIR==1,t.m_bBulleActive=!0,f};WDChartView.prototype.OnSave=function(n){document.location=this.m_oRenderer&&this.m_oPicture?n.sGetRequete(!0):n.sGetRequete(!0)};WDChartView.prototype.OnPrint=function(n){var t,i,u,r;if(this.m_oRenderer&&this.m_oPicture)t=this.m_oPicture.getId(this.m_oPicture.m_domBaliseSVG),i=$('<style class="wbGrfprint">#'+t+" { display:none;position:absolute;left:-9999px; }@media print {form{ display:none; }#"+t+" { display:block;position:static; }}<\/style>"),$("head").append(i),u=this.m_oPicture.m_domBaliseSVG.parent(),r=this.m_oPicture.m_domBaliseSVG.detach(),$("body").append(r),window.print(),r.appendTo(u),i.remove();else{var f=(n.m_oHoteImage.offsetHeight||n.m_oHoteImage.clientHeight)+30,e=(n.m_oHoteImage.offsetWidth||n.m_oHoteImage.clientWidth)+30,o=window.open(n.sGetRequete(!1),"WDG_"+(new Date).getTime(),"resizable=yes,height="+f+",width="+e);o.print()}};WDChartView.prototype.ExecuteCommande=function(n){if($(n.m_oHoteImage).removeAttr("src").attr("src",n.sGetRequete(!1)),this.m_bInteractif){var t=this.updateDepuisBarreOutils(n);n.relanceInitialisation(t)}};WDChartView.prototype.OnOption=function(n){this.ExecuteCommande(n)};WDChartView.prototype.onDraw=function(n,t){this.m_oRenderer.Init(n,this.m_oPicture);this.m_oPicture.m_domBaliseSVG.data("wbGrfModeAffichage",t);switch(t){case WDChartView.ms_nDessin1erAffichage:var i=this;setTimeout(function(){i.m_oAnimator.play1erAffichage(n,i.m_oPicture)},this.m_oPicture.m_domBaliseSVG.data("wbGrfNbDessins")>0?WDChartView.DELAI_1ERAFFICHAGE:1);break;case WDChartView.ms_nDessinModifTypeGraphe:this.m_oAnimator.playModifTypeGraphe(n,this.m_oPicture);break;default:case WDChartView.ms_nDessinParDefaut:this.m_oRenderer.draw(this.m_oPicture,this.m_oAnimator);break;case WDChartView.ms_nDessinNouvellesDonnees:this.m_oAnimator.playMajDonnees(n,this.m_oPicture);break;case WDChartView.ms_nDessinAnimation:this.m_oRenderer.drawAnimation(this.m_oPicture,this.m_oAnimator)}n.m_oModele.SetDonneesDessinnees();n.m_oModele.SetParametresDejaDessinnes();this.m_oPicture.m_domBaliseSVG.removeData("wbGrfModeAffichage")};WDMathUtils.roundToMultiple=function(n,t){return t*Math.round(n/t)};WDChartUtils.is_in_triangle=function(n,t,i,r,u,f,e,o){var s=[e-i,o-r],h=[u-i,f-r],c=[n-i,t-r],a=s[0]*s[0]+s[1]*s[1],l=s[0]*h[0]+s[1]*h[1],v=s[0]*c[0]+s[1]*c[1],y=h[0]*h[0]+h[1]*h[1],p=h[0]*c[0]+h[1]*c[1],w=1/(a*y-l*l),b=(y*v-l*p)*w,k=(a*p-l*v)*w;return b>=0&&k>=0&&b+k<1};WDChartUtils.formatValue=function(n,t,i,r){var u,f,e,o;if(r===undefined){for(u=t.length-1;u>=0&&isNaN(parseInt10(t[u]));)--u;++u;u<t.length&&(r=t.substr(u),t=t.substr(0,u))}if((t||"")==""&&(r||"")=="")return n;f=n||0;!0!==i&&(f=parseInt10(f));try{e=_WW_SEPDECIMAL_;_WW_SEPDECIMAL_=".";o=__reinitNombre(String(f),t.replace(".",sSepDecimalMasque),r!==undefined,r)}catch(s){}finally{_WW_SEPDECIMAL_=e}return o};WDChartUtils.getCouleurAutoFromIndex=function(n){var t=0;switch(n%11){case 0:t="#ffd440";break;case 1:t="#d79df8";break;case 2:t="#65c3e6";break;case 3:t="#b0e433";break;case 4:t="#ffbf69";break;case 5:t="#b2a3ff";break;case 6:t="#5ed7cb";break;case 7:t="#d8eb2b";break;case 8:t="#ff9dc7";break;case 9:t="#67afe8";break;case 10:t="#88e371"}return t};WDRect.prototype.constructor=WDRect;WDRect.prototype.set=function(n,t,i,r){if(t===undefined&&n!==undefined&&n.m_nLeft!==undefined){this.set(n.m_nLeft,n.m_nTop,n.m_nRight,n.m_nBottom);return}this.setLeft(n);this.setTop(t);this.setRight(i);this.setBottom(r)};WDRect.prototype.offset=function(n,t){this.setLeft(this.m_nLeft+n);this.setTop(this.m_nTop+t);this.setRight(this.m_nRight+n);this.setBottom(this.m_nBottom+t)};WDRect.prototype.setSize=function(n,t){this.setRight(this.m_nLeft+n);this.setBottom(this.m_nTop+t)};WDRect.prototype.setSizeAndLocation=function(n,t,i,r){this.setSize(i,r);this.setLocation(n,t,!0)};WDRect.prototype.setLocation=function(n,t,i){!i||(this.setRight(this.m_nRight+(n-this.m_nLeft)),this.setBottom(this.m_nBottom+(t-this.m_nTop)));this.setLeft(n);this.setTop(t)};WDRect.prototype.getLeft=function(){return this.m_nLeft};WDRect.prototype.getTop=function(){return this.m_nTop};WDRect.prototype.getRight=function(){return this.m_nRight};WDRect.prototype.getBottom=function(){return this.m_nBottom};WDRect.prototype.setTop=function(n){this.m_nTop=this.__toN(n)};WDRect.prototype.setRight=function(n){this.m_nRight=this.__toN(n)};WDRect.prototype.setBottom=function(n){this.m_nBottom=this.__toN(n)};WDRect.prototype.setLeft=function(n){this.m_nLeft=this.__toN(n)};WDRect.prototype.__toN=function(n){return Math.max(0,n||0)};WDRect.getWidth=WDRect.prototype.getWidth=function(n){return n||(n=this),n.m_nRight-n.m_nLeft};WDRect.getHeight=WDRect.prototype.getHeight=function(n){return n||(n=this),n.m_nBottom-n.m_nTop};WDRect.intersects=function(n,t){return n.m_nLeft<t.m_nRight&&t.m_nLeft<n.m_nRight&&n.m_nTop<t.m_nBottom&&t.m_nTop<n.m_nBottom};WDRect.getCenterX=function(n){return n.m_nLeft+n.m_nRight>>1};WDRect.getCenterY=function(n){return n.m_nTop+n.m_nBottom>>1};WDChartParameters.__sCreeClasseDepuisPolice=function(n,t,i){var u="wbGrf"+n.m_sAliasChamp+"-police-"+i,r;return $("style."+u).remove(),r="",t.m_bBarre||t.m_bSouligne?(t.m_bBarre&&(r+=" line-through"),t.m_bSouligne&&(r+=" underline")):r="none",$("head").append($('<style class="'+u+'">.'+u+" { font-family:"+t.m_sNom+";font-weight:"+t.m_nGras+";font-style:"+(t.m_bItalique?"italic":"normal")+";text-decoration:"+r+";font-size:"+t.m_sTaille+";color:"+t.m_sCouleur+";}<\/style>")),u};WDChartParameters.prototype=new JSONPOO;WDChartParameters.prototype.constructor=WDChartParameters;WDChartParameters.prototype.isDisplayValuesLabel=function(){return!!this.m_bAfficheValeur};WDChartParameters.prototype.isDisplayCategoriesLabel=function(){return!!this.m_bAfficheLibelle};WDChartParameters.prototype.isDisplayPercentage=function(){return!!this.m_bAffichePourcentage};WDChartParameters.prototype.isBorderColorAuto=function(){return!!this.m_bCouleurBordureAuto};WDChartParameters.prototype.getGradientType=function(){return this.m_bDegrade?this.m_bDegradeHorizontal?this.m_bAxeXHorizontal?IWDChartConstant.FLAG_HORIZONTAL_GRADIENT:IWDChartConstant.FLAG_VERTICAL_GRADIENT:this.m_bAxeXHorizontal?IWDChartConstant.FLAG_VERTICAL_GRADIENT:IWDChartConstant.FLAG_HORIZONTAL_GRADIENT:IWDChartConstant.FLAG_NO_GRADIENT};WDChartParameters.prototype.getDonutHoleSize=function(){return this.m_nPourcentageTrou||0};WDChartParameters.prototype.getType=function(){return this.m_eType};WDChartParameters.prototype.getTitlePosition=function(){if(this.m_ePosTitre==WDChartParameters.kSans)return IWDChartConstant.FLAG_TITLE_POSITION_NONE;if(this.m_oPositionnementManuel!=undefined)return IWDChartConstant.FLAG_TITLE_POSITION_MANUAL;switch(this.m_ePosTitre){case WDChartParameters.kDroite:case WDChartParameters.kGauche:case WDChartParameters.kSans:return IWDChartConstant.FLAG_TITLE_POSITION_NONE;case WDChartParameters.kHaut:return IWDChartConstant.FLAG_TITLE_POSITION_TOP;case WDChartParameters.kBas:return IWDChartConstant.FLAG_TITLE_POSITION_BOTTOM}};WDChartParameters.prototype.getLegendPosition=function(){if(this.m_ePosLegende==WDChartParameters.kSans)return IWDChartConstant.FLAG_LEGEND_POSITION_NONE;if(this.m_oPositionnementManuel!=undefined)return IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL;switch(this.m_ePosLegende){case WDChartParameters.kDroite:return IWDChartConstant.FLAG_LEGEND_POSITION_RIGHT;case WDChartParameters.kGauche:return IWDChartConstant.FLAG_LEGEND_POSITION_LEFT;case WDChartParameters.kSans:return IWDChartConstant.FLAG_LEGEND_POSITION_NONE;case WDChartParameters.kHaut:return IWDChartConstant.FLAG_LEGEND_POSITION_TOP;case WDChartParameters.kBas:return IWDChartConstant.FLAG_LEGEND_POSITION_BOTTOM}};WDChartParameters.prototype.isLegendLabelInRow=function(){return this.m_ePosLegende==WDChartParameters.kHaut};WDChartParameters.prototype.isLegendAdaptSizeToContent=function(){return this.getLegendPosition()!==IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL?!1:this.m_oPositionnementManuel.m_oLegende.m_nBottom==undefined?!0:!1};WDChartParameters.prototype.byGetAlpha=function(){return this.m_bInterditAlpha?255:this.m_byAlpha||255};WDChartParameters.prototype.indiceWLangageToFmk=function(n){return n>=1?n-1:n};WDChartParameters.prototype.getXAxisMin=function(){return this.m_oAxeX.m_bOrigineMin?this.indiceWLangageToFmk(this.m_oAxeX.m_dOrigineMin):IWDChartConstant.DEFAULT_VALUE};WDChartParameters.prototype.getXAxisMax=function(){return this.m_oAxeX.m_bOrigineMax?this.indiceWLangageToFmk(this.m_oAxeX.m_dOrigineMax):IWDChartConstant.DEFAULT_VALUE};WDChartParameters.prototype.getYAxisMin=function(){return this.m_oAxeY.m_bOrigineMin?this.m_oAxeY.m_dOrigineMin:IWDChartConstant.DEFAULT_VALUE};WDChartParameters.prototype.getYAxisMax=function(){return this.m_oAxeY.m_bOrigineMax?this.m_oAxeY.m_dOrigineMax:IWDChartConstant.DEFAULT_VALUE};WDChartParameters.prototype.getY2AxisMin=function(){return this.m_oAxeYSecondaire.m_bOrigineMin?this.m_oAxeYSecondaire.m_dOrigineMin:IWDChartConstant.DEFAULT_VALUE};WDChartParameters.prototype.getY2AxisMax=function(){return this.m_oAxeYSecondaire.m_bOrigineMax?this.m_oAxeYSecondaire.m_dOrigineMax:IWDChartConstant.DEFAULT_VALUE};WDChartParameters.prototype.getAxisTitle=function(n){switch(n.m_type){default:case EAxisType.X:return this.m_sTitreAxeX;case EAxisType.X2:return"";case EAxisType.Y:return this.m_sTitreAxeY;case EAxisType.Y2:return this.m_sTitreAxeY2}};WDChartParameters.prototype.getAxisLabelOrientation=function(n){var t;switch(n.m_type){default:case EAxisType.X:case EAxisType.X2:t=this.m_oAxeX.m_eOrientationGraduations;break;case EAxisType.Y:case EAxisType.Y2:t=this.m_oAxeY.m_eOrientationGraduations}return(t<WDChartParameters.eOrientationDefaut||t>WDChartParameters.eOrientationVerticale)&&(t=WDChartParameters.eOrientationDefaut),t};WDChartParameters.prototype.getAxisStep=function(n){var t;switch(n.m_type){case EAxisType.X:case EAxisType.X2:t=this.m_oAxeX.m_dPas;break;case EAxisType.Y:case EAxisType.Y2:t=this.m_oAxeY.m_dPas;break;default:t=0}return t<=0&&(t=IWDChartConstant.DEFAULT_VALUE),t};WDChartParameters.prototype.isAxisVisible=function(n){switch(n.m_type){case EAxisType.X:case EAxisType.X2:return this.m_oAxeX.m_bVisible;case EAxisType.Y:case EAxisType.Y2:return this.m_oAxeY.m_bVisible}return!1};WDChartParameters.prototype.isVerticalGridShown=function(){var n=this.m_bAxeXHorizontal?this.m_oAxeX:this.m_oAxeY;return n.m_bQuadrillage};WDChartParameters.prototype.isHorizontalGridShown=function(){var n=this.m_bAxeXHorizontal?this.m_oAxeY:this.m_oAxeX;return n.m_bQuadrillage};WDChartParameters.prototype.isStackedBarChart=function(){return this.getType()==WDChartParameters.kHistoEmpile||this.getType()==WDChartParameters.kHistoEmpileHorizontal};WDChartParameters.kSecteur=0;WDChartParameters.kHisto=1;WDChartParameters.kCourbe=2;WDChartParameters.kHistoEmpile=9;WDChartParameters.kDonut=23;WDChartParameters.kAire=24;WDChartParameters.kHemicycle=26;WDChartParameters.kHistoHorizontal=27;WDChartParameters.kHistoEmpileHorizontal=28;WDChartParameters.kWaterfall=35;WDChartParameters.kSans=0;WDChartParameters.kDroite=1;WDChartParameters.kGauche=2;WDChartParameters.kHaut=3;WDChartParameters.kBas=4;WDChartParameters.eOrientationDefaut=0;WDChartParameters.eOrientationHorizontale=1;WDChartParameters.eOrientationVerticale=2;WDChartParameters.sMasqueDateHeure="AAAAMMJJHHmmSSCCC";WDChartParameters.sMasqueDate="JJ/MM/AAAA";WDChartCategories.bEstTypeHeure=function(n){return n==25||n==129};WDChartCategories.bEstTypeDate=function(n){return n==24||n==128};WDChartCategories.tabConvertionVersValeursTemporels=function(n,t){for(var r,u=[],f=0;f<t.length;++f){var i=t[f],e=1,o=1,s=1970,h=0,c=0,l=0,a=n.indexOf("JJ"),v=n.indexOf("MM"),y=n.indexOf("AAAAA"),p=n.indexOf("HH"),w=n.indexOf("mm"),b=n.indexOf("ss");a>-1&&(e=i.substr(a,2));v>-1&&(o=i.substr(v,2));y>-1&&(s=i.substr(y,4));p>-1&&(h=i.substr(p,2));w>-1&&(c=i.substr(w,2));b>-1&&(l=i.substr(b,2));r=new Date;r.setFullYear(s,o,e);r.setHours(h,c,l,0);u.push(r)}return u};WDChartCategories.prototype=new JSONPOO;WDChartCategories.prototype.constructor=WDChartCategories;WDChartCategories.prototype.bEchelleTemporelle=function(){return this.m_oModele.m_oParametres.m_bEchelleTemporelle&&(WDChartCategories.bEstTypeDate(this.m_eTypeWL)||WDChartCategories.bEstTypeHeure(this.m_eTypeWL))};WDChartCategories.prototype.isOnSecondaryAxis=function(){return!1};WDChartCategories.prototype.getMinValue=function(){return 0};WDChartCategories.prototype.getMaxValue=function(){return this.m_oModele.getMaxNbValuesSeries()-1};WDChartCategories.prototype.getNbValues=function(){return this.m_tabValeur?this.m_tabValeur.length:0};WDChartCategories.prototype.getValueAt=function(n){return this.m_tabValeur.length==0?"":n<this.m_nOffset-1?"":this.m_tabValeur[n-(this.m_nOffset-1)]};WDChartCategories.prototype.getTimeInMillisAt=function(n){return!this.m_tabValeurMS||this.m_tabValeurMS.length<n?0:this.m_tabValeurMS[n].getTime()};WDChartCategories.prototype.getMinValueInMillis=function(){var n,t,i;if(!this.m_tabValeurMS||this.m_tabValeurMS.length==0)return 0;for(n=Number.POSITIVE_INFINITY,t=0;t<this.m_tabValeurMS.length;++t)i=this.m_tabValeurMS[t].getTime(),i<n&&(n=i);return n};WDChartCategories.prototype.getMaxValueInMillis=function(){var n,t,i;if(!this.m_tabValeurMS||this.m_tabValeurMS.length==0)return 0;for(n=Number.NEGATIVE_INFINITY,t=0;t<this.m_tabValeurMS.length;++t)i=this.m_tabValeurMS[t].getTime(),i>n&&(n=i);return n};WDChartCategories.prototype.isContainDecimalValues=function(){return!1};WDChartSeries.prototype=new JSONPOO;WDChartSeries.prototype.constructor=WDChartSeries;WDChartSeries.prototype.isOnSecondaryAxis=function(){return this.m_bAxeSecondaire&&!(this.m_oGraphe.m_oParametres.m_eType==WDChartParameters.kHistoEmpile||this.m_oGraphe.m_oParametres.m_eType==WDChartParameters.kHistoEmpileHorizontal)};WDChartSeries.prototype.getMinValue=function(){return this.getNbValues()>0?this.m_dMinValue:0};WDChartSeries.prototype.getMaxValue=function(){return this.getNbValues()>0?this.m_dMaxValue:0};WDChartSeries.prototype.getNbValues=function(){return this.m_tabValeur?this.m_tabValeur.length:0};WDChartSeries.prototype.getValueAt=function(n){var t=this.getValueAtWithNull(n);return t==IWDChartConstant.NULL_VALUE&&(t=0),t};WDChartSeries.prototype.getValueAtWithNull=function(n){return this.m_tabValeur.length==0?0:n<this.m_nOffset-1?0:this.m_tabValeur[n-(this.m_nOffset-1)]};WDChartSeries.prototype.isContainDecimalValues=function(){return this.m_bContainDecimalValues};WDChartSeries.prototype.onValueAddedOrChanged=function(n){n<this.m_dMinValue&&(this.m_dMinValue=n);n>this.m_dMaxValue&&(this.m_dMaxValue=n);this.m_bContainDecimalValues||(this.m_bContainDecimalValues=n-parseInt10(n)>0)};EPointStyle.NONE=-1;EPointStyle.CIRCLE=0;EPointStyle.DIAMOND=1;EPointStyle.TRIANGLE=2;EPointStyle.SQUARE=3;EPointStyle.CROSS=4;WDChartModel.prototype=new JSONPOO;WDChartModel.prototype.constructor=WDChartModel;WDChartModel.prototype.FLAG_DEJA_DESSINEES=1;WDChartModel.prototype.bDonneesDejaDessinnees=function(){return this.m_oGraphe.m_oDonnees.m_bFlag&&this.m_oGraphe.m_oDonnees.m_bFlag&this.FLAG_DEJA_DESSINEES};WDChartModel.prototype.SetDonneesDessinnees=function(){this.m_oGraphe.m_oDonnees.m_bFlag=(this.m_oGraphe.m_oDonnees.m_bFlag||0)|this.FLAG_DEJA_DESSINEES};WDChartModel.prototype.bParametresDejaDessinnes=function(){return this.m_oGraphe.m_oParametres.m_bFlag&&this.m_oGraphe.m_oParametres.m_bFlag&this.FLAG_DEJA_DESSINEES};WDChartModel.prototype.SetParametresDejaDessinnes=function(){this.m_oGraphe.m_oParametres.m_bFlag=(this.m_oGraphe.m_oParametres.m_bFlag||0)|this.FLAG_DEJA_DESSINEES};WDChartModel.prototype.getSeriesAt=function(n,t){return this.m_tabSeries===undefined||this.m_tabSeries[n]===undefined?t?{}:undefined:this.m_tabSeries[n]};WDChartModel.prototype.getPartOffset=function(n,t){var i;return this.m_tabExcentrage!==undefined&&(n=n-(this.m_nOffsetExcentrage-1),n>=0&&this.m_tabExcentrage!==undefined&&n<this.m_tabExcentrage.length&&(i=this.m_tabExcentrage[n])),(i===undefined?t:i)||0};WDChartModel.prototype.hasPremiereSerieNonVide=function(){return this.m_tabSeries.length>0&&this.m_tabSeries[0].getNbValues()>0};WDChartModel.prototype.hasAuMoinsUneSerieNonVide=function(){for(var n=0;n<this.m_tabSeries.length;++n)if(this.m_tabSeries[n].getNbValues()>0)return!0;return!1};WDChartModel.prototype.getCategoryLabelAt=function(n){var t=this.m_oCategories.getValueAt(n);return t===undefined?"":t};WDChartModel.prototype.getFromSerieValueAt=function(n,t){return this.m_tabSeries[n].getValueAt(t)};WDChartModel.prototype.getCategoryColor=function(n,t){var i=undefined;return this.m_oCategories!==undefined&&this.m_oCategories.m_tabCouleur!==undefined&&(i=this.m_oCategories.m_tabCouleur[n]),t!==!0&&i===undefined&&(i=this.getSeriesColor(n)),i};WDChartModel.prototype.getWaterfallTypeCategorie=function(n){return this.m_oCategories===undefined||this.m_oCategories.m_tabTypeCategorieWaterfall===undefined||this.m_oCategories.m_tabTypeCategorieWaterfall[n]===undefined?undefined:this.m_oCategories.m_tabTypeCategorieWaterfall[n]};WDChartModel.prototype.getSeriesColor=function(n){var i=this.m_tabSeries[n],t;return i&&(t=i.m_sCouleur),t===undefined&&(t=WDChartUtils.getCouleurAutoFromIndex(n+1)),t};WDChartModel.prototype.createAxis=function(){var i,f,r,n,t,u;this.m_lstAxis&&(this.m_lstAxis=null,delete this.m_lstAxis);this.m_lstAxis=[];i=this.m_oParametres.getType();switch(i){default:case WDChartParameters.kCourbe:case WDChartParameters.kAire:case WDChartParameters.kHisto:case WDChartParameters.kHistoEmpile:case WDChartParameters.kHistoEmpileHorizontal:case WDChartParameters.kHistoHorizontal:case WDChartParameters.kWaterfall:if(f=[],f.push(this.m_oCategories),this.m_lstAxis.push(new WDChartAxis(EAxisType.X,f,this)),r=[],n=undefined,this.m_tabSeries)for(t=0;t<this.m_tabSeries.length;++t)(u=this.m_tabSeries[t],this.m_oGraphe.m_oVue.m_oRenderer&&this.m_oGraphe.m_oVue.m_oRenderer.bEstLegendeMasquee(t))||(u.isOnSecondaryAxis()&&i!=WDChartParameters.kHistoEmpile&&i!=WDChartParameters.kHistoEmpileHorizontal?(n||(n=[]),n.push(u)):r.push(u));r!=null&&this.m_lstAxis.push(new WDChartAxis(EAxisType.Y,r,this));n!=null&&this.m_lstAxis.push(new WDChartAxis(EAxisType.Y2,n,this));break;case WDChartParameters.kSecteur:case WDChartParameters.kDonut:case WDChartParameters.kHemicycle:}};WDChartModel.prototype.getCategoryIndexForTime=function(n){for(var u,i=0,r=0,t=0;t<this.m_oCategories.getNbValues();++t){if(u=this.m_oCategories.getTimeInMillisAt(t),u<=n)i=r;else break;r++}return i};WDChartModel.prototype.getMaxNbValuesSeries=function(){var t=0,n,r,i;if(this.m_tabSeries)for(n=0;n<this.m_tabSeries.length;++n)r=this.m_tabSeries[n],i=r.getNbValues(),i>t&&(t=i);return t};WDChartModel.prototype.getAxisByType=function(n){var r,t,i;if(this.m_lstAxis)for(r=this.m_lstAxis.length,t=0;t<r;++t)if(i=this.m_lstAxis[t],i.m_type==n)return i;return undefined};WDPaintCSS.imgNormal=1;WDPaintCSS.imgCentre=2;WDPaintCSS.imgEtire=3;WDPaintCSS.imgRepete=4;WDPaintCSS.imgHomothetique=5;WDPaintCSS.imgHomothetiqueCentre=6;WDPaintCSS.imgHomothetiqueLarge=7;WDPaintCSS.imgHomothetiqueCentreLarge=8;WDPaintCSS.imgAdapte=9;WDPaintCSS.imgAdapteCentre=10;WDPaintCSS.prototype=new JSONPOO;WDPaintCSS.prototype.constructor=WDPaintCSS;WDPaintCSS.prototype.setStyle=function(n){this.m_nStyle=n};WDPaintCSS.prototype.raz=function(){this.m_oStyle={};this.m_sClasse=undefined;this.m_stRadialGradient=undefined;this.m_stLinearGradient=undefined};WDPaintCSS.prototype.setStroke=function(n,t,i){this.m_oStyle.stroke=n;t!==undefined&&(this.m_oStyle["stroke-width"]=t);i!==undefined&&(this.m_oStyle["stroke-opacity"]=i)};WDPaintCSS.prototype.setStrokeOption=function(n,t){this.m_oStyle["stroke-"+n]=t};WDPaintCSS.prototype.setFill=function(n){this.m_oStyle.fill=n};WDPaintCSS.prototype.setFillOpacity255=function(n){this.m_oStyle["fill-opacity"]=n/255};WDPaintCSS.prototype.addClasse=function(n){this.m_sClasse===undefined?this.m_sClasse="":this.m_sClasse+=" ";this.m_sClasse+=n};WDPaintCSS.prototype.setCouleurFond=function(n){this.m_oStyle["background-color"]=n};WDPaintCSS.prototype.setImageFond=function(n,t,i,r){this.m_oStyle["background-image"]="url("+clWDUtil.sGetCheminImage(n)+")";this.m_oStyle["background-repeat"]="no-repeat";switch(t){case WDPaintCSS.imgCentre:this.m_oStyle["background-position"]="center center";break;case WDPaintCSS.imgEtire:this.m_oStyle["background-size"]="100% 100%";break;case WDPaintCSS.imgRepete:this.m_oStyle["background-repeat"]="repeat";break;case WDPaintCSS.imgHomothetique:this.m_oStyle["background-size"]="contain";break;case WDPaintCSS.imgHomothetiqueCentre:this.m_oStyle["background-size"]="contain";this.m_oStyle["background-position"]="center center";break;case WDPaintCSS.imgHomothetiqueLarge:this.m_oStyle["background-size"]="cover";break;case WDPaintCSS.imgHomothetiqueCentreLarge:this.m_oStyle["background-size"]="cover";this.m_oStyle["background-position"]="center center";break;case WDPaintCSS.imgAdapte:case WDPaintCSS.imgAdapteCentre:var u=$("<img>").attr("src",clWDUtil.sGetCheminImage(n));u[0].width>i||u[0].height>r?this.setImageFond(n,t==WDPaintCSS.imgAdapteCentre?WDPaintCSS.imgHomothetiqueCentre:WDPaintCSS.imgHomothetique,i,r):this.setImageFond(n,WDPaintCSS.imgNormal,i,r)}};WDPaintCSS.prototype.css=function(n,t){if(clWDUtil.isObject(n))for(var i in n)this.css(i,n[i]);else this.m_oStyle[n]=t};WDPaintCSS.prototype.css3=function(n,t){var i=this,r=n,u=t;return["-webkit-","-moz-","-ms-",""].forEach(function(n){i.css(n+r,u)}),this};WDPaintCSS.css3=function(n,t,i){n[0]===undefined&&(n=$(n));var r=n,u=t,f=i;return["-webkit-","-moz-","-ms-",""].forEach(function(n){r.css(n+u,f)}),n};WDPaintCSS.__gnGradientUniqueId=0;WDPaintCSS.getGradientUniqueId=function(){return++WDPaintCSS.__gnGradientUniqueId};WDPaintCSS.prototype._ajouteElementGradient=function(n,t,i,r){var s="wb-"+i+"-gradient-"+t.attr("id"),u=n.tag(n.m_domDefsSVG,s,i+"Gradient"),h=u.data("wbGrfGradientData"),f,e,o;if(h&&JSON.stringify(h)==JSON.stringify(r))return this.setGradientExistant(n,t,u),u;u.data("wbGrfGradientData",r);u.empty();r.gradientUnits!==undefined&&n.attrNS(u,null,"gradientUnits",r.gradientUnits);r.spreadMethod!==undefined&&n.attrNS(u,null,"spreadMethod",r.spreadMethod);for(f in r.stop)e=n.tag(u,s+"stop"+u.children().length,"stop"),n.attrNS(e,null,"offset",f+"%"),n.attrNS(e,null,"stop-color",r.stop[f].color),n.attrNS(e,null,"stop-opacity",r.stop[f].opacity);this.setGradientExistant(n,t,u);for(o in r)o!="stop"&&n.attrNS(u,null,o,r[o]);return u};WDPaintCSS.prototype.ecritDegrade=function(n,t){return this.m_stRadialGradient!==undefined?this._ajouteElementGradient(n,t,"radial",this.m_stRadialGradient):this.m_stLinearGradient!==undefined?this._ajouteElementGradient(n,t,"linear",this.m_stLinearGradient):void 0};WDPaintCSS.prototype.applyStyle=function(n,t){var i,r;this.ecritDegrade(n,t);this.m_sClasse!==undefined&&n.addClass(t,this.m_sClasse);i=this;["stroke","stroke-width","fill","fill-opacity","stroke-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit"].forEach(function(n){i.m_oStyle[n]!==undefined&&(t.attr(n,i.m_oStyle[n]),i.m_oStyle[n]=undefined)});t.css(this.m_oStyle);r="background-image";i.m_oStyle[r]!==undefined&&(t.attr("style",t.attr("style")+r+":"+i.m_oStyle[r]+";"),i.m_oStyle[r]=undefined);n.m_tabClipActif.length>0&&t.attr("clip-path","url(#"+n.getId(n.m_tabClipActif[n.m_tabClipActif.length-1])+")");this.raz()};WDPaintCSS.prototype.setGradientExistant=function(n,t,i){if(this.m_oStyle.fill="url(#"+i.attr("id")+")",t){if(t.data("wbGrfGradientId")){var r=n.findFromId(n.m_domDefsSVG,t.data("wbGrfGradientId"));r&&r.length>0&&r.unbind().removeData().remove()}t.data("wbGrfGradientId",i.attr("id"))}};WDPaintCSS.prototype.setRadialGradient=function(n,t,i,r,u,f,e,o){e===undefined&&(e=1);o===undefined&&(o=1);this.m_stRadialGradient={x:n,y:t,r:100*(i/n)+"%",spreadMethod:f,gradientUnits:"userSpaceOnUse",stop:{0:{color:r,opacity:e},100:{color:u,opacity:o}}}};WDPaintCSS.prototype.setLinearGradient=function(n,t,i,r,u,f,e,o,s,h){s===undefined&&(s=1);h===undefined&&(h=1);this.m_stLinearGradient={x1:0,y1:0,x2:o===!0?0:1,y2:o===!0?1:0,spreadMethod:e,stop:{0:{color:u,opacity:s},100:{color:f,opacity:h}}}};WDPaintCSS.nGetLineHeight=function(n){return n<24?n+4:Math.round(n*1.2)};WDPaintCSS.oGetInfoCSS=function(n,t,i,r){var h,f,e,u,o,s;if(r===undefined&&(r=""),h=clWDUtil.isObject(n)?n.m_sClasse:n,WDPaintCSS.oGetInfoCSSDejaAppele?f=$(document.getElementById("wbGrfWDPaintCSS")):(f=$("<span id='wbGrfWDPaintCSS'/>"),$("body").append(f)),f.attr("style","position:fixed;visibility:hidden;white-space:nowrap;"+r).attr("class",h).html(t),e=window.getComputedStyle?window.getComputedStyle(f[0]):f[0].currentStyle,u={},i===!0)u=_clone(e,u);else if(clWDUtil.isObject(i))clWDUtil.bForEachIn(i,function(n){return u[n]=e[n],!0});else if(clWDUtil.isArray(i))for(o=0;o<i.length;++o)u[i[o]]=e[i[o]];else i!==undefined&&(u[i]=e[i]);return(i===!0||u.hasOwnProperty("width")||u.hasOwnProperty("height"))&&(s=f[0].getBoundingClientRect(),u.height=s.height,u.width=s.width),(i===!0||u.hasOwnProperty("lineHeight"))&&u.lineHeight&&u.lineHeight.indexOf("px")==-1&&(u.lineHeight=WDPaintCSS.nGetLineHeight(parseInt10(e.fontSize))),WDPaintCSS.oGetInfoCSSDejaAppele=!0,u};WDChartRenderer.prototype.constructor=WDChartRenderer;WDChartRenderer.prototype.surbrillanceSerieDepuisMire=function(n,t,i){var f=n.findFromId(n.m_domBaliseSVG,"legende-groupe-"+t),r=f.find("text"),u;r.css("font-weight")===undefined&&r.css("font-weight",0);u=new WDSvgAnimation(this.m_oGraphe,n,r,{"font-weight":r.css("font-weight")},{"font-weight":i?900:0});u.duration=1;u.run()};WDChartRenderer.bParametresSupportes=function(n,t){var i=t.m_oParametres;return i.m_bInteractif===!1?!1:parseInt10(i.m_nProfondeur)>0&&!i.m_bInterdit3D&&!n.m_b3DActive?!1:!0};WDChartRenderer.prototype.Init=function(n){this.m_oGraphe=n;this.m_oModele=n.m_oModele;this.m_params=n.m_oModele.m_oParametres;this.m_oPaint=new WDPaintCSS};WDChartRenderer.prototype.bEstLegendeMasquee=function(n){return this.m_oGraphe.m_oVue.bEstSerieMasquee(n)===!0};WDChartRenderer.prototype.drawAnimation=function(n,t){t.bDessinComplet()?(this.m_domBulle&&this.m_domBulle.empty(),t.NotifDessinComplet(),this.m_oGraphe.m_oVue.Redessine(this.m_oGraphe,WDChartView.ms_nDessinParDefaut)):this.drawChart(n,t,this.m_domGroupeSeries)};WDChartRenderer.prototype.draw=function(n,t,i){var u=this.m_oModele.m_oParametres.m_oPositionnementManuel!=undefined?new WDRect(this.m_params.m_oPositionnementManuel.m_oGraphe):new WDRect(IWDChartConstant.MARGIN_BORDER,IWDChartConstant.MARGIN_BORDER,IWDChartConstant.MARGIN_BORDER*2,IWDChartConstant.MARGIN_BORDER*2);var f=this.m_oGraphe.m_oHoteImage.width,e=this.m_oGraphe.m_oHoteImage.height,r=$(this.m_oGraphe.m_oHoteImage);r.data("width")?(f=r.data("width"),e=r.data("height")):(r.data("width",f),r.data("height",e));this.m_rectChart=new WDRect(u.m_nLeft,u.m_nTop,f-u.m_nRight,e-u.m_nBottom);this.m_rectChartInitial=new WDRect(0,0,f,e);((this.m_params.m_sImageFond||"")!==""||(this.m_params.m_sCouleurFond||"")!=="")&&((this.m_params.m_sImageFond||"")!==""&&this.m_oPaint.setImageFond(this.m_params.m_sImageFond,this.m_params.m_eImageFondMode,WDRect.getWidth(this.m_rectChart),WDRect.getHeight(this.m_rectChart)),(this.m_params.m_sCouleurFond||"")!==""&&this.m_oPaint.setCouleurFond(this.m_params.m_sCouleurFond),n.SetImageFond(this.m_oPaint));n.SetAntiAliasing(this.m_params.m_bAntiAliasing);this.m_domGroupeSeries=n.g("series-axis-grids-groupe");this.m_domGroupeLegendeEtTitre=n.g("legende-titre-groupe");this.drawTitle(n,t,this.m_domGroupeLegendeEtTitre);this.drawLegend(n,t,this.m_domGroupeLegendeEtTitre);i!==!1&&this.drawChart(n,t,this.m_domGroupeSeries);this.m_domBulle=n.g("bulle-groupe");this.drawMire(n,t,this.m_domBulle);n.draw(this.m_oGraphe);n.m_domBaliseSVG.data("wbGrfNbDessins",1+(n.m_domBaliseSVG.data("wbGrfNbDessins")||0));t.NotifDessinComplet();this.m_oGraphe.m_oVue.updateModeleReference(this.m_oGraphe,!0)};WDChartRenderer.prototype.liaisonLegendePart=function(n,t,i){var u=WDChartListener.bind(WDPieChartPartListener,this.m_oGraphe,t),r;u&&(r=n.findFromId(n.m_domBaliseSVG,"legende-groupe-"+i),r&&r.length!==0)&&(r.data("wbGrfBind").m_domPart=t,u.m_domLegende=r)};WDChartRenderer.prototype.drawTitle=function(n,t,i){var f,e,r,s;if(this.m_oPaint.raz(),f=this.m_params.getTitlePosition(),e=n.g(i,"title-group"),f===IWDChartConstant.FLAG_TITLE_POSITION_NONE){e.empty();return}if(r=this.m_params.m_sTitre,r!=""){t.tweenGroupeTitre(e);this.m_oPaint.addClasse(this.m_params.m_sClasseTitre);var h=WDPaintCSS.oGetInfoCSS(this.m_oPaint,r,"lineHeight"),u=parseInt10(h.lineHeight),o=n.text(e,"titre");f===IWDChartConstant.FLAG_TITLE_POSITION_MANUAL?(s=this.m_params.m_oPositionnementManuel.m_oTitre,n.drawText(o,r,u,WDRect.getCenterX(s),s.m_nTop,IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE,this.m_oPaint,!1)):f===IWDChartConstant.FLAG_TITLE_POSITION_TOP?(n.drawText(o,r,u,WDRect.getCenterX(this.m_rectChart),this.m_rectChart.m_nTop,IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE,this.m_oPaint,!1),this.m_rectChart.setLocation(this.m_rectChart.m_nLeft,this.m_rectChart.m_nTop+u+IWDChartConstant.MARGIN_TITLE_GRAPH)):(n.drawText(o,r,u,WDRect.getCenterX(this.m_rectChart),this.m_rectChart.m_nBottom-u,IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE,this.m_oPaint,!1),this.m_rectChart.setSize(WDRect.getWidth(this.m_rectChart),WDRect.getHeight(this.m_rectChart)-u-IWDChartConstant.MARGIN_TITLE_GRAPH))}};WDChartRenderer.prototype.ecouteLegende=function(){return undefined};WDChartRenderer.prototype.drawLegend=function(n,t,i){var r,lt,tt,ht,u,a,bt,kt,ut,rt,dt,c,k,at,vt,ci,li,v,ft,yt,gt,ii,ct,yi,pi,ri,ui,fi;this.m_oPaint.raz();var f=this.m_params.getLegendPosition(),y=n.g(i,"legende-groupe"),e=this.getNbLegendLabels(),pt=[f];for(r=0;r<e;++r)pt.push(this.getLegendLabelAt(r));if(y.data("wbGrfCacheDrawLegend")!=pt&&(y.data("wbGrfCacheDrawLegend",pt),lt=y.children().length>0,y.empty(),f!==IWDChartConstant.FLAG_LEGEND_POSITION_NONE)){if(e<=0){y.empty();return}t.tweenGroupeLegende(y);var d=0,p=f===IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL?0:IWDChartConstant.MARGIN_LEGEND_BORDER,et=p*2+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*2,ot=p*2+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*2,st=p*2+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*2,w=p*2+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*2;f!==IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL&&(ot+=IWDChartConstant.MARGIN_BORDER,w+=IWDChartConstant.MARGIN_BORDER);for(var nt=0,ei=[],wt=[],oi=[],r=0,r=0;r<e;++r)tt=this.getLegendLabelAt(r),isNaN(parseInt10(tt))&&!clWDUtil.bEstChaineNonVide(tt)&&(tt="N"+$("<span/>").html("&#176;").text()+(r+1)),oStyle=WDPaintCSS.oGetInfoCSS(this.m_params.m_sClasseLegende,tt,["width","lineHeight","fontSize"],"font-weight:900"),ht=Math.ceil(parseInt10(oStyle.width)),wt[r]=Math.ceil(parseInt10(oStyle.fontSize)),d=Math.max(d,Math.ceil(parseInt10(oStyle.lineHeight))),ht>nt&&(nt=ht),ei[r]=ht,w+=IWDChartConstant.LEGEND_SQUARE_SIZE+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*(r>0?2:1)+ht,et+=d+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*(r>0?1:0),oi[r]=tt;u=!0;a=!1;switch(f){default:case IWDChartConstant.FLAG_LEGEND_POSITION_LEFT:case IWDChartConstant.FLAG_LEGEND_POSITION_RIGHT:u=et>WDRect.getHeight(this.m_rectChart);u&&(a=!0);break;case IWDChartConstant.FLAG_LEGEND_POSITION_TOP:case IWDChartConstant.FLAG_LEGEND_POSITION_BOTTOM:u=w<=WDRect.getWidth(this.m_rectChart);u||(a=!0);break;case IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL:u=this.m_params.isLegendLabelInRow();u&&this.m_params.m_oPositionnementManuel.m_oLegende.m_nLeft+w>this.m_rectChartInitial.m_nRight?a=!0:!u&&this.m_params.m_oPositionnementManuel.m_oLegende.m_nTop+et>this.m_rectChartInitial.m_nBottom&&(a=!0)}if(a){var it=WDRect.getHeight(this.m_rectChartInitial),g=WDRect.getWidth(this.m_rectChartInitial),wi=f;switch(f){default:case IWDChartConstant.FLAG_LEGEND_POSITION_LEFT:case IWDChartConstant.FLAG_LEGEND_POSITION_RIGHT:g=g/2;break;case IWDChartConstant.FLAG_LEGEND_POSITION_TOP:case IWDChartConstant.FLAG_LEGEND_POSITION_BOTTOM:it=it/3;break;case IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL:f=this.m_params.isLegendLabelInRow()?IWDChartConstant.FLAG_LEGEND_POSITION_TOP:IWDChartConstant.FLAG_LEGEND_POSITION_LEFT;c=this.m_params.m_oPositionnementManuel.m_oLegende;this.m_params.isLegendAdaptSizeToContent()?(g-=c.m_nLeft,it-=c.m_nTop):(g=WDRect.getWidth(c),it=WDRect.getHeight(c))}bt=IWDChartConstant.MARGIN_LEGEND_ELEMENTS+d;kt=IWDChartConstant.LEGEND_SQUARE_SIZE+nt+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*2;switch(f){default:case IWDChartConstant.FLAG_LEGEND_POSITION_LEFT:case IWDChartConstant.FLAG_LEGEND_POSITION_RIGHT:rt=parseInt10(it/bt);ut=parseInt(e/rt)+(e%rt>0?1:0);break;case IWDChartConstant.FLAG_LEGEND_POSITION_TOP:case IWDChartConstant.FLAG_LEGEND_POSITION_BOTTOM:ut=parseInt10(g/kt);rt=parseInt(e/ut)+(e%ut>0?1:0);break;case IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL:}w=Math.min(g,ot+ut*kt-IWDChartConstant.MARGIN_LEGEND_ELEMENTS);switch(f){default:case IWDChartConstant.FLAG_LEGEND_POSITION_LEFT:case IWDChartConstant.FLAG_LEGEND_POSITION_RIGHT:g>w&&(dt=parseInt10(e/ut),rt=parseInt10(e/dt)+(e%dt>0?1:0));break;case IWDChartConstant.FLAG_LEGEND_POSITION_TOP:case IWDChartConstant.FLAG_LEGEND_POSITION_BOTTOM:break;case IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL:}st=Math.min(it,st+rt*bt-IWDChartConstant.MARGIN_LEGEND_ELEMENTS);u=!0;f=wi}else ot+=IWDChartConstant.LEGEND_SQUARE_SIZE+IWDChartConstant.MARGIN_LEGEND_ELEMENTS+nt,st+=d;var o=0,l=0,s=0,h=0;if(f===IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL)c=this.m_params.m_oPositionnementManuel.m_oLegende,o=c.m_nLeft,l=c.m_nTop,this.m_params.isLegendAdaptSizeToContent()?(s=u?w:ot,h=u?st:et):(s=WDRect.getWidth(c),h=WDRect.getHeight(c));else{s=u?w:ot;h=u?st:et;switch(f){case IWDChartConstant.FLAG_LEGEND_POSITION_LEFT:o=this.m_rectChart.m_nLeft;l=this.m_rectChart.m_nTop+Math.max(0,(WDRect.getHeight(this.m_rectChart)-h)/2);this.m_rectChart.setLocation(o+s,this.m_rectChart.m_nTop,!1);break;case IWDChartConstant.FLAG_LEGEND_POSITION_RIGHT:o=this.m_rectChart.m_nRight-s;l=this.m_rectChart.m_nTop+Math.max(0,(WDRect.getHeight(this.m_rectChart)-h)/2);this.m_rectChart.setSize(WDRect.getWidth(this.m_rectChart)-s,WDRect.getHeight(this.m_rectChart));break;case IWDChartConstant.FLAG_LEGEND_POSITION_TOP:o=this.m_rectChart.m_nLeft+Math.max(0,(WDRect.getWidth(this.m_rectChart)-s)/2);l=this.m_rectChart.m_nTop;this.m_rectChart.setLocation(this.m_rectChart.m_nLeft,l+h,!1);break;case IWDChartConstant.FLAG_LEGEND_POSITION_BOTTOM:o=this.m_rectChart.m_nLeft+Math.max(0,(WDRect.getWidth(this.m_rectChart)-s)/2);l=this.m_rectChart.m_nBottom-h;this.m_rectChart.setSize(WDRect.getWidth(this.m_rectChart),WDRect.getHeight(this.m_rectChart)-h)}}o+=p;l+=p;s-=2*p;h-=2*p;f!==IWDChartConstant.FLAG_LEGEND_POSITION_MANUAL&&(s-=IWDChartConstant.MARGIN_BORDER);var si=this.m_params.m_sCouleurLegende,hi=this.m_params.m_sCouleurLegendeFond,b=new WDRect(o,l,o+s,l+h);for(hi!==undefined&&this.m_oPaint.setFill(hi),k=0,si!==undefined&&(k=1,this.m_oPaint.setStroke(si,k)),at=undefined,!this.m_params.m_bLegendeBordArrondi||(at=10),vt=new WDRect,vt.setLocation(Math.min(b.m_nLeft,b.m_nRight)-k,Math.min(b.m_nTop,b.m_nBottom)-k),vt.setSize(b.getWidth()+2*k,b.getHeight()+2*k),n.clipRect(vt,"clip-legende"),ci=n.path(y,"legende-fond"),li=this.__oPathBulle(b,k,at,at),n.drawPath(ci,li,this.m_oPaint,this.m_params.m_nDureeAnimation===0||lt?!1:WDSvgAnimationLegende),v=o+IWDChartConstant.MARGIN_LEGEND_ELEMENTS,ft=l+IWDChartConstant.MARGIN_LEGEND_ELEMENTS,r=0;r<e;++r){yt=this.getLegendColorAt(r);gt=this.m_params.byGetAlpha();gt<255?this.m_oPaint.setFillOpacity255(gt):this.m_oPaint.setFillOpacity255(255);var ai=clWDUtil.sCouleurHTMLPlusBrillante(yt),ni=IWDChartConstant.LEGEND_SQUARE_SIZE,ti=d,vi=this.m_params.getGradientType();switch(vi){case IWDChartConstant.FLAG_VERTICAL_GRADIENT:case IWDChartConstant.FLAG_HORIZONTAL_GRADIENT:this.m_oPaint.setLinearGradient(v,ft,ni,ti,yt,ai,"pad",vi==IWDChartConstant.FLAG_VERTICAL_GRADIENT);break;case IWDChartConstant.FLAG_NO_GRADIENT:this.m_oPaint.setFill(yt)}ii=1;this.m_oPaint.setStroke(ai,ii);ct=n.g(y,"legende-groupe-"+r);this.ecouteLegende(ct);yi=n.rect(ct,"legende-picto-"+r);n.drawRect(yi,new WDRect(v,ft,v+ni,ft+ti),this.m_oPaint,undefined,undefined,this.m_params.m_nDureeAnimation===0||lt?!1:WDSvgAnimationLegende);v+=ni+IWDChartConstant.MARGIN_LEGEND_ELEMENTS;this.m_oPaint.addClasse(this.m_params.m_sClasseLegende);pi=n.text(ct,"legende-texte-"+r);this.m_oPaint=t.tweenLegendPaint(r,this.m_oPaint);n.drawText(pi,oi[r],wt[r],v,ft+(ti/2-wt[r]/2-ii*2),IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE,this.m_oPaint,this.m_params.m_nDureeAnimation===0||lt?!1:bIEAvec11?WDSvgAnimation:WDSvgAnimationLegende);ri=this.bEstLegendeMasquee(r);ct.fadeTo(this.m_params.m_nDureeAnimation===0?0:400,ri?.5:1).find("text").css("text-decoration",ri?"line-through":"");ui=IWDChartConstant.MARGIN_LEGEND_ELEMENTS+(a?nt:ei[r]);fi=d+IWDChartConstant.MARGIN_LEGEND_ELEMENTS;(u||a)&&(v+ui+nt>b.m_nRight?(u=!1,h+=fi):a&&(u=!0));u?v+=ui:(v=o+IWDChartConstant.MARGIN_LEGEND_ELEMENTS,ft+=fi)}n.restoreClip()}};WDChartRenderer.prototype.drawChart=function(){this.m_oPaint.raz()};WDChartRenderer.prototype.RecreerRenderer=function(n){n.Raz()};WDChartRenderer.prototype.TermRenderer=function(n,t){var i=this.m_oGraphe.m_oVue;t!==WDChartView.ms_nDessinModifTypeGraphe&&(i.m_oModeleInitialSeries=undefined,i.m_tabSeriesMasquees=[],i.m_oAnimator.m_tabAnimations=[])};WDXYChartRenderer.bParametresSupportes=function(n,t){var r,i,u;if(!WDChartRenderer.bParametresSupportes(n,t))return!1;for(r=t.m_oParametres,i=0;i<t.m_tabSeries.length;++i)if(u=t.m_tabSeries[i],u.isOnSecondaryAxis()&&!r.m_oAxeYSecondaire)return!1;return!0};WDXYChartRenderer.prototype=new WDChartRenderer;WDXYChartRenderer.prototype.constructor=WDXYChartRenderer;WDXYChartRenderer.prototype.nGetYOrigin=function(n){return n?this.m_nYOrigin2:this.m_nYOrigin};WDXYChartRenderer.prototype.nGetXOrigin=function(n){return n?this.m_nXOrigin2:this.m_nXOrigin};WDXYChartRenderer.prototype.dGetXPixelsPerUnit=function(n){return n?this.m_dX2PixelsPerUnit:this.m_dXPixelsPerUnit};WDXYChartRenderer.prototype.dGetYPixelsPerUnit=function(n){return n?this.m_dY2PixelsPerUnit:this.m_dYPixelsPerUnit};WDXYChartRenderer.prototype.RecreerRenderer=function(){this.m_params.m_oAxeYSecondaire&&(nAffichage=WDChartView.ms_nDessin1erAffichage)};WDXYChartRenderer.prototype.getNbLegendLabels=function(){return this.m_oModele.m_tabSeries.length};WDXYChartRenderer.prototype.getLegendColorAt=function(n){return this.m_oModele.getSeriesColor(n)};WDXYChartRenderer.prototype.getLegendLabelAt=function(n){return this.m_oModele.getSeriesAt(n,!1).m_sLibelle};WDXYChartRenderer.prototype.draw=function(){this.m_oModele.createAxis();WDChartRenderer.prototype.draw.apply(this,arguments)};WDXYChartRenderer.prototype.drawChart=function(n,t,i){var o,f,a,v,e,u,c;if(WDChartRenderer.prototype.drawChart.apply(this,arguments),t.tweenRedessineAxes(i,!0)){if(!this.prepareRendering(this.m_params))return;if(this.drawGrids(n,this.m_params,this.m_rectAxis,i)===!1)return}o=this.isClipOnAxisRectBeforeDrawingChart();o&&n.clipRect(this.m_rectAxis,"clip-axes");var s=n.g(i,"groupe-series"),h=this.m_oModele.m_tabSeries.length,l=this.m_params.getType(),r=0;if(l==WDChartParameters.kCourbe||l==WDChartParameters.kAire)for(r=h-1;r>=0;--r)f=n.g(s,"groupe-serie-"+r),this.m_oGraphe.m_oVue.bEstSerieMasquee(r)&&this.m_params.m_nDureeAnimation==0||this.drawSeries(n,f,r,this.m_oModele.getSeriesAt(r,!1),this.m_params),u=n.findFromId(n.m_domBaliseSVG,"legende-groupe-"+r),u.length&&(a=WDChartListener.bind(WDXYChartLegendListener,this.m_oGraphe,u,f,r));else for(r=0;r<h;++r)f=n.g(s,"groupe-serie-"+r),this.m_oGraphe.m_oVue.bEstSerieMasquee(r)&&this.m_params.m_nDureeAnimation==0||this.drawSeries(n,f,r,this.m_oModele.getSeriesAt(r,!1),this.m_params),u=n.findFromId(n.m_domBaliseSVG,"legende-groupe-"+r),u.length&&(a=WDChartListener.bind(WDXYChartLegendListener,this.m_oGraphe,u,f,r));for(e=h;(v=n.findFromId(s,"groupe-serie-"+e)).length>0;++e)v.remove(),u=n.findFromId(n.m_domBaliseSVG,"legende-groupe-"+e),u.length&&u.remove(),c=n.findFromId(n.m_domBaliseSVG,"barre-texte-"+e),c.length&&c.remove();o&&n.restoreClip();t.tweenRedessineAxes(i,!0)&&this.drawAxis(n,i,this.m_params)};WDXYChartRenderer.prototype.getDrawnValuesCount=function(n,t){var i=Math.floor(t.m_dMinValue),r=Math.ceil(t.m_dMaxValue);return Math.min(n,r-i+1)};WDXYChartRenderer.prototype.getYOriginValue=function(n){var t=this.getAxisRendererForType(n?EAxisType.Y2:EAxisType.Y);return t?t.m_axis.m_dOriginValue:0};WDXYChartRenderer.prototype.getXOriginValue=function(n){var t=this.getAxisRendererForType(n?EAxisType.X2:EAxisType.X);return t?t.m_axis.m_dOriginValue:0};WDXYChartRenderer.prototype.getFirstDrawnCategoryIndex=function(n){var t=n.m_dOriginValue;return this.m_timeScale!=ETimeScale.NONE?this.m_oModele.getCategoryIndexForTime(Math.floor(t)):Math.floor(t)};WDXYChartRenderer.prototype.getCategoryDrawingPositionX=function(n,t){if(n-=this.getFirstDrawnCategoryIndex(this.m_oModele.getAxisByType(EAxisType.X)),this.m_timeScale!=ETimeScale.NONE){var i=this.m_oModele.m_oCategories,r=i.getTimeInMillisAt(n)-i.getMinValueInMillis();return this.nGetXOrigin(t)+Math.ceil(r*this.dGetXPixelsPerUnit(t))}return this.nGetXOrigin(t)+Math.ceil(n*this.dGetXPixelsPerUnit(t))};WDXYChartRenderer.prototype.getCategoryDrawingPositionY=function(n,t){if(n-=this.getFirstDrawnCategoryIndex(this.m_oModele.getAxisByType(EAxisType.Y)),this.m_timeScale!=ETimeScale.NONE){var i=this.m_oModele.m_oCategories,r=i.getTimeInMillisAt(n)-i.getMinValueInMillis();return this.nGetYOrigin(t)-Math.ceil(r*this.dGetYPixelsPerUnit(t))}return this.nGetYOrigin(t)-Math.ceil(n*this.dGetXPixelsPerUnit(t))};WDXYChartRenderer.prototype.surbrillanceSerieDepuisMire=function(n,t,i){if(WDChartRenderer.prototype.surbrillanceSerieDepuisMire.apply(this,arguments),t!==undefined){var u=n.g("groupe-serie-"+t),r=u.find("path");r.css("stroke-width",parseInt10(r.attr("stroke-width"))+(i?1:0))}};WDChartRenderer.prototype.drawMire=function(n,t,i,r,u,f){var ie,yr,uf,ff,ef,of,sf,p,fi,at,gr,hf,vt,ni,a,rt,w,tu,iu,ht,ru,yt,nr,uu,hi,b,eu,ou,su,hu,s,ct,ft,ci,lu,rr,au,vu,bt,bf,er,or,lt,li,yu,sr,kt,it,cr,lr,dt,ne,ar,vr,te,wu,bu;if((this.m_oPaint.raz(),this.m_params.m_bBulleActive)&&(ie=WDChartListener.bind(WDChartMireListener,this.m_oGraphe,n.m_domBaliseSVG,i),this.m_domGroupeSeries&&this.m_domGroupeSeries.length!==0&&this.m_domGroupeSeries.children().length!==0)&&!this.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasFinie()){n.m_domBaliseSVG.css("cursor","");var o=u,y=f,ku=r===undefined||isNaN(r.pageX)||isNaN(r.pageY);if(ku){if(u===undefined)return}else yr=n.m_domBaliseSVG.offset(),o=r.pageX-yr.left,y=r.pageY-yr.top;if(o!==undefined&&y!==undefined){var c=this.m_params,e=c.getType(),pr=2,du=3;WDChartRenderer.prototype.s_m_nProfileMireForce=WDXYChartRenderer.prototype.s_m_nProfileMireForce;var gu=e==WDChartParameters.kCourbe||e==WDChartParameters.kAire||e==WDChartParameters.kHistoEmpile||e==WDChartParameters.kHistoEmpileHorizontal,re=e==WDChartParameters.kCourbe||e==WDChartParameters.kAire,wr=WDChartRenderer.prototype.s_m_nProfileMireForce||(c.m_bMire?c.m_bMireMultiple&&gu?pr:1:du),ii=!(e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle)&&wr!==du,wt=ii&&gu&&wr===pr||!1,st=wr===pr||e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle||WDChartRenderer.prototype.s_m_bSuivreCurseurForce===!0||!1,nt=wt&&!0,ai=0,g=1,et=!0,vi=!wt&&re&&!0,yi=!vi&&nt,nf=nt||!1,tf=wt||e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle||WDChartRenderer.prototype.s_m_bDeplacementForce===!0||!1,ue=e==WDChartParameters.kCourbe||e==WDChartParameters.kAire,br=ue&&!0?3:0,pi=!st&&(e==WDChartParameters.kHistoEmpile||e==WDChartParameters.kHisto||e==WDChartParameters.kHistoEmpileHorizontal||e==WDChartParameters.kHistoHorizontal||e==WDChartParameters.kWaterfall)||!1,ri=!pi&&!1,rf=!0,ui=!ii&&(e==WDChartParameters.kCourbe||e==WDChartParameters.kAire||e==WDChartParameters.kHistoEmpile||e==WDChartParameters.kHisto||e==WDChartParameters.kHistoEmpileHorizontal||e==WDChartParameters.kHistoHorizontal||e==WDChartParameters.kWaterfall),gt=!nt&&!st&&(!1||ui||!ii&&(e==WDChartParameters.kHistoEmpile||e==WDChartParameters.kHisto||e==WDChartParameters.kHistoEmpileHorizontal||e==WDChartParameters.kHistoHorizontal||e==WDChartParameters.kWaterfall)||e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle),h=this.m_rectChartInitial;if(this.m_rectAxis!==undefined&&(h.m_nLeft=this.m_rectAxis.m_nLeft,h.m_nBottom=this.m_rectAxis.m_nBottom,uf=n.findFromId(n.m_domBaliseSVG,"axe-vert-2").length>0,(uf||vi)&&(h.m_nRight=this.m_rectAxis.m_nRight),ff=n.findFromId(n.m_domBaliseSVG,"axe-horiz-2").length>0,(ff||ii)&&(h.m_nTop=this.m_rectAxis.m_nTop)),ef=n.m_domBaliseSVG[0].getAttribute("preserveAspectRatio")==="none",ef)o=o/n.m_domBaliseSVG.width()*$(this.m_oGraphe.m_oHoteImage).data("width"),y=y/n.m_domBaliseSVG.height()*$(this.m_oGraphe.m_oHoteImage).data("height");else{var kr=n.m_domBaliseSVG.width(),dr=n.m_domBaliseSVG.height(),wi=$(this.m_oGraphe.m_oHoteImage).data("width"),bi=$(this.m_oGraphe.m_oHoteImage).data("height"),ki,di;wi>bi?(ki=kr,di=kr*(bi/wi)):(di=dr,ki=dr*(wi/bi));of=(kr-ki)/2;sf=(dr-di)/2;o=(o-of)/ki*wi;y=(y-sf)/di*bi}if(p=!0,e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle?(p=this.m_domGroupeSeries.find("path:hover").length===0,p&&(w=this.m_domGroupeSeries.find("path").first().data("wbGrfDrawPath"),w&&(p=w.width<Math.sqrt(Math.pow(Math.abs(o-w.x),2)+Math.pow(Math.abs(y-w.y),2))))):e==WDChartParameters.kHisto||e==WDChartParameters.kHistoEmpile||e==WDChartParameters.kHistoHorizontal||e==WDChartParameters.kHistoEmpileHorizontal||e==WDChartParameters.kWaterfall?(p=this.m_domGroupeSeries.find("rect:hover").length===0,p&&i.data("wbGrfMireSerie")!==undefined&&i.data("wbGrfMireX")!==undefined&&(fi=n.findFromId(this.m_domGroupeSeries,"groupe-serie-"+i.data("wbGrfMireSerie")),fi.length>0&&(at=n.findFromId(fi,"series-barre-"+i.data("wbGrfMireX")),at.length>0&&(p=y<at.attr("y"),p||(p=y>parseInt10(at.attr("y"))+parseInt10(at.attr("height"))),p||(gr=n.findFromId(fi,"series-barre-"+(parseInt10(i.data("wbGrfMireX"))+1)),p=gr.length>0?o>gr.attr("x"):o>parseInt10(at.attr("x"))+parseInt10(at.attr("width")),p||(hf=n.findFromId(fi,"series-barre-"+(parseInt10(i.data("wbGrfMireX"))-1)),hf.length==0&&(p=o<at.attr("x")))))))):p=o<h.m_nLeft||y<h.m_nTop||o>h.m_nRight||y>h.m_nBottom,p){i.data("wbGrfMireFade")===1&&(i.stop("wbGrfMireFade",!0).data("wbGrfMireFade",0).animate({opacity:0},{duration:1e3,queue:"wbGrfMireFade"}).dequeue("wbGrfMireFade"),this.surbrillanceSerieDepuisMire(n,i.data("wbGrfMireSerie"),!1,!0));return}n.m_domBaliseSVG.css("cursor","");var fe=st&&tf,l=h.m_nTop,ei=c.m_sClasseBulle,nu=[],oi=[],v,ut,gi,tt={},cf=o;for(s=0;v===undefined&&s<this.m_oGraphe.m_oModele.m_tabSeries.length;++s)if(vt=!1,nr=n.g("groupe-serie-"+s),this.m_oGraphe.m_oVue.bEstSerieMasquee(s)!==!0){if(rt=undefined,e==WDChartParameters.kCourbe||e==WDChartParameters.kAire){if(a=n.findFromId(nr,"serie-line-"+s),a.length===0)continue;rt=a.data("wbGrfSeriePoints")}else if(e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle){if(a=this.m_domGroupeSeries.find("path:hover"),a.length===0)continue;if(vt=!0,ni=WDPieChartRenderer.nGetIndicePart(n,a),w=a.data("wbGrfDrawPath"),w){var tr=w.x,ir=w.y,ti=w.width;if(st)tu=o,iu=y;else if(1)var lf=Number(w.options.startAngle+w.options.sweep/2).toRad(),tu=tr+ti*Math.cos(lf),iu=ir+ti*Math.sin(lf);else var af=Number(w.options.startAngle).toRad(),vf=Number(w.options.startAngle+w.options.sweep).toRad(),yf=tr+ti*Math.cos(af),ee=tr+ti*Math.cos(vf),tu=yf+(ee-yf)/2,pf=ir+ti*Math.sin(af),oe=ir+ti*Math.sin(vf),iu=pf+(oe-pf)/2;iu>ir?(ri=!0,pi=!ri):(ri=!1,pi=!ri);rf=tu<tr?!0:!1;rt=[{x:tu,y:iu}]}else rt=[{x:o,y:y}]}else if(e==WDChartParameters.kHisto||e==WDChartParameters.kHistoHorizontal||e==WDChartParameters.kDonut||e==WDChartParameters.kHistoEmpile||e==WDChartParameters.kHistoEmpileHorizontal||e==WDChartParameters.kWaterfall){if(a=nr.find("rect:hover"),a.length===0)continue;vt=!0;ni=parseInt10(n.getId(a).substr(n.getId(a).lastIndexOf("-")+1));rt=[{x:parseInt10(a.attr("x"))+parseInt10(a.attr("width"))/2,y:a.attr("y")}]}else return;for(ht=0;ht<rt.length;++ht)if(tt.x=parseInt10(rt[ht].x),ru=vt,vt||(ru=ht<rt.length-1?Math.abs((parseInt10(rt[ht+1].x)-tt.x)/2)>Math.abs(o-tt.x):rt.length>1?Math.abs((tt.x-parseInt10(rt[ht-1].x))/2)>Math.abs(tt.x-o):Math.abs(o-tt.x)<20),ru){cf=tt.x;ut=vt?ni:ht;tt.y=parseInt10(rt[ht].y);yt=tt.y;gi!==!0&&(gi=vt?!0:Math.abs(y-yt)<20);st&&(yt=y);!wt&&gi?(v=s,l=yt):l=nu.length===0?yt:Math.min(l,yt);nu[s]=yt;oi[s]=tt.y;break}else if(tt.x>o)break}if(o=cf,!wt&&v===undefined){if(v=i.data("wbGrfMireSerie"),v==undefined)return;if(nr=n.g("groupe-serie-"+v),this.m_oGraphe.m_oVue.bEstSerieMasquee(v)===!0){i.data("wbGrfMireSerie",undefined);return}l=nu[v]}if(l!==undefined&&gi!==undefined){if(ku)return[v,ut,v!==undefined&&ut!==undefined?this.m_oGraphe.m_oModele.m_tabSeries[v].getValueAtWithNull(ut):undefined];if(uu=!(!tf&&ut===i.data("wbGrfMireX")&&(nt||v==i.data("wbGrfMireSerie")))||!0&&i.css("opacity")==0,uu&&i.data("wbGrfMireFade")!==1&&i.stop("wbGrfMireFade",!0).data("wbGrfMireFade",1).animate({opacity:1},{duration:400,queue:"wbGrfMireFade"}).dequeue("wbGrfMireFade"),!uu){v!==undefined&&this.surbrillanceSerieDepuisMire(n,e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle?ni:v,!0);return}i.data("wbGrfMireSerie",v);i.data("wbGrfMireX",ut);var si=n.g(i,"mire-axes-groupe"),fu=n.g(i,"mire-point-groupe"),wf=n.g(i,"mire-bulle-groupe");if(fu.empty(),si.empty(),hi=oi[v],!ii||e==WDChartParameters.kHistoEmpile||e==WDChartParameters.kHisto||e==WDChartParameters.kHistoEmpileHorizontal||e==WDChartParameters.kHistoHorizontal||e==WDChartParameters.kWaterfall||(b=c.m_sCouleurAxe,b=clWDUtil.sGetCouleurHTMLAssocie(b),eu=n.line(si,"mire-vert-haut"),g=c.m_nMireEpaisseur||g,b=c.m_sMireCouleur||b,this.m_oPaint.setStroke(b,g,(c.m_nMireOpacite||100)/100),this.m_oPaint.m_oStyle["pointer-events"]="none",n.SetAntiAliasing(!1,eu),n.drawLine(eu,o,l+ai+(vi?g:0),o,h.m_nBottom,this.m_oPaint),ou=n.line(si,"mire-vert-bas"),g=c.m_nMireEpaisseur||g,b=c.m_sMireCouleur||b,this.m_oPaint.setStroke(b,g,(c.m_nMireOpacite||100)/100),this.m_oPaint.m_oStyle["pointer-events"]="none",n.SetAntiAliasing(!1,ou),n.drawLine(ou,o,h.m_nTop,o,l-ai,this.m_oPaint),vi&&(su=n.line(si,"mire-horiz-gauche"),g=c.m_nMireEpaisseur||g,b=c.m_sMireCouleur||b,this.m_oPaint.setStroke(b,g,(c.m_nMireOpacite||100)/100),this.m_oPaint.m_oStyle["pointer-events"]="none",n.SetAntiAliasing(!1,su),n.drawLine(su,h.m_nLeft,hi,o-ai,hi,this.m_oPaint),hu=n.line(si,"mire-horiz-droit"),g=c.m_nMireEpaisseur||g,b=c.m_sMireCouleur||b,this.m_oPaint.setStroke(b,g,(c.m_nMireOpacite||100)/100),this.m_oPaint.m_oStyle["pointer-events"]="none",n.SetAntiAliasing(!1,hu),n.drawLine(hu,o+ai+g,hi,h.m_nRight,hi,this.m_oPaint))),!0){var pt=[],ot=[],cu=!0;for(s=0;s<this.m_oGraphe.m_oModele.m_tabSeries.length;++s)if((ct=undefined,ct=undefined,ut!==undefined&&(ct=this.m_oGraphe.m_oModele.getCategoryColor(ut,!0)),ct||(ct=e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle?this.m_oGraphe.m_oModele.getCategoryColor(ni):e==WDChartParameters.kWaterfall?a.attr("stroke"):this.m_oGraphe.m_oModele.getSeriesColor(s)),this.surbrillanceSerieDepuisMire(n,e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle?ni:s,v===s),v===undefined||v==s)&&this.m_oGraphe.m_oVue.bEstSerieMasquee(s)!==!0&&ut!==undefined){if(ft=this.m_oGraphe.m_oModele.m_tabSeries[s].m_nEpaisseur,ci=ut,vt||this.m_params.getXAxisMin()==IWDChartConstant.DEFAULT_VALUE||(ci+=this.m_params.getXAxisMin()),lu=this.m_oGraphe.m_oModele.getCategoryLabelAt(ci),rr=this.m_oGraphe.m_oModele.m_tabSeries[s].getValueAtWithNull(ci),a.data("wbGrfDrawMire")&&a.data("wbGrfDrawMire").valeur&&(rr=a.data("wbGrfDrawMire").valeur),rr===IWDChartConstant.NULL_VALUE)continue;br>0&&(au="series-"+s+"-point-"+ut,vu=n.findFromId(this.m_domGroupeSeries,au),vu.length>0?(bt=vu.clone(),bt.css("stroke-width",parseInt10(bt.attr("stroke-width"))+br),n.setId(bt,au),fu.append(bt)):o<h.m_nRight&&oi[s]>h.m_nTop&&o>h.m_nLeft&&oi[s]<h.m_nBottom&&(bt=n.circle(fu,"mire-point-"+s),bf=clWDUtil.sCouleurHTMLPlusBrillante(ct),this.m_oPaint.setFill(bf),this.m_oPaint.setStroke(ct,ft),n.drawCircle(bt,o,oi[s],ft+br,this.m_oPaint)));var k=e==WDChartParameters.kSecteur||e==WDChartParameters.kDonut||e==WDChartParameters.kHemicycle?this.m_params.m_sBulleSecteur||"[%CATEGORIE%]\n[%VALEUR%]\n[%%%]":c.m_sBulle||undefined,ur=nt?"":lu||"",fr=this.m_oGraphe.m_oModele.m_tabSeries[s].m_sLibelle||"",se=(nt?"[%VALEUR%]":"")+WDChartUtils.formatValue(rr,c.m_sMasqueValeur,!0)+(nt?"[%VALEUR%]":""),he=a.data("wbGrfPieLabelRenderer")?a.data("wbGrfPieLabelRenderer").m_strPercentLabel||"":"";if(k===undefined&&(k="",isNaN(parseInt10(ur))&&!clWDUtil.bEstChaineNonVide(ur)||(k+=ur+"\n"),isNaN(parseInt10(fr))&&!clWDUtil.bEstChaineNonVide(fr)||(k+=fr+" = "),k+="[%VALEUR%]"),k=k.replace("[%CATEGORIE%]",ur).replace("[%SERIE%]",fr).replace("[%VALEUR%]",se).replace("[%%%]",he).replace(/\n\n/g,"\n"),nt){for(ot.length===0&&(pt[0]=(this.m_params.m_sBulleEnteteMire||"[%CATEGORIE%]").replace("[%CATEGORIE%]",lu),lt=new WDPaintCSS,lt.addClasse(ei),lt.m_oStyle["pointer-events"]="none",ot[0]=lt),er=k.split("[%VALEUR%]"),pt.push([$("<span/>").html("&#8226; ").text()].concat(er.slice(0,er.length-1))),or=new WDPaintCSS,or.setFill(ct),lt=new WDPaintCSS,lt.addClasse(ei),lt.m_oStyle["pointer-events"]="none",or.m_oStyle["pointer-events"]="none",ot.push([or,lt]),er.length==3&&(li=new WDPaintCSS,li.addClasse(ei),li.css("font-weight","bold"),li.m_oStyle["pointer-events"]="none",ot[ot.length-1]=ot[ot.length-1].concat([li,lt]));s+1<this.m_oGraphe.m_oModele.m_tabSeries.length;){if(!1==this.m_oGraphe.m_oVue.bEstSerieMasquee(s+1)&&this.m_oGraphe.m_oModele.m_tabSeries[s+1].getValueAtWithNull(ci)!==IWDChartConstant.NULL_VALUE)break;++s}if(s+1<this.m_oGraphe.m_oModele.m_tabSeries.length)continue;for(yu=1,k=pt[0],k==""&&(pt=pt.slice(1),ot=ot.slice(1),yu=0),sr=yu;sr<pt.length;++sr)k!=""&&(k+="\n"),k+=pt[sr].join("")}var hr=WDPaintCSS.oGetInfoCSS(ei,k.replace(/\n/g,"<br>"),["width","height","lineHeight","fontSize"],!0),ce=Math.ceil(parseInt10(hr.width)),le=Math.ceil(parseInt10(hr.height)),kf=parseInt10(hr.lineHeight);ft=1;kt=ce+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*2+ft*2+IWDChartConstant.MARGIN_LEGEND_BORDER;it=le+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*2+ft*2+IWDChartConstant.MARGIN_LEGEND_BORDER;et?(l-=it,(yi&&cu||gt&&st&&et)&&(l+=it/2)):(yi&&cu||gt&&st&&!et)&&(l-=it/2);cr=l>=h.m_nTop;lr=l+it<=h.m_nBottom;cr&&lr||((ri?lr:!cr)?!1||(nf?l=h.m_nTop:l+=(yi?it/2:it)+(et?IWDChartConstant.MARGIN_LEGEND_BORDER:0)):(gt&&st||(pi?cr:!lr))&&(nf?l=h.m_nBottom-it:l-=(yi?it/2:it)+(et?IWDChartConstant.MARGIN_LEGEND_BORDER:0)));var d,df=o-h.m_nLeft>=kt/(gt?2:1),gf=o+kt/(gt?2:1)<=h.m_nRight,pu=!1;!0&&((rf?!df:gf)||!1)?d=new WDRect(o+IWDChartConstant.MARGIN_LEGEND_BORDER,l+(et?0:IWDChartConstant.MARGIN_LEGEND_BORDER),o+kt,l+it-(et?IWDChartConstant.MARGIN_LEGEND_BORDER:0)):(pu=!0,d=new WDRect(o-kt,l+(et?0:IWDChartConstant.MARGIN_LEGEND_BORDER),o-IWDChartConstant.MARGIN_LEGEND_BORDER,l+it-(et?IWDChartConstant.MARGIN_LEGEND_BORDER:0)));gt&&(pu&&gf?d.setLocation(d.m_nLeft+(kt-IWDChartConstant.MARGIN_LEGEND_BORDER)/2+IWDChartConstant.MARGIN_LEGEND_BORDER,d.m_nTop,!0):!pu&&df&&d.setLocation(d.m_nLeft-(kt-IWDChartConstant.MARGIN_LEGEND_BORDER)/2-IWDChartConstant.MARGIN_LEGEND_BORDER,d.m_nTop,!0),st);dt=fe?!1:WDSvgAnimationBulle;ne=new WDRect(d.m_nLeft-ft,d.m_nTop-ft-(ui?IWDChartConstant.MARGIN_LEGEND_BORDER:0),d.m_nRight+ft,d.m_nBottom+ft+(ui?IWDChartConstant.MARGIN_LEGEND_BORDER:0));!0&&(ar=n.clipRect(ne,"clip-bulle",dt));vr=undefined;!c.m_bLegendeBordArrondi||(vr=5);this.m_oPaint.setStroke(nt?c.m_sCouleurLegende:ct,ft);this.m_oPaint.setFillOpacity255(204);this.m_oPaint.setFill(c.m_sCouleurLegendeFond||"#FFFFFF");this.m_oPaint.m_oStyle["pointer-events"]="none";te=nt||!wt?"mire-bulle":"mire-bulle-"+s;wu=this.__bDessineBulle(n,wf,te,d,this.m_oPaint,vr,vr,ui?tt.x:undefined,ui?tt.y:undefined,dt);this.m_oPaint.addClasse(ei);this.m_oPaint.m_oStyle["pointer-events"]="none";bu=n.text(wf,nt||!wt?"legende-texte":"legende-texte-"+s);!wu&&dt&&(dt.prototype.ArreteEtVideAnimations(bu),ar&&dt.prototype.ArreteEtVideAnimations(ar));n.drawText(bu,nt?pt:k.split("\n"),kf-(kf-parseInt10(hr.fontSize))/2,d.m_nLeft+IWDChartConstant.MARGIN_LEGEND_ELEMENTS,d.m_nTop+IWDChartConstant.MARGIN_LEGEND_ELEMENTS*.5,IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE,nt?[this.m_oPaint].concat(ot):this.m_oPaint,wu?dt:!1);cu=!1;et||(l+=it);ar&&n.restoreClip()}}}}}};WDChartRenderer.prototype.__oPathBulle=function(n,t,i,r,u,f){var p=6,l=6,o=n.m_nLeft,e=n.m_nTop,c=n.getWidth(),s=n.getHeight(),h=i,a=h+l,w=Math.round(t||0)%2/2,v,y;return o+=w,e+=w,f&&(f-=e),v=["M",o+h,e,"L",o+c-h,e,"C",o+c,e,o+c,e,o+c,e+h,"L",o+c,e+s-h,"C",o+c,e+s,o+c,e+s,o+c-h,e+s,"L",o+h,e+s,"C",o,e+s,o,e+s,o,e+s-h,"L",o,e+h,"C",o,e,o,e,o+h,e],y=!1,f&&f>s&&u>o+a&&u<o+c-a?v.splice(23,3,"L",u+l,e+s,u,e+s+p,u-l,e+s,o+h,e+s):f&&f<0&&u>o+a&&u<o+c-a?v.splice(3,3,"L",u-l,e,u,e-p,u+l,e,o+c-h,e):y=u&&u>c&&f>e+a&&f<e+s-a?!0:u&&u<0&&f>e+a&&f<e+s-a?!0:!0,y&&f&&u&&v.splice(23,3,"L",o+l,e+s,o+l,e+s,o+l,e+s,o+h,e+s),{d:v,"data-arguments":Array.prototype.slice.call(arguments,0)}};WDChartRenderer.prototype.__bDessineBulle=function(n,t,i,r,u,f,e,o,s,h){for(var l,y,p=u.m_oStyle["stroke-width"],w=this.__oPathBulle(r,p,f,e,o,s),v=[{width:5,opacity:.05},{width:3,opacity:.1},{width:1,opacity:.15}],c=0;c<v.length;++c)l=n.path(t,i+"-ombre-"+c);var y=n.path(t,i),a=h&&h.prototype.bAnimationBullePathPossible(w,y,o&&s),b=new WDPaintCSS;for(c=0;c<v.length;++c)l=n.path(t,i+"-ombre-"+c),!a&&h&&h.prototype.ArreteEtVideAnimations(l),n.translate(l,p,p,!0),b.setStroke("black",v[c].width,v[c].opacity),b.m_oStyle["pointer-events"]="none",n.drawPath(l,w,b,a?h:!1);return y=n.path(t,i),!a&&h&&h.prototype.ArreteEtVideAnimations(y),n.drawPath(y,w,u,a?h:!1),a};WDXYChartRenderer.prototype.drawAxis=function(n,t,i){var f=n.g(t,"groupe-axes"),e,r,u,o;if(f.empty(),this.m_oModele.hasAuMoinsUneSerieNonVide())for(e=this.m_oModele.m_lstAxis.length,r=0;r<e;++r)u=this.m_tabAxisRenderer[r],i.isAxisVisible(u.m_axis)&&(o=n.g(f,"groupe-axe-"+r),u.draw(n,o,i,this.m_rectChart,this.m_rectAxis,this.m_nXOrigin,this.m_nYOrigin,this.m_oPaint))};WDXYChartRenderer.prototype.drawGrids=function(n,t,i,r){var u=0,f=n.g(r,"groupe-grids"),g,nt,e,l,s,a,it,rt;if(n.SetAntiAliasing(!1,f),this.m_oModele.hasAuMoinsUneSerieNonVide()){var ut=WDPaintCSS.oGetInfoCSS(t.m_sClasseLibelle,"0","lineHeight"),b=parseInt10(ut.lineHeight),c=t.m_bAxeXHorizontal?this.getAxisRendererForType(EAxisType.X):this.getAxisRendererForType(EAxisType.Y);if(c){var v=c.getNbGraduations(),k=c.getAxisSize(i),y=c.getGraduationSize(k),o=i.getLeft(),ft=i.getTop(),et=i.getBottom(),d=o;for(u=0;u<v;++u){if(u>0&&Math.abs(o-d)<=5+b){o+=y;continue}d=o;l=o!=this.nGetXOrigin(c.m_axis.isSecondaryAxis())||!t.isAxisVisible(c.m_axis);s=n.line(f,"grid-vert-"+u);this.m_oPaint.setStroke(t.m_sCouleurQuadrillage,undefined,l&&t.isVerticalGridShown()?1:0);n.drawLine(s,o,ft,o,et,this.m_oPaint,!1);o+=y}for(a=v;(s=n.findFromId(f,"grid-vert-"+a)).length>0;++a)s.remove();g=n.line(f,"grid-horiz-gauche");nt=n.line(f,"grid-horiz-droite");this.m_oPaint.setStroke(t.m_sCouleurQuadrillage,undefined,t.isHorizontalGridShown()?0:1);n.drawLine(g,i.getLeft(),i.getTop(),i.getRight(),i.getTop(),this.m_oPaint,!1);this.m_oPaint.setStroke(t.m_sCouleurQuadrillage,undefined,t.isHorizontalGridShown()?0:1);n.drawLine(nt,i.getLeft(),i.getBottom(),i.getRight(),i.getBottom(),this.m_oPaint,!1)}if(e=t.m_bAxeXHorizontal?this.getAxisRendererForType(EAxisType.Y):this.getAxisRendererForType(EAxisType.X),e){var v=e.getNbGraduations(),k=e.getAxisSize(i),y=e.getGraduationSize(k),h=i.getBottom(),ot=i.getLeft(),st=i.getRight(),tt=h,p=0,w=!1;for(u=0;u<v;++u){if(l=h!=this.nGetYOrigin(e.m_axis.isSecondaryAxis())||!t.isAxisVisible(e.m_axis),u>0&&Math.abs(h-tt)<=5+b?(l=!1,w||++p):(tt=h,!w&&p>0&&(w=!0)),u>0&&u==v-1&&!l&&(this.m_params.m_oAxeY.m_dPasMin||0)<this.m_params.m_oAxeY.m_dPas&&(this.m_params.m_oAxeY.m_dPasMin=this.m_params.m_oAxeY.m_dPas,this.m_params.m_oAxeY.m_dPas=e.m_dStep*(1+p),this.m_params.m_oAxeY.m_dPas>=e.m_dStep))return this.drawChart(n,this.m_oGraphe.m_oVue.m_oAnimator,this.m_domGroupeSeries),!1;s=n.line(f,"grid-horiz-"+u);this.m_oPaint.setStroke(t.m_sCouleurQuadrillage,undefined,l&&t.isHorizontalGridShown()?1:0);n.drawLine(s,ot,h,st,h,this.m_oPaint,!1);h-=y}for(a=v;(s=n.findFromId(f,"grid-horiz-"+a)).length>0;++a)s.remove();it=n.line(f,"grid-vert-haut");rt=n.line(f,"grid-vert-bas");this.m_oPaint.setStroke(t.m_sCouleurQuadrillage,undefined,t.isVerticalGridShown()?0:1);n.drawLine(it,i.getLeft(),i.getTop(),i.getLeft(),i.getBottom(),this.m_oPaint,!1);this.m_oPaint.setStroke(t.m_sCouleurQuadrillage,undefined,t.isVerticalGridShown()?0:1);n.drawLine(rt,i.getRight(),i.getTop(),i.getRight(),i.getBottom(),this.m_oPaint,!1)}}};WDXYChartRenderer.prototype.adjustAxisSizeBeforePreparingRenderer=function(n){for(var t,u,f,i,r=0;r<this.m_oModele.m_lstAxis.length;++r)t=this.m_oModele.m_lstAxis[r],u=n.getAxisTitle(t),u&&(f=WDPaintCSS.oGetInfoCSS(n.m_sClasseAxe,u,"lineHeight"),i=parseInt10(f.lineHeight),t.m_orientation==EAxisOrientation.HORIZONTAL?t.isSecondaryAxis()?this.m_rectAxis.setLocation(this.m_rectAxis.getLeft(),this.m_rectAxis.getTop()+i+IWDChartConstant.MARGIN_AXIS_TITLE,!1):this.m_rectAxis.setSize(this.m_rectAxis.getWidth(),this.m_rectAxis.getHeight()-(i+IWDChartConstant.MARGIN_AXIS_TITLE)):t.isSecondaryAxis()?this.m_rectAxis.setSize(this.m_rectAxis.getWidth()-(i+IWDChartConstant.MARGIN_AXIS_TITLE),this.m_rectAxis.getHeight()):this.m_rectAxis.setLocation(this.m_rectAxis.getLeft()+IWDChartConstant.MARGIN_AXIS_TITLE+i,this.m_rectAxis.getTop(),!1))};WDXYChartRenderer.prototype.prepareRendering=function(n){var f=0,v,p,i,l,h,t,s,w,y,a,b;this.m_rectAxis.set(this.m_rectChart);this.m_timeScale=this.m_oGraphe.m_oModele.m_oCategories.bEchelleTemporelle()&&this.m_oGraphe.m_oModele.m_oCategories.m_tabValeurMS.length?n.m_sMasqueValeur.indexOf(":")>0?ETimeScale.TIME:ETimeScale.DATE:ETimeScale.NONE;this.adjustAxisSizeBeforePreparingRenderer(n,this.m_oPaint);var r=0,c=0,e=0,u=0,o=this.m_oModele.m_lstAxis.length;if(!this.m_tabAxisRenderer||this.m_tabAxisRenderer.length!=o)for(this.m_tabAxisRenderer=undefined,delete this.m_tabAxisRenderer,this.m_tabAxisRenderer=[],f=0;f<o;++f)this.m_tabAxisRenderer[f]=this.createAxisRenderer();for(i=0;i<o;++i)s=this.m_oModele.m_lstAxis[i],t=this.m_tabAxisRenderer[i],t.prepare(s,n,this.m_rectAxis,this.m_oPaint,s.isDisplayCategories()?this.m_timeScale:ETimeScale.NONE);for(i=0;i<o;++i)if(t=this.m_tabAxisRenderer[i],t.m_axis.m_orientation==EAxisOrientation.HORIZONTAL&&!t.m_axis.isSecondaryAxis()){if(t.m_tabGraduationLabels.join("").length==0)for(v=0;v<o;++v)p=this.m_tabAxisRenderer[v],p.m_axis.m_orientation==EAxisOrientation.VERTICAL&&(p.m_dBottomOverflow=0);break}for(i=0;i<o;++i)t=this.m_tabAxisRenderer[i],t.m_dLeftOverflow>r&&(r=t.m_dLeftOverflow),t.m_dRightOverflow>c&&(c=t.m_dRightOverflow),t.m_dTopOverflow>e&&(e=t.m_dTopOverflow),t.m_dBottomOverflow>u&&(u=t.m_dBottomOverflow);for(r=Math.ceil(r),c=Math.ceil(c),e=Math.ceil(e),u=Math.ceil(u),l=this.m_rectAxis.getLeft(),h=this.m_rectAxis.getBottom(),f=0;f<o;++f)t=this.m_tabAxisRenderer[f],s=t.m_axis,s.isSecondaryAxis()||(w=t.m_nNbNegativeGraduations,s.m_orientation==EAxisOrientation.HORIZONTAL?w==0?l+=r:(y=t.getGraduationSize(this.m_rectAxis.getWidth()-t.m_dLeftOverflow-t.m_dRightOverflow)*t.m_nNbNegativeGraduations+t.m_dLeftOverflow,y<=r?(l+=r,r-=y-t.m_dLeftOverflow):(l+=y,r=t.m_dLeftOverflow)):w==0?h-=u:(a=t.getGraduationSize(this.m_rectAxis.getHeight()-t.m_dTopOverflow-t.m_dBottomOverflow)*t.m_nNbNegativeGraduations+t.m_dBottomOverflow,a<=u?(b=a-t.m_dBottomOverflow,b>e?(h-=a,u=t.m_dBottomOverflow):(h-=e,e-=b)):(h-=a,u=t.m_dBottomOverflow)));this.m_rectAxis.set(this.m_rectAxis.getLeft()+r,this.m_rectAxis.getTop()+e,this.m_rectAxis.getRight()-c,this.m_rectAxis.getBottom()-u);this.adjustAxisSizeBeforeDrawing();this.m_nXOrigin=Math.ceil(l);this.m_nYOrigin=Math.ceil(h);var d=this.getAxisRendererForType(EAxisType.X),g=this.getAxisRendererForType(EAxisType.Y),k=this.getAxisRendererForType(EAxisType.Y2);return!d||!g?!1:(this.m_dXPixelsPerUnit=d.getPixelsPerUnit(this.m_rectAxis),this.m_dYPixelsPerUnit=g.getPixelsPerUnit(this.m_rectAxis),k&&(this.m_dY2PixelsPerUnit=k.getPixelsPerUnit(this.m_rectAxis),this.m_nYOrigin2=this.m_rectAxis.getBottom()+Math.min(0,k.m_axis.m_dMinValue)*this.m_dY2PixelsPerUnit),this.m_nXOrigin2=this.m_nXOrigin,this.m_dX2PixelsPerUnit=this.m_dXPixelsPerUnit,!0)};WDXYChartRenderer.prototype.adjustAxisSizeBeforeDrawing=function(){for(var t,f=this.m_tabAxisRenderer.length,i=0;i<f;++i){var r=this.m_tabAxisRenderer[i],u=r.m_axis,n=u.m_orientation==EAxisOrientation.HORIZONTAL?this.m_rectAxis.getWidth():this.m_rectAxis.getHeight(),e=n;(n=r.getGraduationSize(n)*(r.getNbGraduations()-1),n!==0)&&(t=e-n,t!=0&&(u.m_orientation==EAxisOrientation.HORIZONTAL?this.m_rectAxis.setRight(this.m_rectAxis.getRight()-t):this.m_rectAxis.setTop(this.m_rectAxis.getTop()+t)))}};WDXYChartRenderer.prototype.getAxisRendererForType=function(n){var r,t,i;if(this.m_tabAxisRenderer!=null)for(r=this.m_tabAxisRenderer.length,t=0;t<r;++t)if(i=this.m_tabAxisRenderer[t],i.m_axis.m_type==n)return i;return undefined};WDBarChartRenderer.prototype=new WDXYChartRenderer;WDBarChartRenderer.prototype.constructor=WDBarChartRenderer;WDBarChartRenderer.prototype.createAxisRenderer=function(){return new WDBarChartAxisRenderer(this)};WDBarChartRenderer.bParametresSupportes=function(n,t){return WDXYChartRenderer.bParametresSupportes(n,t)?!0:!1};WDBarChartRenderer.prototype._animStopColor=function(n,t,i,r){var u,f;r!=!!t.data("wbGrfSurbrillanceSerieDepuisMire")&&(r&&t.data("wbGrfSurbrillanceSerieDepuisMire",{"stop-color":i,stroke:t.attr("stroke")||i,fill:i}),u=clWDUtil.sCouleurHTMLPlusBrillante(i,.1),t.data("wbGrfSurbrillanceSerieDepuisMireInit")===undefined&&t.data("wbGrfSurbrillanceSerieDepuisMireInit",{"stop-color":i,stroke:t.attr("stroke")||i,fill:i}),f=new WDSvgAnimation(this.m_oGraphe,n,t,r?t.data("wbGrfSurbrillanceSerieDepuisMire"):{"stop-color":t.attr("stop-color"),stroke:t.attr("stroke"),fill:t.attr("fill")},r?{"stop-color":u,stroke:u,fill:u}:t.data("wbGrfSurbrillanceSerieDepuisMireInit")),f.duration=r?100:300,r||(f.m_fFinAnimation=function(){t.removeData("wbGrfSurbrillanceSerieDepuisMire")}),f.run())};WDBarChartRenderer.prototype.surbrillanceSerieDepuisMire=function(n,t,i,r){var u,e,f;for(WDChartRenderer.prototype.surbrillanceSerieDepuisMire.apply(this,arguments),u=0;u<this.m_oGraphe.m_oModele.m_tabSeries.length;++u)e=n.g("groupe-serie-"+u),f=this,e.find("rect").each(function(){var t=$(this),o=[],e=[],c,v,h;if(f.m_params.getGradientType()!=IWDChartConstant.FLAG_NO_GRADIENT)c=$("#"+t.data("wbGrfGradientId")),e=e.concat([c.children("stop").first(),c.children("stop").last()]),o=o.concat([e[0].attr("stop-color"),e[1].attr("stop-color")]);else{var s=undefined,l=t.data("wbGrfGrInfoXY"),a=l?l[IWDChartConstant.GR_CATEGORIE]:undefined;a!==undefined&&(s=f.m_oGraphe.m_oModele.getCategoryColor(a,!0));s==undefined&&(s=f.m_oGraphe.m_oModele.getSeriesColor(u));t.data("wbGrfDrawMire")&&t.data("wbGrfDrawMire").couleur!==undefined&&(s=t.data("wbGrfDrawMire").couleur);o.push(s);e.push(t)}for(v=i&&r===u||t.is("rect:hover"),h=0;h<o.length;++h)f._animStopColor(n,e[h],o[h],v)})};WDBarChartRenderer.prototype.drawChart=function(){WDXYChartRenderer.prototype.drawChart.apply(this,arguments);this.m_tabCumulatedValues=undefined};WDBarChartRenderer.prototype.isClipOnAxisRectBeforeDrawingChart=function(){return!this.m_oModele.m_oParametres.isDisplayValuesLabel()};WDBarChartRenderer.prototype.prepareRendering=function(n){var t,i,r,u,f;if(WDXYChartRenderer.prototype.prepareRendering.apply(this,arguments)){if(this.m_nBarSpacing=n.m_nEspacement,t=this.getAxisRendererForType(EAxisType.X),i=t.getGraduationSize(t.getAxisSize(this.m_rectAxis)),i-2*this.m_nBarSpacing<IWDChartConstant.BAR_MIN_WIDTH&&(this.m_nBarSpacing=IWDChartConstant.BAR_MIN_SPACING),i-=2*this.m_nBarSpacing,this.m_nBarWidth=n.isStackedBarChart()?i:Math.max(1,Math.floor(i/this.m_oModele.m_tabSeries.length)),t.m_dStep!=1){r=t.m_dStep;switch(this.m_timeScale){case ETimeScale.DATE:u=Math.round(r/864e5);this.m_nBarWidth=Math.round(this.m_nBarWidth/u);break;case ETimeScale.TIME:f=Math.round(r/36e5);this.m_nBarWidth=Math.round(this.m_nBarWidth/f);break;case ETimeScale.NONE:this.m_nBarWidth=this.m_nBarWidth/Math.round(r)}this.m_nBarWidth=Math.max(1,this.m_nBarWidth)}return!0}return!1};WDBarChartRenderer.prototype.createBarGradient=function(n,t){var i={couleurDebut:n,couleurFin:clWDUtil.sCouleurHTMLPlusBrillante(n),spreadMethod:"pad"};switch(t){case IWDChartConstant.FLAG_VERTICAL_GRADIENT:i.bVertical=!0;break;case IWDChartConstant.FLAG_HORIZONTAL_GRADIENT:i.bVertical=!1;break;default:return null}return i};WDBarChartRenderer.prototype.getBarBorderColor=function(n,t){return t.isBorderColorAuto()?clWDUtil.sCouleurHTMLPlusBrillante(n):t.m_sCouleurBordure};WDBarChartRenderer.prototype.drawSeries=function(n,t,i,r,u){var kt=u.m_bAxeXHorizontal?this.m_oModele.getAxisByType(EAxisType.X):this.m_oModele.getAxisByType(EAxisType.Y),ut=r.getNbValues(),y=u.isStackedBarChart(),dt=this.m_oModele.m_tabSeries.length,ht=i,ct,gt,v,f,vt,wt,it,rt,nt,b,w,st;if(this.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasCommencee()||(t.empty(),nt=n.findFromId(n.m_domBaliseSVG,"barre-texte"),nt.length&&(b=n.findFromId(nt,"barre-texte-"+i),b.length&&b.empty())),y)for(v=0;v<dt;++v)ut=Math.max(this.m_oModele.m_tabSeries[v].getNbValues(),ut);if(ct=this.getDrawnValuesCount(ut,kt),ct!=0){y&&this.m_tabCumulatedValues===undefined&&(this.m_tabCumulatedValues=[]);var lt=this.m_oModele.getSeriesColor(i),ri=this.getBarBorderColor(lt,u),ui=this.createBarGradient(lt,u.getGradientType()),o=0,ft,et=u.isDisplayValuesLabel()&&!this.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasFinie();et&&(ft=this.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasFinie()?"999 999 999":u.m_sMasqueValeur,gt=WDPaintCSS.oGetInfoCSS(u.m_sClasseLibelle,"0","fontSize"),o=parseInt10(gt.fontSize));var ni=u.m_bAfficheSiNulle,at=r.isOnSecondaryAxis(),fi=u.m_bAxeXHorizontal?this.getYOriginValue(at):this.getXOriginValue(at),e=this.getFirstDrawnCategoryIndex(kt);for(v=0;v<ct;++v,++e)if(!(e<0)){if(e>=ut)break;f=r.getValueAt(e);vt=r.getValueAtWithNull(e)===undefined;f=this.m_oGraphe.m_oVue.m_oAnimator.tweenValue(t,f,e,i);this.getBarRect(this.m_barRect,f,ht,e,fi,y,at,u);var p=this.m_barRect.getLeft(),s=this.m_barRect.getTop(),h=this.m_barRect.getWidth(),c=this.m_barRect.getHeight(),yt=n.rect(t,"series-"+i+"-barre-"+e),tt=1;if(h>0&&c>0){et&&n.clipRect(this.m_rectAxis,"clip-axes");var ot=lt,pt=ri,k=ui,ti=this.m_oModele.getCategoryColor(e,!0);ti&&(ot=ti,pt=this.getBarBorderColor(ot,u),k=this.createBarGradient(ot,u.getGradientType()));k?this.m_oPaint.setLinearGradient(p,s,h,c,k.couleurDebut,k.couleurFin,k.spreadMethod,k.bVertical):this.m_oPaint.setFill(ot);wt=this.m_params.byGetAlpha();wt<255?this.m_oPaint.setFillOpacity255(wt):this.m_oPaint.setFillOpacity255(255);this.m_oPaint.setStroke(pt,tt);tt>0&&pt&&(!y||ht>0&&e<this.m_tabCumulatedValues.length)&&(it=0,(y?this.m_tabCumulatedValues[e]:f)>0?it=1:y&&(it=-1),it!=0&&(rt=tt*it/2,u.m_bAxeXHorizontal?(s+=rt,c-=rt):(p+=rt,h-=rt)));n.drawRect(yt,new WDRect(p,s,p+h,s+c),this.m_oPaint);yt.data("wbGrfGrInfoXY",[i,v,f]);et&&n.restoreClip()}else yt.remove();if(nt=n.g(t.parent().parent(),"barre-texte"),b=n.g(nt,"barre-texte-"+i),et){this.m_oPaint.addClasse(u.m_sClasseValeur);var st=n.text(b,"barre-"+i+"-texte-"+e),l,a,d,g=Align.CENTER,bt=!0,ii=!0;(u.m_bAxeXHorizontal?f>=0&&this.m_rectAxis.m_nTop-this.m_barRect.m_nTop>1||f<0&&this.m_barRect.m_nBottom-this.m_rectAxis.m_nBottom>1:f>=0&&this.m_barRect.m_nRight-this.m_rectAxis.m_nRight>1||f<0&&this.m_rectAxis.m_nLeft-this.m_barRect.m_nLeft>1)?bt=!1:(u.m_bAxeXHorizontal?c-2*tt<=o:h-2*tt<=o)&&(ii=!1);y?(w=this.m_tabCumulatedValues[e],bt&&(ii||vt&&ni)&&(d=WDChartUtils.formatValue(w>0?Math.abs(f):Math.abs(f)*-1,ft,!0),l=s+(c-o)/2,a=p+h/2,this.m_oPaint.m_oStyle["pointer-events"]="none",n.drawText(st,d,o,a,l,g,this.m_oPaint)),ht==dt-1&&(this.m_oPaint.addClasse(u.m_sClasseValeur),st=n.text(b,"barre-"+i+"-texte-total-"+e),d=WDChartUtils.formatValue(w,ft,!0),l=w<0?s+c:s-o,a=p+h/2,u.m_bAxeXHorizontal?l+=w<0?IWDChartConstant.MARGIN_LABEL:-IWDChartConstant.MARGIN_LABEL:(l=s+(c-o)/2,a+=(w<0?-1:1)*(h/2+IWDChartConstant.MARGIN_LABEL),g=w<0?Align.RIGHT:Align.LEFT),this.m_oPaint.m_oStyle["pointer-events"]="none",n.drawText(st,d,o,a,l,g,this.m_oPaint))):bt&&(!vt||ni)&&(d=WDChartUtils.formatValue(f,ft,!0),l=f<0?s+c+IWDChartConstant.MARGIN_LABEL:s-o-IWDChartConstant.MARGIN_LABEL,a=p+h/2,u.m_bAxeXHorizontal||(f<0?(l=s+c/2-o/2,a-=IWDChartConstant.MARGIN_LABEL+h/2,g=Align.RIGHT):(l=s+c/2-o/2,a+=IWDChartConstant.MARGIN_LABEL+h/2,g=Align.LEFT)),this.m_oPaint.m_oStyle["pointer-events"]="none",n.drawText(st,d,o,a,l,g,this.m_oPaint))}}}};WDBarChartRenderer.prototype.getBarRect=function(n,t,i,r,u,f,e,o){var a=this.dGetYPixelsPerUnit(e),c=Math.ceil((t>0?Math.max(0,t-u):Math.abs(t))*a),l=0,h=0,s;o.m_bAxeXHorizontal?l=this.getCategoryDrawingPositionX(r,e)+this.m_nBarSpacing:(h=this.getCategoryDrawingPositionY(r,e)-this.m_nBarSpacing,f&&(h-=this.m_nBarWidth));f?(s=0,i>0&&r<this.m_tabCumulatedValues.length?(s=this.m_tabCumulatedValues[r],s>0?(o.m_bAxeXHorizontal?h=this.nGetYOrigin(e)-Math.ceil(Math.max(0,s-u)*a)-c:l=this.nGetXOrigin(e)+Math.ceil(Math.max(0,s-u)*a),s+=Math.abs(t)):s<0?(o.m_bAxeXHorizontal?h=this.nGetYOrigin(e)+Math.ceil(Math.abs(s)*a):l=this.nGetXOrigin(e)-Math.ceil(Math.abs(s)*a)-c,s-=Math.abs(t)):(s=t,o.m_bAxeXHorizontal?h=t>0?this.nGetYOrigin(e)-c:this.nGetYOrigin(e):l=t<0?this.nGetXOrigin(e)-c:this.nGetXOrigin(e))):(s=t,o.m_bAxeXHorizontal?h=t>0?this.nGetYOrigin(e)-c:this.nGetYOrigin(e):l=t<0?this.nGetXOrigin(e)-c:this.nGetXOrigin(e)),this.m_tabCumulatedValues[r]=s):o.m_bAxeXHorizontal?(l+=this.m_nBarWidth*i,h=t>0?this.nGetYOrigin(e)-c:this.nGetYOrigin(e)):(h-=this.m_nBarWidth*i,h-=this.m_nBarWidth,l=t>0?this.nGetXOrigin(e):this.nGetXOrigin(e)-c);o.m_bAxeXHorizontal?n.setSizeAndLocation(l,h,this.m_nBarWidth,c):n.setSizeAndLocation(l,h,c,this.m_nBarWidth)};WDBarChartAxisRenderer.prototype=new WDChartAxisRenderer;WDBarChartAxisRenderer.prototype.constructor=WDBarChartAxisRenderer;WDBarChartAxisRenderer.prototype.constructor=WDBarChartAxisRenderer;WDBarChartAxisRenderer.prototype.isDrawLabelsBetweenGraduations=function(){var n=this.m_axis.m_type;return this.m_dStep==1&&(n==EAxisType.X||n==EAxisType.X2)};WDBarChartAxisRenderer.prototype.prepare=function(n,t,i){var o,s,r,u;if(WDChartAxisRenderer.prototype.prepare.apply(this,arguments),n.isYAxis()&&t.isDisplayValuesLabel()){var f=n.m_dMinValue,e=n.m_dMaxValue,h=WDPaintCSS.oGetInfoCSS(t.m_sClasseLibelle,Math.abs(f)>Math.abs(e)?f:e,["lineHeight","width"]),c=parseInt10(h.lineHeight),l=parseInt10(h.width),a=this.getGraduationSize(this.getAxisSize(i));e>0&&(o=(this.m_nNbPositiveGraduations-1)*a,n.m_orientation==EAxisOrientation.HORIZONTAL?(r=Math.ceil(e*this.getPixelsPerUnit(i))+l,r>o&&(this.m_dRightOverflow+=r-o)):(u=Math.ceil(e*this.getPixelsPerUnit(i))+c,u>o&&(this.m_dTopOverflow+=u-o)));f<0&&(s=this.m_nNbNegativeGraduations*a,n.m_orientation==EAxisOrientation.HORIZONTAL?(r=Math.ceil(Math.abs(f)*this.getPixelsPerUnit(i))+l,r>s&&(this.m_dLeftOverflow+=r-s)):(u=Math.ceil(Math.abs(f)*this.getPixelsPerUnit(i))+c,u>s&&(this.m_dBottomOverflow+=u-s)))}};WDWaterfallChartRenderer.prototype=new WDBarChartRenderer;WDWaterfallChartRenderer.prototype.constructor=WDWaterfallChartRenderer;WDWaterfallChartRenderer.bParametresSupportes=function(){return!1};WDWaterfallChartRenderer.prototype.drawSeries=function(n,t,i,r,u){var lt=u.m_bAxeXHorizontal?this.m_oModele.getAxisByType(EAxisType.X):this.m_oModele.getAxisByType(EAxisType.Y),at=r.getNbValues(),vt=i,rt,pt,d,f,o,g,s,ot,st,b,nt,k;if(!(vt>0)&&(this.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasCommencee()||t.empty(),rt=this.getDrawnValuesCount(at,lt),rt!=0)){var kt=this.m_oModele.getSeriesColor(i),a=0,yt,ut=u.isDisplayValuesLabel()&&!this.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasFinie();ut&&(yt=this.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasFinie()?"999 999 999":u.m_sMasqueValeur,pt=WDPaintCSS.oGetInfoCSS(u.m_sClasseLibelle,"0","fontSize"),a=parseInt10(pt.fontSize));var ft=r.isOnSecondaryAxis(),dt=u.m_bAxeXHorizontal?this.getYOriginValue(ft):this.getXOriginValue(ft),e=this.getFirstDrawnCategoryIndex(lt),y=0,p=0;for(d=0;d<rt;++d,++e)if(!(e<0)){if(e>=at)break;f=r.getValueAt(e);o=undefined;o=e===0?ETypeCategorieWaterfall.eWaterfallTotal:this.m_oModele.getWaterfallTypeCategorie(e);o===undefined&&(o=f>0?ETypeCategorieWaterfall.eWaterfallPositif:ETypeCategorieWaterfall.eWaterfallNegatif);g=!1;o==ETypeCategorieWaterfall.eWaterfallSousTotal?(f=p,g=!0):o==ETypeCategorieWaterfall.eWaterfallTotal&&e>0&&(f=y,g=!0);f=this.m_oGraphe.m_oVue.m_oAnimator.tweenValue(t,f,e,i);this.getBarRect(this.m_barRect,f,vt,e,dt,y,ft,u,g);o==ETypeCategorieWaterfall.eWaterfallTotal?e>0?(p=0,y=0):(p=0,y=f):o==ETypeCategorieWaterfall.eWaterfallSousTotal?p=0:(y+=f,p+=f);var w=this.m_barRect.getLeft(),h=this.m_barRect.getTop(),l=this.m_barRect.getWidth(),c=this.m_barRect.getHeight();if(ut&&n.clipRect(this.m_rectAxis,"clip-axes"),l>0&&c>0){s=kt;this.m_oModele.m_tabCouleursWaterfall[o-1]&&(s=this.m_oModele.m_tabCouleursWaterfall[o-1]);var et=this.getBarBorderColor(s,u),v=this.createBarGradient(s,u.getGradientType()),wt=this.m_oModele.getCategoryColor(e,!0);wt&&(s=wt,et=this.getBarBorderColor(s,u),v=this.createBarGradient(s,u.getGradientType()));ot=n.rect(t,"series-"+i+"-barre-"+e);v?this.m_oPaint.setLinearGradient(w,h,l,c,v.couleurDebut,v.couleurFin,v.spreadMethod,v.bVertical):this.m_oPaint.setFill(s);st=this.m_params.byGetAlpha();st<255?this.m_oPaint.setFillOpacity255(st):this.m_oPaint.setFillOpacity255(255);b=1;this.m_oPaint.setStroke(et,b);b>0&&et&&(nt=0,f>0&&(nt=1),nt!=0&&(k=b*nt/2,u.m_bAxeXHorizontal?(h+=k,c-=k):(w+=k,l-=k)));ot.data("wbGrfGrInfoXY",[i,d,f]).data("wbGrfDrawMire",{valeur:f,couleur:s});n.drawRect(ot,new WDRect(w,h,w+l,h+c),this.m_oPaint)}if(ut){n.restoreClip();this.m_oPaint.addClasse(u.m_sClasseValeur);var gt=n.text(t,"barre-"+i+"-texte-"+e),tt,it,bt,ht=Align.CENTER,ct=!0;f>=0&&this.m_rectAxis.m_nTop-this.m_barRect.m_nTop>1||f<0&&this.m_barRect.m_nBottom-this.m_rectAxis.m_nBottom>1?ct=!1:c-2*b<=a&&(ct=!1);ct&&(bt=WDChartUtils.formatValue(f,yt,!0),tt=f<0?h+c+IWDChartConstant.MARGIN_LABEL:h-a-IWDChartConstant.MARGIN_LABEL,it=w+l/2,u.m_bAxeXHorizontal||(f<0?(tt=h+c/2-a/2,it-=IWDChartConstant.MARGIN_LABEL+l/2,ht=Align.RIGHT):(tt=h+c/2-a/2,it+=IWDChartConstant.MARGIN_LABEL+l/2,ht=Align.LEFT)),this.m_oPaint.m_oStyle["pointer-events"]="none",n.drawText(gt,bt,a,it,tt,ht,this.m_oPaint))}}}};WDWaterfallChartRenderer.prototype.getBarRect=function(n,t,i,r,u,f,e,o,s){s&&(t=-t);var a=this.dGetYPixelsPerUnit(e),c=Math.ceil((t>0?Math.max(0,t-u):Math.abs(t))*a),v=Math.ceil((f>0?Math.max(0,f-u):-Math.abs(f))*a),l=0,h=0;o.m_bAxeXHorizontal&&(l=this.getCategoryDrawingPositionX(r,e)+this.m_nBarSpacing);o.m_bAxeXHorizontal&&(h=this.nGetYOrigin(e)-v,t>0&&(h-=c));o.m_bAxeXHorizontal?n.setSizeAndLocation(l,h,this.m_nBarWidth,c):n.setSizeAndLocation(l,h,c,this.m_nBarWidth)};WDLineChartRenderer.bParametresSupportes=function(n,t){return WDXYChartRenderer.bParametresSupportes(n,t)?!0:!1};WDLineChartRenderer.prototype=new WDXYChartRenderer;WDLineChartRenderer.prototype.constructor=WDLineChartRenderer;WDLineChartRenderer.prototype.createAxisRenderer=function(){return new WDLineChartAxisRenderer(this)};WDLineChartRenderer.prototype.isClipOnAxisRectBeforeDrawingChart=function(){return!0};WDLineChartRenderer.prototype.drawSeries=function(n,t,i,r,u){var c=this.m_oModele.getAxisByType(EAxisType.X),l=r.getNbValues(),h=this.getDrawnValuesCount(l,c),s,f,v,y;if(h!=0){var e=[],a=r.isOnSecondaryAxis(),p=this.getYOriginValue(a),o=this.getFirstDrawnCategoryIndex(c);for(s=0;s<h;++s,++o)if(!(o<0)){if(o>=l)break;if(f=r.getValueAtWithNull(o),f===undefined||f===null)switch(u.m_eDessinValeurNulle){case eDESSINVALEURNULLE.eValeurNulleIgnoree:continue;case eDESSINVALEURNULLE.eValeurNulleAZero:f=0;break;case eDESSINVALEURNULLE.eValeurNulleNonDessinee:s>0&&s<h-1&&e.push(IWDChartConstant.SPECIAL_VALUE);continue}f=this.m_oGraphe.m_oVue.m_oAnimator.tweenValue(t,f,o,i);v=this.getValueDrawingPosition(f,p,o,a);e.push(v)}y=e.length;y>=2&&(this.drawLineBackground(n,t,i,r,e,u),this.drawLine(n,t,i,r,e,u),this.drawPoints(n,t,i,r,e,u))}};WDLineChartRenderer.prototype.createLineBackgroundGradient=function(n,t){var i={couleurDebut:n,couleurFin:clWDUtil.sCouleurHTMLPlusBrillante(n),spreadMethod:"pad"};switch(t){case IWDChartConstant.FLAG_VERTICAL_GRADIENT:i.bVertical=!0;break;case IWDChartConstant.FLAG_HORIZONTAL_GRADIENT:i.bVertical=!1;break;default:return null}return i};WDLineChartRenderer.prototype.drawLineBackground=function(n,t,i,r,u,f,e){var h=n.g(t,"groupe-area-"+i),y,o,l;if(f.getType()!=WDChartParameters.kAire)return h.children().length>0&&(n.m_oGraphe.m_oModele.m_oParametres.m_nDureeAnimation>0?h.fadeTo(n.m_oGraphe.m_oModele.m_oParametres.m_nDureeAnimation,0,"swing",function(){$(this).empty()}):h.empty()),!1;var p=this.m_oModele.getSeriesColor(i),a=f.byGetAlpha(),c=this.createLineBackgroundGradient(p,f.getGradientType());c?this.m_oPaint.setLinearGradient(0,0,1,1,c.couleurDebut,c.couleurFin,c.spreadMethod,c.bVertical,1,a/255):(this.m_oPaint.setFill(clWDUtil.sCouleurHTMLPlusBrillante(p)),a<255?this.m_oPaint.setFillOpacity255(a):this.m_oPaint.setFillOpacity255(255));var v=0,w=0,e=new Path,s=r.isOnSecondaryAxis();for(this.m_params.m_bSpline?u=[{x:this.nGetXOrigin(s),y:this.nGetYOrigin(s)}].concat(u):e.moveTo(this.nGetXOrigin(s),this.nGetYOrigin(s)),y=u.length,o=0;o<y;o++){if(!clWDUtil.isObject(u[o])&&u[o]===IWDChartConstant.SPECIAL_VALUE){o>0&&(e.lineTo(u[o-1].x,this.nGetYOrigin(s)),e.close());l=n.path(h,"serie-area-special-"+o);n.drawPath(l,e.toD(),this.m_oPaint);e.rewind();o+1<y&&e.moveTo(u[o+1].x,this.nGetYOrigin(s));continue}v=u[o].x;w=u[o].y;this.m_params.m_bSpline?this.getPointSpline(e,u,u[o],o):e.lineTo(v,w)}return e.lineTo(v,this.nGetYOrigin(s)),e.close(),this.m_params.m_bSpline?this.m_oPaint.setStrokeOption("linejoin","round"):this.m_oPaint.setStrokeOption("linejoin","miter"),l=n.path(h,"serie-area-"+i),n.drawPath(l,e.toD(),this.m_oPaint),!0};WDLineChartRenderer.prototype.drawLine=function(n,t,i,r,u){var v=this.m_oModele.getSeriesColor(i),o=new Path,c=r.isOnSecondaryAxis(),h,f,e,l,a,s;for(this.m_params.m_bSpline?u=[{x:this.nGetXOrigin(c),y:this.nGetYOrigin(c)}].concat(u):o.moveTo(u[0].x,u[0].y),h=u.length,f=0;f<h;++f){if(!clWDUtil.isObject(u[f])&&u[f]===IWDChartConstant.SPECIAL_VALUE){for(e=1;f+e<h;){if(!clWDUtil.isObject(u[f+e])&&u[f+e]===IWDChartConstant.SPECIAL_VALUE){++e;continue}o.moveTo(u[f+e].x,u[f+e].y);break}continue}l=u[f].x;a=u[f].y;this.m_params.m_bSpline?this.getPointSpline(o,u,u[f],f):o.lineTo(l,a)}this.m_oPaint.setStroke(v,r.m_nEpaisseur);this.m_params.m_bSpline?this.m_oPaint.setStrokeOption("linejoin","round"):this.m_oPaint.setStrokeOption("linejoin","miter");s=n.path(t,"serie-line-"+i);u=!this.m_params.m_bSpline?u:u.slice(1);s.data("wbGrfSeriePoints",u);n.drawPath(s,o.toD(),this.m_oPaint);s.data("wbGrfGrInfoXY",[i,function(n,t,i){for(var f=u.length<2?10:Math.abs(u[0].x-u[1].x)/2,e=u.length<2?10:Math.abs(u[0].y-u[1].y)/2,r=0;r<u.length;++r)if(Math.abs(u[r].x-t)<f&&Math.abs(u[r].y-i)<e)return r},function(n){return this.m_oModele.m_tabSeries[n.data("wbGrfGrInfoXY")[IWDChartConstant.GR_SERIE]].getValueAt(n.data("wbGrfGrInfoXY")[IWDChartConstant.GR_CATEGORIE].apply(this,arguments))}])};WDLineChartRenderer.prototype.getPointSpline=function(n,t,i,r){var h=2.5,a=h+1,s=i.x,u=i.y,o=t[r-1],p=t[r+1],w,e,v,f,y;if(o&&p){var k=o.x,c=o.y,d=p.x,l=p.y,b;w=(h*s+k)/a;e=(h*u+c)/a;v=(h*s+d)/a;f=(h*u+l)/a;b=(f-e)*(v-s)/(v-w)+u-f;e+=b;f+=b;e>c&&e>u?(e=Math.max(c,u),f=2*u-e):e<c&&e<u&&(e=Math.min(c,u),f=2*u-e);f>l&&f>u?(f=Math.max(l,u),e=2*u-f):f<l&&f<u&&(f=Math.min(l,u),e=2*u-f);i.rightContX=v;i.rightContY=f}return r?(y=["C",o.rightContX||o.x,o.rightContY||o.y,w||s,e||u,s,u],o.rightContX=o.rightContY=null):y=["M",s,u],n&&n.add(y.join(" ")),y};WDLineChartRenderer.prototype.drawPoints=function(n,t,i,r,u,f){for(var c,l,w,nt,tt,a,it,rt,et,d,v=r.m_eTypePoint,y=f.isDisplayValuesLabel(),b=u.length,h=0,p=0;(!y||v==EPointStyle.NONE)&&h<b;h++,p++)c="series-"+i+"-point-"+h,y||(l=n.findFromId(t,c+"-texte"),l&&l.length>0&&l.remove()),v==EPointStyle.NONE&&(w=n.findFromId(t,c),w&&w.length>0&&w.remove());if(y||v!=EPointStyle.NONE){var ot=f.m_sMasqueValeur,g=this.m_oModele.getSeriesColor(i),e=f.m_nTaillePt;for(h=0,p=0;h<b;h++,p++)if(y&&this.m_oPaint.addClasse(f.m_sClasseValeur),v!=EPointStyle.NONE&&(e>1&&(nt=clWDUtil.sCouleurHTMLPlusBrillante(g),this.m_oPaint.setFill(nt)),this.m_oPaint.setStroke(g,r.m_nEpaisseur)),clWDUtil.isObject(u[h])||u[h]!==IWDChartConstant.SPECIAL_VALUE){var o=u[h].x,s=u[h].y,c="series-"+i+"-point-"+h;switch(v){case EPointStyle.NONE:break;default:case EPointStyle.CIRCLE:tt=n.circle(t,c);n.drawCircle(tt,o,s,e,this.m_oPaint);break;case EPointStyle.CROSS:a=new Path;a.moveTo(o-e,s-e);a.lineTo(o+e,s+e);a.moveTo(o-e,s+e);a.lineTo(o+e,s-e);it=n.path(t,c);n.drawPath(it,a.toD(),this.m_oPaint);break;case EPointStyle.DIAMOND:rt=n.polygon(t,c);n.drawPolygon(rt,[[o,s-e],[o+e,s],[o,s+e],[o-e,s],[o,s-e]],this.m_oPaint);break;case EPointStyle.SQUARE:var ut=o-e,ft=s-e,st=n.rect(t,c);n.drawRect(st,new WDRect(ut,ft,ut+2*e,ft+2*e),this.m_oPaint);break;case EPointStyle.TRIANGLE:et=n.polygon(t,c);n.drawPolygon(et,[[o,s-e],[o+e,s+e],[o-e,s+e],[o,s-e]],this.m_oPaint)}if(y){var ht=r.getValueAt(p),k=WDChartUtils.formatValue(ht,ot,!0),l=n.text(t,c+"-texte");this.m_oPaint.addClasse(f.m_sClasseLibelle);oStyle=WDPaintCSS.oGetInfoCSS(this.m_oPaint,k,"lineHeight");d=Math.ceil(parseInt10(oStyle.lineHeight));h>=b-1?n.drawText(l,k,d,o-e-1,s+e+1,Align.RIGHT,this.m_oPaint):n.drawText(l,k,d,o+e+1,s+e+1,Align.LEFT,this.m_oPaint)}}}};Path.prototype.constructor=Path;Path.prototype.add=function(n){this.d&&(this.d+=" ");this.d+=n};Path.prototype.moveTo=function(n,t){this.add("M "+n+" "+t)};Path.prototype.lineTo=function(n,t){this.add("L "+n+" "+t)};Path.prototype.toD=function(){return this.d};Path.prototype.close=function(){this.add("Z")};Path.prototype.rewind=function(){this.d=""};WDLineChartRenderer.prototype.getValueDrawingPosition=function(n,t,i,r){var u=this.getCategoryDrawingPositionX(i,r),f=this.dGetYPixelsPerUnit(r),e=this.nGetYOrigin(r)-Math.ceil((n-t)*f);return{x:u,y:e}};WDChartAxisRenderer.prototype.constructor=WDChartAxisRenderer;WDChartAxisRenderer.prototype.getAxisSize=function(n){return this.m_axis.m_orientation==EAxisOrientation.HORIZONTAL?n.getWidth():n.getHeight()};WDChartAxisRenderer.prototype.getAxisStep=function(n,t,i,r){if(n==0)return 1;var f=Math.ceil(Math.log10(t/(5*n))),u=Math.pow(10,f);if(u*n<=t&&(u=2*u*n>t?2*u:5*u*n>t?5*u:10*u),i)switch(r){case ETimeScale.DATE:u=WDMathUtils.roundToMultiple(u,864e5);break;case ETimeScale.TIME:u=WDMathUtils.roundToMultiple(u,36e5);break;case ETimeScale.NONE:default:u=Math.ceil(u)}return u};WDChartAxisRenderer.prototype.getNbGraduations=function(){return this.m_nNbPositiveGraduations+this.m_nNbNegativeGraduations};WDChartAxisRenderer.prototype.getGraduationSize=function(n){var t=this.getNbGraduations();return t<=1?n:n/(t-1)};WDChartAxisRenderer.prototype.prepare=function(n,t,i,r,u){var p,rt,ut,w,ft,f,k,d,lt,g,ot,nt,c,l,ct,at,tt;this.m_axis=n;var it=this.getAxisSize(i),v=0,y=0;u!=ETimeScale.NONE?(p=n.m_oModele.m_oCategories,p.getNbValues()>0&&(v=p.getMinValueInMillis(),y=p.getMaxValueInMillis())):(v=this.m_axis.m_dMinValue,y=this.m_axis.m_dMaxValue);rt=0;rt=this.m_axis.isXAxis()?t.getAxisLabelOrientation(this.m_axis)==WDChartParameters.eOrientationVerticale?IWDChartConstant.GRADUATION_MIN_SIZE_X_VERTICAL:IWDChartConstant.GRADUATION_MIN_SIZE_X_HORIZONTAL:IWDChartConstant.GRADUATION_MIN_SIZE_Y;ut=0;w=y-v;w>0&&(ut=it/w);this.m_dStep=t.getAxisStep(this.m_axis);ft=this.m_axis.isDisplayDecimalValues(t);(this.m_dStep==IWDChartConstant.DEFAULT_VALUE||u!=ETimeScale.NONE)&&(this.m_dStep=this.getAxisStep(ut,rt,!ft,u));var e=0,o=0,b=0,et=this.isDrawLabelsBetweenGraduations();if(this.m_dStep!=0?(o=Math.floor(v/this.m_dStep)*this.m_dStep,b=Math.ceil(y/this.m_dStep)*this.m_dStep,o<0?(this.m_nNbNegativeGraduations=Math.abs(o)/this.m_dStep,this.m_nNbPositiveGraduations=b>=0?Math.ceil(b/this.m_dStep)+1:1,this.m_axis.m_dOriginValue=0):(this.m_nNbNegativeGraduations=0,this.m_nNbPositiveGraduations=Math.ceil((b-o)/this.m_dStep)+1,this.m_axis.m_dOriginValue=o),et&&this.m_nNbPositiveGraduations++):(this.m_nNbNegativeGraduations=this.m_nNbPositiveGraduations=0,this.m_axis.m_dOriginValue=0),e=this.getNbGraduations(),this.m_tabGraduationLabels=[],f=0,this.m_axis.isDisplayCategories()){k=this.m_axis.m_oModele;switch(u){case ETimeScale.DATE:case ETimeScale.TIME:for(d=k.getCategoryIndexForTime(Math.floor(this.m_axis.m_dOriginValue)),lt=k.m_oCategories.getMinValueInMillis(),f=0;f<e;++f)g=new Date,g.setTime(lt+(f*this.m_dStep+d)),this.m_tabGraduationLabels[f]=u==ETimeScale.TIME?clWDUtil.sHeureVersChaine(clWDUtil.sGetDateHeureWL(g,!1,!1,!0),"HH:MM:SS:CC"):clWDUtil.sDateVersChaine(clWDUtil.sGetDateHeureWL(g,!1,!0,!1),"DD/MM/YYYY");break;default:case ETimeScale.NONE:for(d=Math.floor(this.m_axis.m_dOriginValue),f=0;f<e;++f)this.m_tabGraduationLabels[f]=k.getCategoryLabelAt(f*this.m_dStep+d)}}else for(ot=this.m_axis.isYAxis()?t.m_sMasqueAxes:undefined,nt=o,f=0;f<e;++f)this.m_tabGraduationLabels[f]=ot?WDChartUtils.formatValue(nt,ot,ft):nt,nt+=this.m_dStep;if(e<=0){this.m_dTopOverflow=this.m_dLeftOverflow=this.m_dRightOverflow=this.m_dBottomOverflow=0;return}var a=[],st=WDPaintCSS.oGetInfoCSS(t.m_sClasseLibelle,"0",["lineHeight","width"]),s=parseInt10(st.lineHeight),h=0,ht=0;for(f=0;f<e;++f)c=this.m_tabGraduationLabels[f],c===undefined&&(c=""),l=0,isNaN(parseInt10(c))&&!clWDUtil.bEstChaineNonVide(c)||(st=WDPaintCSS.oGetInfoCSS(t.m_sClasseLibelle,c,"width"),l=st.width),l>h&&(h=l),a[f]=l,f>0&&(ht+=IWDChartConstant.MARGIN_HORIZONTAL_GRADUATION_LABEL),ht+=l;ct=t.getAxisLabelOrientation(this.m_axis);ct==WDChartParameters.eOrientationDefaut?this.m_axis.m_orientation==EAxisOrientation.HORIZONTAL?(at=this.getGraduationSize(it),this.m_bVerticalOrientationLabel=h+h/10>at||ht>it):this.m_bVerticalOrientationLabel=!1:this.m_bVerticalOrientationLabel=ct==WDChartParameters.eOrientationVerticale;t.isAxisVisible(this.m_axis)?this.m_axis.m_orientation==EAxisOrientation.HORIZONTAL&&this.m_tabGraduationLabels.join("").length>0?(this.m_dLeftOverflow=this.m_bVerticalOrientationLabel?s/2:a[0]/2,this.m_dRightOverflow=this.m_bVerticalOrientationLabel?s/2:a[Math.max(0,e-(et?2:1))]/2,this.m_dBottomOverflow=this.m_bVerticalOrientationLabel?h:s,this.m_dBottomOverflow+=IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL,this.m_dTopOverflow=0,this.m_axis.isSecondaryAxis()&&(tt=this.m_dBottomOverflow,this.m_dBottomOverflow=this.m_dTopOverflow,this.m_dTopOverflow=tt)):this.m_axis.m_orientation==EAxisOrientation.VERTICAL&&(this.m_dTopOverflow=this.m_bVerticalOrientationLabel?a[Math.max(0,e-(et?2:1))]/2:s/2,this.m_dBottomOverflow=this.m_bVerticalOrientationLabel?a[0]/2:s/2,this.m_dLeftOverflow=this.m_bVerticalOrientationLabel?s:h,this.m_dBottomOverflow+=IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL,this.m_dRightOverflow=0,this.m_axis.isSecondaryAxis()&&(tt=this.m_dLeftOverflow,this.m_dLeftOverflow=this.m_dRightOverflow,this.m_dRightOverflow=tt)):this.m_dTopOverflow=this.m_dLeftOverflow=this.m_dRightOverflow=this.m_dBottomOverflow=0};WDChartAxisRenderer.prototype.getPixelsPerUnit=function(n){return this.m_dStep==0?0:this.getGraduationSize(this.getAxisSize(n))/this.m_dStep};WDChartAxisRenderer.prototype.draw=function(n,t,i,r,u,f,e,o){var c=0,d,g,s,h,tt,at,vt,nt,a,b,ct,pt,w,k,l,it,ot,v,lt,p;if(this.m_axis){d=Align.LEFT;g=i.getAxisTitle(this.m_axis);g&&(nt=WDPaintCSS.oGetInfoCSS(i.m_sClasseAxe,g,"lineHeight"),tt=parseInt10(nt.lineHeight),this.m_axis.m_orientation==EAxisOrientation.HORIZONTAL?(s=u.getLeft()+u.getWidth()/2,d=Align.CENTER,h=this.m_axis.isSecondaryAxis()?r.getTop():r.getBottom()-tt,at=n.text(t,"axe-titre-horiz"),o.addClasse(i.m_sClasseAxe),n.drawText(at,g,tt,s,h,d,o,!1)):(h=u.getTop()+u.getHeight()/2,d=Align.CENTER,s=this.m_axis.isSecondaryAxis()?r.getRight()-tt:r.getLeft(),vt=n.text(t,"axe-titre-horiz"),o.addClasse(i.m_sClasseAxe),n.drawTextVertically(vt,g,tt,s,h,d,o,!1)));var ut=i.m_sCouleurAxe,st=this.getNbGraduations(),ft=this.getAxisSize(u),yt=this.isDrawLabelsBetweenGraduations(),ht=this.m_tabGraduationLabels.length;if(nt=WDPaintCSS.oGetInfoCSS(i.m_sClasseLibelle,"Ap","lineHeight"),a=parseInt10(nt.lineHeight),this.m_axis.m_orientation==EAxisOrientation.HORIZONTAL){var s=u.getLeft(),y=this.getGraduationSize(ft),h=this.m_axis.isSecondaryAxis()?u.getTop():e,et=n.line(t,"axe-horiz"+(this.m_axis.isSecondaryAxis()?"-2":""));for(o.setStroke(ut),n.SetAntiAliasing(!1,et),n.drawLine(et,s,h,s+ft,h,o,!1),b=s,c=0;c<st;++c){if(c>0&&Math.abs(s-b)<=5+a){s+=y;continue}b=s;k=n.line(t,"axe-graduation-horiz-"+c);o.setStroke(ut);n.SetAntiAliasing(!1,k);n.drawLine(k,s,h,s,h-IWDChartConstant.GRADUATION_TICK_SIZE,o,!1);s+=y}for(s=u.getLeft(),b=s,c=0;c<ht;++c){if(c>0&&Math.abs(s-b)<=5+a){s+=y;continue}if(b=s,l=this.m_tabGraduationLabels[c],l=l===undefined?"":""+l,it=a*l.split("\n").length,!(isNaN(parseInt10(l))&&!clWDUtil.bEstChaineNonVide(l))){if(v=s,yt&&(v+=y/2),v>u.m_nRight)break;this.m_bVerticalOrientationLabel?(w=0,this.m_axis.isSecondaryAxis()?(ct=a,l.length>1&&(pt=WDPaintCSS.oGetInfoCSS(i.m_sClasseLibelle,l.replace(/\n/g,"<br>"),"width"),ct=parseInt10(pt.width)),w=-(IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL+ct)):w=IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL,p=n.text(t,"axe-horiz-label-vert-"+c),o.addClasse(i.m_sClasseLibelle),o.m_oStyle["pointer-events"]="none",n.drawTextVertically(p,l,a,v-it/2,h+w,Align.RIGHT,o,!1)):(w=0,w=this.m_axis.isSecondaryAxis()?-(IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL+a):IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL,p=n.text(t,"axe-horiz-label-horiz-"+c),o.addClasse(i.m_sClasseLibelle),o.m_oStyle["pointer-events"]="none",n.drawText(p,l,a,v,h+w,Align.CENTER,o,!1));s+=y}}}else{var h=u.getBottom(),y=this.getGraduationSize(ft),s=this.m_axis.isSecondaryAxis()?u.getRight():f,et=n.line(t,"axe-vert"+(this.m_axis.isSecondaryAxis()?"-2":""));o.setStroke(ut);n.SetAntiAliasing(!1,et);n.drawLine(et,s,h,s,h-ft,o,!1);var nt=WDPaintCSS.oGetInfoCSS(i.m_sClasseLibelle,"0","lineHeight"),a=parseInt10(nt.lineHeight),rt=h;for(c=0;c<st;++c){if(c>0&&Math.abs(h-rt)<=5+a){h-=y;continue}rt=h;k=n.line(t,"axe-graduation-vert-"+c);o.setStroke(ut);n.SetAntiAliasing(!1,k);n.drawLine(k,s,h,s,h-IWDChartConstant.GRADUATION_TICK_SIZE,o,!1);h-=y}for(h=u.getBottom(),rt=h,c=0;c<ht;++c){if(c>0&&Math.abs(h-rt)<=5+a){h-=y;continue}rt=h;l=this.m_tabGraduationLabels[c];l=l===undefined?"":""+l;it=a*l.split("\n").length;isNaN(parseInt10(l))&&!clWDUtil.bEstChaineNonVide(l)||(ot=h,v=0,yt&&(ot-=y/2),this.m_bVerticalOrientationLabel?(v=this.m_axis.isSecondaryAxis()?s+IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL:s-it-IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL,p=n.text(t,"axe-vert-label-vert-"+c),o.addClasse(i.m_sClasseLibelle),o.m_oStyle["pointer-events"]="none",n.drawTextVertically(p,l,a,v,ot,Align.CENTER,o,!1)):(this.m_axis.isSecondaryAxis()?(lt=Align.LEFT,v=s+IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL):(lt=Align.RIGHT,v=s-IWDChartConstant.MARGIN_AXIS_GRADUATION_LABEL),p=n.text(t,"axe-vert-label-horiz-"+c),o.addClasse(i.m_sClasseLibelle),o.m_oStyle["pointer-events"]="none",n.drawText(p,l,a,v,ot-it/2,lt,o,!1)),h-=y)}}}};WDLineChartAxisRenderer.prototype=new WDChartAxisRenderer;WDLineChartAxisRenderer.prototype.constructor=WDLineChartAxisRenderer;WDLineChartAxisRenderer.prototype.isDrawLabelsBetweenGraduations=function(){return!1};EAxisType.X=0;EAxisType.X2=1;EAxisType.Y=2;EAxisType.Y2=3;EAxisOrientation.HORIZONTAL=0;EAxisOrientation.VERTICAL=1;WDChartAxis.prototype.constructor=WDChartAxis;WDChartAxis.prototype.setOriginValue=function(n){this.m_dOriginValue=n};WDChartAxis.prototype.getOriginValue=function(){return this.m_dOriginValue};WDChartAxis.prototype.isXAxis=function(){return this.m_type==EAxisType.X||this.m_type==EAxisType.X2};WDChartAxis.prototype.isYAxis=function(){return this.m_type==EAxisType.Y||this.m_type==EAxisType.Y2};WDChartAxis.prototype.isSecondaryAxis=function(){return this.m_type==EAxisType.X2||this.m_type==EAxisType.Y2};WDChartAxis.prototype.update=function(n){var u,f,i,v,h,a,e,o,c,l,t,r;if(this.m_lstData&&this.m_lstData.length!==0){u=0;f=0;switch(this.m_type){case EAxisType.X:case EAxisType.X2:u=n.getXAxisMin();f=n.getXAxisMax();break;case EAxisType.Y:u=n.getYAxisMin();f=n.getYAxisMax();break;case EAxisType.Y2:u=n.getY2AxisMin();f=n.getY2AxisMax()}if(this.m_dMinValue=u==IWDChartConstant.DEFAULT_VALUE?0:u,this.m_dMaxValue=f==IWDChartConstant.DEFAULT_VALUE?Number.NEGATIVE_INFINITY:f,u==IWDChartConstant.DEFAULT_VALUE||f==IWDChartConstant.DEFAULT_VALUE)if(this.isYAxis()&&n.getType()==WDChartParameters.kWaterfall){var r=this.m_lstData[0],a=r.getNbValues(),s=0;for(t=0;t<a;++t)e=r.getValueAt(t),s+=e,s>this.m_dMaxValue&&(this.m_dMaxValue=s),s<this.m_dMinValue&&(this.m_dMinValue=s)}else if(this.isYAxis()&&(n.getType()==WDChartParameters.kHistoEmpile||n.getType()==WDChartParameters.kHistoEmpileHorizontal||n.getType()==WDChartParameters.kWaterfall)){for(i=[],v=0,h=0;h<this.m_lstData.length;++h){for(r=this.m_lstData[h],a=r.getNbValues(),t=0;t<a;++t)e=r.getValueAt(t),v>0&&t<i.length?(o=i[t],o>0?o+=Math.abs(e):o<0?o-=Math.abs(e):o=e,i[t]=o):i[t]=e;v++}if(u==IWDChartConstant.DEFAULT_VALUE){for(t=0;t<i.length;++t)(t===0||c>i[t])&&(c=i[t]);c<this.m_dMinValue&&(this.m_dMinValue=c)}if(f==IWDChartConstant.DEFAULT_VALUE){for(t=0;t<i.length;++t)(t===0||l<i[t])&&(l=i[t]);l>this.m_dMaxValue&&(this.m_dMaxValue=l)}}else for(t=0;t<this.m_lstData.length;++t)r=this.m_lstData[t],u==IWDChartConstant.DEFAULT_VALUE&&r.getMinValue()<this.m_dMinValue&&(this.m_dMinValue=r.getMinValue()),f==IWDChartConstant.DEFAULT_VALUE&&r.getMaxValue()>this.m_dMaxValue&&(this.m_dMaxValue=r.getMaxValue())}else this.m_dMinValue=0,this.m_dMaxValue=0};WDChartAxis.prototype.isDisplayCategories=function(){return this.m_lstData!=null&&this.m_lstData.length==1&&bCompareFonctions(this.m_lstData[0].constructor,WDChartCategories.prototype.constructor)};WDChartAxis.prototype.isDisplayDecimalValues=function(n){for(var u,r,t=!1,i=0;i<this.m_lstData.length;++i)if(u=this.m_lstData[i],u.isContainDecimalValues()){t=!0;break}return t&&this.isYAxis()&&(r=n.m_sMasqueAxes,r&&!r.indexOf(".")&&(t=!1)),t};WDPieChartRenderer.nGetIndicePart=function(n,t){return parseInt10(n.getId(t).substr(n.getId(t).lastIndexOf("-")+1))};WDPieChartRenderer.bParametresSupportes=function(n,t){return WDChartRenderer.bParametresSupportes(n,t)?!t.m_bPhong?!0:!1:!1};WDPieChartRenderer.prototype=new WDChartRenderer;WDPieChartRenderer.prototype.constructor=WDPieChartRenderer;WDPieChartRenderer.prototype.m_bDessinneSelonBissectire=!0;WDPieChartRenderer.prototype.RecreerRenderer=function(n,t){t==WDChartView.ms_nDessinModifTypeGraphe?this.m_domGroupeSeries.find("text").remove():(this.m_domGroupeSeries&&this.m_domGroupeSeries.empty(),this.tabLabelRenderers=undefined)};WDPieChartRenderer.prototype.surbrillanceSerieDepuisMire=function(n,t,i,r){var e,u,f;if(i||r===!0)for(e=t,u=0;u<this.m_oGraphe.m_oModele.m_tabSeries[0].m_tabValeur.length;++u)f=Array.prototype.slice.call(arguments,0),f[1]=u,f[2]=e==u?i:!1,WDChartRenderer.prototype.surbrillanceSerieDepuisMire.apply(this,f);else WDChartRenderer.prototype.surbrillanceSerieDepuisMire.apply(this,arguments)};WDPieChartRenderer.prototype.Init=function(){WDChartRenderer.prototype.Init.apply(this,arguments);this.m_nCenterX=0;this.m_nCenterY=0;this.m_nRadius=0;this.m_dTotalValue=0};WDPieChartRenderer.prototype.ecouteLegende=function(n){return WDChartListener.bind(WDPieChartLegendListener,this.m_oGraphe,n)};WDPieChartRenderer.prototype.getInitialStartAngle=function(n){return(Number(n.m_dAngle||0).toDeg()+270)%360};WDPieChartRenderer.prototype.getAngleForValue=function(n,t,i){var r=n/t*(i||360);return r>=i&&(r=i-1),r};var normalizeEvent=function(n){return n.offsetX||(n.offsetX=n.pageX-$(n.target).offset().left,n.offsetY=n.pageY-$(n.target).offset().top),n};WDPieChartRenderer.prototype.drawChart=function(n,t,i){var fi,l,v,r,f,d,yt,pt,wt,bt,ti,c,s,oi,st,nt,tt,y,ht,u,ui,ct,it,k;WDChartRenderer.prototype.drawChart.apply(this,arguments);
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
	 * Licensed under the MIT License (LICENSE.txt).
	 *
	 * Version: 3.1.12
	 *
	 * Requires: jQuery 1.2.2+
	 */
if(fi=this,i,l=this.m_params.getType()==WDChartParameters.kHemicycle?180:360,l=t.tweenInitialEndAngle(i,l),i.data("wbGrfAnimTweenInitialEndAngle",l),!1!==this.m_oModele.hasPremiereSerieNonVide()){for(v=this.m_oModele.m_tabSeries[0].getNbValues(),this.m_dTotalValue=0,r=0,r=0;r<v;++r)f=t.tweenValue(i,Math.abs(this.m_oModele.getFromSerieValueAt(0,r)),r,0),this.m_dTotalValue+=f;if(this.m_dTotalValue!==0){this.m_dInitialStartAngle=this.m_params.getType()==WDChartParameters.kHemicycle?180:this.getInitialStartAngle(this.m_params);this.m_dInitialStartAngle=t.tweenInitialStartAngle(i,this.m_dInitialStartAngle);i.data("wbGrfAnimTweenInitialStartAngle",this.m_dInitialStartAngle);var h=this.m_dInitialStartAngle,ft=0,lt=this.m_params.isDisplayValuesLabel(),at=this.m_params.isDisplayPercentage(),vt=this.m_params.isDisplayCategoriesLabel();if(this.tabLabelRenderers===undefined&&(this.tabLabelRenderers=[]),d=!t.tweenHideLabel(i,!(vt||at||lt)),d||!this.m_params.m_bBulleActive)for(yt=this.m_params.m_sMasqueValeur,pt=this.m_params.m_sMasquePourcentage,r=0;r<v;++r)(f=Math.abs(this.m_oModele.getFromSerieValueAt(0,r)),f!=0)&&(f=t.tweenValue(i,f,r,0),s=this.getAngleForValue(f,this.m_dTotalValue,l),this.tabLabelRenderers[r]===undefined?u=new WDLabelRenderer(this,h,s,r):(u=this.tabLabelRenderers[r],u.setAngle(h,s)),u.setCategoryLabel(vt,this.m_oModele.getCategoryLabelAt(r)),u.setValueLabel(lt,WDChartUtils.formatValue(f,yt,!0)),u.setPercentLabel(at,WDChartUtils.formatValue(f/this.m_dTotalValue*100,pt.replace("%",""),!0,"%")),this.tabLabelRenderers[r]=u,h+=s);if(h=this.m_dInitialStartAngle,this.m_rectChart=t.tweenRectChart(i,this.m_rectChart),this.m_nCenterX=Math.floor((this.m_rectChart.m_nLeft+this.m_rectChart.m_nRight)/2),this.m_nCenterY=Math.floor((this.m_rectChart.m_nTop+this.m_rectChart.m_nBottom)/2),this.m_params.getType()==WDChartParameters.kHemicycle&&(wt=Math.floor((this.m_rectChart.m_nBottom-this.m_rectChart.m_nTop)/2),this.m_nCenterY+=wt/2),this.m_nRadius=Math.min(WDRect.getWidth(this.m_rectChart),WDRect.getHeight(this.m_rectChart))/2,!(this.m_nRadius<=IWDChartConstant.MARGIN_PIE+IWDChartConstant.MARGIN_LABEL_PIE)){var rt=0,o=undefined,e=undefined;if(d&&(this.m_oPaint.addClasse(this.m_params.m_sClasseLibelle),bt=WDPaintCSS.oGetInfoCSS(this.m_oPaint,"Ap","lineHeight"),rt=parseInt10(bt.lineHeight),o=new WDRect,!!this.m_params.m_bEtiquetteSecteurExterieures)){var kt=this.m_rectChart.m_nLeft,dt=this.m_rectChart.m_nTop,gt=this.m_rectChart.m_nRight,ni=this.m_rectChart.m_nBottom;for(e=0,r=0;r<v;++r)(ti=this.m_oModele.getPartOffset(r,et),u=this.tabLabelRenderers[r],u)&&(u.getBounds(rt,ti,o),kt-o.m_nLeft>e&&(e=kt-o.m_nLeft),dt-o.m_nTop>e&&(e=dt-o.m_nTop),o.m_nRight-gt>e&&(e=o.m_nRight-gt),o.m_nBottom-ni>e&&(e=o.m_nBottom-ni))}if(e===undefined)for(e=0,r=0;r<v;++r)if(c=this.m_oModele.getPartOffset(r,et),!(c<=0)){if(s=undefined,u=this.tabLabelRenderers[r],u)s=Number(u.m_dAngleR).toDeg();else{if(f=Math.abs(this.m_oModele.getFromSerieValueAt(0,r)),f==0)continue;f=t.tweenValue(i,f,r,0);s=this.getAngleForValue(f,this.m_dTotalValue,l)}y=Number(90-(ft+s/2)).toRad();e=Math.max(e,Math.abs(c*Math.sin(y)));e=Math.max(e,Math.abs(c*Math.cos(y)))}if(this.m_nRadius-=e,this.m_nRadius-=IWDChartConstant.MARGIN_PIE,!(this.m_nRadius<=0)){var et=this.m_params.m_nExcentrageGlobal,ot=new WDRect(this.m_nCenterX-this.m_nRadius,this.m_nCenterY-this.m_nRadius,this.m_nCenterX+this.m_nRadius,this.m_nCenterY+this.m_nRadius),p=this.m_params.getDonutHoleSize(),ei=p>0&&this.m_params.getType()!=WDChartParameters.kSecteur&&this.m_params.getType()!=WDChartParameters.kHemicycle||this.m_params.getType()==WDChartParameters.kDonut,g=0;for(ei?(p<0&&(p=30),g=Math.ceil(this.m_nRadius*p/100)):p=0,g=t.tweenHoleRadius(i,g),i.data("wbGrfAnimTweenHoleRadius",g),oi=0,st=[],r=0;r<v;++r)if(nt=0,tt=0,f=Math.abs(this.m_oModele.getFromSerieValueAt(0,r)),f!=0){f=t.tweenValue(i,f,r,0);var s=this.getAngleForValue(f,this.m_dTotalValue,l),c=this.m_oModele.getPartOffset(r,et),ut=this.m_oModele.getCategoryColor(r),si=this.m_params.isBorderColorAuto()?clWDUtil.sCouleurHTMLPlusBrillante(ut):this.m_params.m_sCouleurBordure,ii=this.m_params.getGradientType();ii==IWDChartConstant.FLAG_VERTICAL_GRADIENT||ii==IWDChartConstant.FLAG_HORIZONTAL_GRADIENT?this.m_oPaint.setRadialGradient(this.m_nCenterX,this.m_nCenterY,this.m_nRadius,clWDUtil.sCouleurHTMLPlusBrillante(ut),ut,"pad"):this.m_oPaint.setFill(ut);c>0&&(y=Number(90-(ft+s/2)).toRad(),nt=c*Math.sin(y),tt=c*Math.cos(y),ot.offset(nt,tt));this.m_oPaint.setStroke(si);ht=this.m_params.byGetAlpha();ht<255?this.m_oPaint.setFillOpacity255(ht):this.m_oPaint.setFillOpacity255(255);var ri=n.g(i,"groupe-serie-"+r),w=n.g(ri,"part-effect-"+r),a=n.arc(w,"part-"+r),b=new stPath(ot,{rDonut:g,start:this.m_bDessinneSelonBissectire?ft:h,startAngle:h,sweep:s,firstAngle:this.m_dInitialStartAngle});n.drawArc(a,b=t.tweenPart(a,b),this.m_oPaint=t.tweenPartPaint(a,this.m_oPaint));a.data("wbGrfGrInfoXY",[0,r,f]);this.m_bDessinneSelonBissectire&&(n.rotate(ri,h+b.options.sweep/2,this.m_nCenterX,this.m_nCenterY,!0),n.rotate(a,-b.options.sweep/2,this.m_nCenterX,this.m_nCenterY,!0));this.liaisonLegendePart(n,a,r);(nt!==0||tt!==0)&&ot.offset(-nt,-tt);(d||!this.m_params.m_bBulleActive)&&(u=this.tabLabelRenderers[r],a.data("wbGrfPieLabelRenderer",u),this.m_params.m_bBulleActive||(this.m_oPaint.addClasse(this.m_params.m_sClasseLibelle),ui=n.bulle(w,"bulle-"+r),ct=this.m_params.m_sBulleSecteur||"[%CATEGORIE%]\n[%SERIE%]\n[%%%]",n.drawBulle(ui,ct.replace("[%CATEGORIE%]",u.m_strCategoryLabel||"").replace("[%SERIE%]",ct.indexOf("[%VALEUR%]")>-1?this.m_oModele.m_tabSeries[0].m_sLibelle||"":u.m_strValueLabel||"").replace("[%VALEUR%]",u.m_strValueLabel||"").replace("[%%%]",u.m_strPercentLabel||""),this.m_oPaint)),d&&(it=u.getBounds(rt,c,o,p),it&&!this.m_params.m_bAutoriseChevauchementEtiquettes&&(clWDUtil.bForEachIn(st,function(n,t){return WDRect.intersects(o,t)?(it=!1,!1):!0}),st.push(_clone(o))),it&&(k=n.text(w,"label-"+n.getId(w)),this.m_oPaint.addClasse(this.m_params.m_sClasseLibelle),u.draw(n,k,o.m_nLeft,o.m_nTop,rt,this.m_oPaint,t),this.m_bDessinneSelonBissectire&&n.rotate(k,-(h+b.options.sweep/2),this.m_nCenterX,this.m_nCenterY,!0)),k=n.findFromId(w,"label-"+n.getId(w)),!it&&k.length>0&&k.remove()));h+=b.options.sweep}}}}}};WDPieChartRenderer.prototype.getNbLegendLabels=function(){var n=this.m_oModele.getSeriesAt(0,!1);return n!==undefined?n.getNbValues():0};WDPieChartRenderer.prototype.getLegendColorAt=function(n){return this.m_oModele.getCategoryColor(n)};WDPieChartRenderer.prototype.getLegendLabelAt=function(n){var t=this.m_oModele.getCategoryLabelAt(n);return t===undefined?"":t};WDLabelRenderer.prototype.constructor=WDLabelRenderer;WDLabelRenderer.prototype.setAngle=function(n,t){for(this.m_dAngleValueR=Number(t).toRad();n<0;)n+=360;var i=n%360;this.m_dStartAngleR=Number(i%360).toRad();i+=t/2;this.m_dAngleR=Number(90-i).toRad();switch(Math.round(Number(i).toRad()/(Math.PI/4))){case 8:case 0:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_CENTRE;break;case 1:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_HAUT;break;case 2:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_HAUT;break;case 3:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_DROIT;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_HAUT;break;case 4:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_DROIT;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_HAUT;break;case 5:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_DROIT;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_BAS;break;case 6:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_BAS;break;case 7:this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE;this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_BAS}};WDLabelRenderer.prototype.setValueLabel=function(n,t){t!=""&&t!=this.m_strValueLabel&&(this.m_strValueLabel=t,this.m_bValueLabel=n&&t!==undefined,this.m_bValueLabel&&this.updateTotalWidth(t))};WDLabelRenderer.prototype.updateTotalWidth=function(n){var i=WDPaintCSS.oGetInfoCSS(this.m_oRenderer.m_params.m_sClasseLibelle,n,"width"),t=parseInt10(i.width);t>this.m_dWidth&&(this.m_dWidth=t)};WDLabelRenderer.prototype.setCategoryLabel=function(n,t){t!=""&&t!=this.m_strCategoryLabel&&(this.m_strCategoryLabel=t,this.m_bCategoryLabel=n&&t!==undefined,this.m_bCategoryLabel&&this.updateTotalWidth(t))};WDLabelRenderer.prototype.setPercentLabel=function(n,t){t!=""&&t!=this.m_strPercentLabel&&(this.m_strPercentLabel=t,this.m_bPercentLabel=n&&t!==undefined,this.m_bPercentLabel&&this.updateTotalWidth(t))};WDLabelRenderer.prototype.getBounds=function(n,t,i,r){var e=Math.ceil(this.m_dWidth),o=n*this.getNbLines(),s=1,h=1,u,f;this.m_oRenderer.m_params.m_bEtiquetteSecteurExterieures||(h=s=.5*(1+r/100),this.m_nAlignmentH=IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE,this.m_nAlignmentV=IWDConstante.ALIGNEMENT_VERTICAL_CENTRE);u=Math.round(this.m_oRenderer.m_nCenterX+(this.m_oRenderer.m_nRadius*s+IWDChartConstant.MARGIN_LABEL_PIE+t)*Math.sin(this.m_dAngleR));switch(this.m_nAlignmentH){default:case IWDConstante.ALIGNEMENT_HORIZONTAL_GAUCHE:i.m_nLeft=u;i.m_nRight=u+e;break;case IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE:i.m_nLeft=u-e/2;i.m_nRight=u+e/2;break;case IWDConstante.ALIGNEMENT_HORIZONTAL_DROIT:i.m_nLeft=u-e;i.m_nRight=u}f=Math.round(this.m_oRenderer.m_nCenterY+(this.m_oRenderer.m_nRadius*h+IWDChartConstant.MARGIN_LABEL_PIE+t)*Math.cos(this.m_dAngleR));switch(this.m_nAlignmentV){default:case IWDConstante.ALIGNEMENT_VERTICAL_HAUT:i.m_nTop=f;i.m_nBottom=f+o;break;case IWDConstante.ALIGNEMENT_VERTICAL_CENTRE:i.m_nTop=f-o/2;i.m_nBottom=f+o/2;break;case IWDConstante.ALIGNEMENT_VERTICAL_BAS:i.m_nTop=f-o;i.m_nBottom=f}return!this.m_oRenderer.m_params.m_bEtiquetteSecteurExterieures&&!this.contains(i,r)?!1:!0};WDLabelRenderer.prototype.contains=function(n,t){if(this.m_dAngleValueR>Math.PI/4)return!0;var r,u,f,e,o,s,i=this.m_oRenderer.m_nRadius,h=this.m_dStartAngleR+this.m_dAngleValueR,c=this.m_dStartAngleR+this.m_dAngleValueR/2;return r=this.m_oRenderer.m_nCenterX+i*(t/100)*Math.cos(c),u=this.m_oRenderer.m_nCenterY+i*(t/100)*Math.sin(c),f=this.m_oRenderer.m_nCenterX+i*Math.cos(this.m_dStartAngleR),e=this.m_oRenderer.m_nCenterY+i*Math.sin(this.m_dStartAngleR),o=this.m_oRenderer.m_nCenterX+i*Math.cos(h),s=this.m_oRenderer.m_nCenterY+i*Math.sin(h),WDChartUtils.is_in_triangle(n.m_nLeft,n.m_nTop,r,u,f,e,o,s)&&WDChartUtils.is_in_triangle(n.m_nRight,n.m_nTop,r,u,f,e,o,s)&&WDChartUtils.is_in_triangle(n.m_nLeft,n.m_nBottom,r,u,f,e,o,s)&&WDChartUtils.is_in_triangle(n.m_nRight,n.m_nBottom,r,u,f,e,o,s)};WDLabelRenderer.prototype.getNbLines=function(){var n=0;return this.m_bValueLabel&&++n,this.m_bCategoryLabel&&++n,this.m_bPercentLabel&&++n,n};WDLabelRenderer.prototype.draw=function(n,t,i,r,u,f,e){this.m_nAlignmentH===IWDConstante.ALIGNEMENT_HORIZONTAL_CENTRE?i+=this.m_dWidth/2:this.m_nAlignmentH===IWDConstante.ALIGNEMENT_HORIZONTAL_DROIT&&(i+=this.m_dWidth);var o=[];this.m_bCategoryLabel&&o.push(this.m_strCategoryLabel);this.m_bValueLabel&&o.push(this.m_strValueLabel);this.m_bPercentLabel&&o.push(this.m_strPercentLabel);f.m_oStyle["pointer-events"]="none";f=e.tweenLabelPaint(this.m_nIndice,f);n.drawText(t,o,u,i,r,this.m_nAlignmentH,f)};WDChartAnimator.prototype.sGetFonctionEase=function(){return["linear","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","easeInSine","easeOutSine","easeInOutSine","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"][parseInt10(Math.random()*32)]};WDChartAnimator.prototype.add=function(n,t){if(this.m_oGraphe.m_oModele.m_oParametres.m_nDureeAnimation===0){var i=this.m_oGraphe.m_oVue.m_oPicture.m_domBaliseSVG.data("wbGrfModeAffichage")===WDChartView.ms_nDessin1erAffichage;if(i)return}t&&(this.m_bDessinComplet=!0);this.m_tabAnimations.push(n);n.m_oAnimator=this;n.run()};WDChartAnimator.prototype.call=function(n){var r,t=arguments.callee.caller.arguments,i=t[t.length===1?0:1],u;if(t[0]&&clWDUtil.isObject(t[0])&&t[0].queue&&t[0].queue().length>0)return i;for(r=0;r<this.m_tabAnimations.length;++r)if(u=this.m_tabAnimations[r],u[n]!==undefined&&(i=u[n].apply(u,t),i!==undefined&&(t[t.length===1?0:1]=i,typeof i=="boolean"&&i)))return i;return i};WDChartAnimator.prototype.play1erAffichage=function(n,t){t.Raz();n.m_oVue.onDraw(n,WDChartView.ms_nDessinParDefaut)};WDChartAnimator.prototype.playMajDonnees=function(n,t){this.play1erAffichage(n,t)};WDChartAnimator.prototype.playModifTypeGraphe=function(n,t){this.play1erAffichage(n,t)};WDChartAnimator.prototype.retireAnimation=function(n){var t=this.m_tabAnimations.indexOf(n);t>-1&&this.m_tabAnimations.splice(t,1)};WDChartAnimator.prototype.tweenLegendPaint=function(){return this.call("tweenLegendPaint")};WDChartAnimator.prototype.tweenGroupeLegende=function(){return this.call("tweenGroupeLegende")};WDChartAnimator.prototype.tweenGroupeTitre=function(){return this.call("tweenGroupeTitre")};WDChartAnimator.prototype.tweenValue=function(){return this.call("tweenValue")};WDChartAnimator.prototype.tweenHideLabel=function(){return this.call("tweenHideLabel")};WDChartAnimator.prototype.bAnimationEnCours=function(){return this.call("bAnimationEnCours")};WDChartAnimator.prototype.bAnimationPasCommencee=function(){return this.call("bAnimationPasCommencee")};WDChartAnimator.prototype.bAnimationPasFinie=function(){return this.call("bAnimationPasFinie")};WDChartAnimator.prototype.bDessinComplet=function(){return this.m_bDessinComplet};WDChartAnimator.prototype.NotifDessinComplet=function(){this.m_bDessinComplet=!1};WDChartAnimation.prototype.constructor=WDChartAnimation;WDChartAnimation.prototype.run=function(){var n=this.prepare(this.m_domBaliseAnim.data("wbGrfAnim",this));n.animate(this.oStyleCssAnimation,this);clWDUtil.bEstChaineNonVide(this.queue)&&n.dequeue(this.queue)};WDChartAnimation.getAnim=function(n){return clWDUtil.isObject(n)&&n.m_oAnimator!==undefined?n:$(n).data("wbGrfAnim")};WDChartAnimation.prototype.prepare=function(n){return n};WDChartAnimation.prototype.tween=function(n,t,i){i===undefined&&(i=this.m_dNow);var r=t*i+(1-i)*n;return Math.abs(r)<.1?Math.round(r*1e10)/1e10:r};WDChartAnimation.prototype.tweenX=function(n,t,i){return this.tween(n,t,i)};WDChartAnimation.prototype.tweenY=function(n,t,i){return this.tween(n,t,i)};WDChartAnimation.prototype.tweenRect=function(n,t,i){return i===undefined&&(i=this.m_dNow),new WDRect(this.tweenX(n.m_nLeft,t.m_nLeft,i),this.tweenY(n.m_nTop,t.m_nTop,i),this.tweenX(n.m_nRight,t.m_nRight,i),this.tweenY(n.m_nBottom,t.m_nBottom,i))};WDChartAnimation.prototype.start=function(){var n=WDChartAnimation.getAnim(this);n.m_domEtatInitial=n.m_oPicture.m_domBaliseSVG.clone(!0,!0);n.m_domEtatInitial.data("wbGrfClone",!0)};WDChartAnimation.prototype.step=function(n){var t=WDChartAnimation.getAnim(this);t&&(t.m_dNow=n,t.m_oGraphe.m_oVue.Redessine(t.m_oGraphe,WDChartView.ms_nDessinAnimation))};WDChartAnimation.prototype.progress=function(n,t,i){var r=WDChartAnimation.getAnim(this);r&&(r.m_dProgress=t,r.m_dRemainingMS=i)};WDChartAnimation.prototype.done=function(){var n=WDChartAnimation.getAnim(this);n&&(n.m_domEtatInitial&&(n.m_domEtatInitial.data("wbGrfClone")===!0&&n.m_domEtatInitial.add(n.m_domEtatInitial.find("*")).removeData().unbind(),n.m_domEtatInitial=null),n.m_oAnimator&&n.m_oAnimator.retireAnimation(n),n.m_domBaliseAnim&&n.m_domBaliseAnim.removeData("wbGrfAnim"))};WDChartAnimation.prototype.always=function(){var n=WDChartAnimation.getAnim(this);n&&n.done.apply(this,arguments)};WDChartAnimation.prototype.tweenHideLabel=function(n,t){if(this.m_dNow<=1/3)return t;if(this.m_dNow<=2/3){var i=this.m_oGraphe.m_oModele.m_oParametres.getType();return i==WDChartParameters.kSecteur||i==WDChartParameters.kDonut||i==WDChartParameters.kHemicycle?!this.m_oGraphe.m_oModele.m_oParametres.m_bEtiquetteSecteurExterieures:!0}return this.m_dNow<1,t};WDChartAnimation.prototype.tweenLabelPaint=function(n,t){var i=1;return this.m_dNow<=1/3?i=Math.sin(Math.PI/2*(1/3-this.m_dNow)*3):this.m_dNow<=2/3?i=0:this.m_dNow<1&&(i=Math.sin(Math.PI/2*((this.m_dNow-2/3)*3/2))),t.m_oStyle.opacity=i,t};WDChartAnimation.prototype.bAnimationEnCours=function(){var n=WDChartAnimation.getAnim(this);return n?!(n.m_dNow==0||n.m_dNow==1):!1};WDChartAnimation.prototype.bAnimationPasFinie=function(){var n=WDChartAnimation.getAnim(this);return n?n.m_domBaliseAnim.data("wbGrfAnim")?!(n.m_dNow==1):!1:!1};WDChartAnimation.prototype.bAnimationPasCommencee=function(){var n=WDChartAnimation.getAnim(this);return n?!(n.m_dNow==0):!1};WDChartAnimationValeur.prototype=new WDChartAnimation;WDChartAnimationValeur.prototype.constructor=WDChartAnimationValeur;WDChartAnimationValeur.prototype.tweenValue=function(n,t,i,r){var u,f;return this.m_oModelePrecedent&&(this.m_oModelePrecedent.m_tabSeries.length<=r?u=0:(f=this.m_oModelePrecedent.m_tabSeries[r].length,i>=f&&(u=this.m_oModelePrecedent.m_tabSeries[r].m_tabValeur[f-1]))),u===undefined&&(u=this.m_oModelePrecedent?this.m_oModelePrecedent.m_tabSeries[r].m_tabValeur[i]||0:0),this.tween(u,t)};WDChartAnimationValeur.prototype.tweenRedessineAxes=function(){return this.m_dNow===0?!0:!1};WDChartXYAnimationValeur.prototype=new WDChartAnimationValeur;WDChartXYAnimationValeur.prototype.constructor=WDChartXYAnimationValeur;WDChartXYAnimationValeur.prototype._RelativiseSelonModelePrecedent=function(){for(var o,a,s=this.m_oGraphe.m_oVue.m_oRenderer,i=this.m_oModelePrecedent,r=this.m_oGraphe.m_oModele,v=i.m_tabSeries.length,n=v-1;n>=0;--n){var u=i.m_tabSeries[n],h=i.m_tabSeries[n].m_oAxis,f=r.getSeriesAt(n,!1);if(f){var e=r.getAxisByType(f.isOnSecondaryAxis()?EAxisType.Y2:EAxisType.Y),c=[],l=f.getNbValues(),y=s.getDrawnValuesCount(l,r.getAxisByType(EAxisType.X)),t=s.getFirstDrawnCategoryIndex(e);for(o=0;o<y;++o,++t)if(!(t<0)){if(t>=l)break;a=u.m_tabValeur[t];c.push(a*(e.m_dMaxValue-e.m_dMinValue)/(h.m_dMaxValue-h.m_dMinValue))}u.m_tabValeur=c;u.m_nOffset=1}}};WDChartXYAnimationValeur.prototype.tweenValue=function(n,t,i,r){return this.m_oModelePrecedent&&!this.m_bDejaRelativise&&(this._RelativiseSelonModelePrecedent(),this.m_bDejaRelativise=!0),this.m_oGraphe.m_oVue.bEstSerieMasquee(r)&&n.css("opacity")>0?n.css("opacity",1-this.m_dNow):!this.m_oGraphe.m_oVue.bEstSerieMasquee(r)&&n.css("opacity")<1&&n.css("opacity",this.m_dNow),WDChartAnimationValeur.prototype.tweenValue.apply(this,arguments)};WDXYChartAnimator.prototype=new WDChartAnimator;WDXYChartAnimator.prototype.constructor=WDPieChartAnimator;WDXYChartAnimator.prototype.play1erAffichage=function(n,t){if(this.m_oGraphe.m_oModele.m_oParametres.m_nDureeAnimation===0){WDChartAnimator.prototype.play1erAffichage.apply(this,arguments);return}var i=new WDChartAnimationValeur(n,t);n.m_oModele.m_oParametres.m_nDureeAnimation>0&&(i.duration=n.m_oModele.m_oParametres.m_nDureeAnimation);i.m_oModelePrecedent=undefined;this.add(i)};WDXYChartAnimator.prototype.playMajDonnees=function(n,t){if(n.m_oModele.m_oParametres.m_nDureeAnimation===0){WDChartAnimator.prototype.play1erAffichage.apply(this,arguments);return}var i=new WDChartXYAnimationValeur(n,t);n.m_oModele.m_oParametres.m_nDureeAnimation>0&&(i.duration=n.m_oModele.m_oParametres.m_nDureeAnimation);this.add(i,!0)};WDXYChartAnimator.prototype.playModifTypeGraphe=function(n,t){this.playMajDonnees(n,t)};WDXYChartAnimator.prototype.tweenRedessineAxes=function(){return this.call("tweenRedessineAxes")};WDPieChartAnimator.prototype=new WDChartAnimator;WDPieChartAnimator.prototype.constructor=WDPieChartAnimator;WDPieChartAnimator.prototype.play1erAffichage=function(n,t){if(this.m_oGraphe.m_oModele.m_oParametres.m_nDureeAnimation===0){WDChartAnimator.prototype.play1erAffichage.apply(this,arguments);return}var i=new WDPieChartAnimation1erAffichageWindevLike(n,t);this.add(i,!0)};WDPieChartAnimator.prototype.playModifTypeGraphe=function(n,t){if(this.m_oGraphe.m_oModele.m_oParametres.m_nDureeAnimation===0){WDChartAnimator.prototype.playModifTypeGraphe.apply(this,arguments);return}this.add(new WDPieChartAnimation1erAffichageAngleFinCroissant(n,t))};WDPieChartAnimator.prototype.playSurbrillancePart=function(n,t,i,r,u){r!==undefined&&this.add(new WDPieChartAnimationSurbrillancePartNoDraw(n,t,i,r,u))};WDPieChartAnimator.prototype.playSelectionPart=function(n,t,i,r){if(this.m_oGraphe.m_oModele.m_oParametres.getType()!=WDChartParameters.kHemicycle){var u=new WDPieChartAnimationSelectionPart(n,t,i,r);u.m_dAngleFinal!=u.m_dAngleInitial&&this.add(u)}};WDPieChartAnimator.prototype.playSelectionLegende=function(n,t,i,r){if(!i.data("wbGrfDrawPath")||!(i.data("wbGrfDrawPath").options.sweep>=359)){var u=this.m_oGraphe.m_oVue.bEstSerieMasquee(WDPieChartRenderer.nGetIndicePart(t,i));r.fadeTo(this.m_oGraphe.m_oModele.m_oParametres.m_nDureeAnimation===0?0:400,u?1:.5).find("text").css("text-decoration",u?"":"line-through");this.add(new WDPieChartAnimationSelectionLegende(n,t,i,r))}};WDPieChartAnimator.prototype.tweenInitialStartAngle=function(){return this.call("tweenInitialStartAngle")};WDPieChartAnimator.prototype.tweenInitialEndAngle=function(){return this.call("tweenInitialEndAngle")};WDPieChartAnimator.prototype.tweenRectChart=function(){return this.call("tweenRectChart")};WDPieChartAnimator.prototype.tweenHoleRadius=function(){return this.call("tweenHoleRadius")};WDPieChartAnimator.prototype.tweenPart=function(){return this.call("tweenPart")};WDPieChartAnimator.prototype.tweenPartPaint=function(){return this.call("tweenPartPaint")};WDPieChartAnimator.prototype.tweenLabelPaint=function(){return this.call("tweenLabelPaint")};WDPieChartZoomAnimation.prototype=new WDChartAnimation;WDPieChartZoomAnimation.prototype.constructor=WDPieChartZoomAnimation;WDPieChartZoomAnimation.prototype.tweenRectChart=function(n,t){this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect")===undefined&&this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect",t);var i=this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect"),r=(i.getWidth()-this.m_dZoom*i.getWidth())/2,u=(i.getHeight()-this.m_dZoom*i.getHeight())/2;return this.tweenRect(i,new WDRect(i.m_nLeft-r,i.m_nTop-u,i.m_nRight+r,i.m_nBottom+u))};WDPieChartZoomAnimation.prototype.done=function(){var n=WDChartAnimation.getAnim(this);n&&n.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect",n.m_oGraphe.m_oVue.m_oRenderer.m_rectChart)};WDChartAnimationNoDraw.prototype=new WDChartAnimation;WDChartAnimationNoDraw.prototype.constructor=WDChartAnimationNoDraw;WDChartAnimationNoDraw.prototype.run=function(){};WDChartAnimationNoDraw.prototype.start=function(){var n=WDChartAnimation.getAnim(this);n.m_dNow=0;n.m_domEtatInitial=n.m_oPicture.m_domBaliseSVG};WDChartAnimationNoDraw.prototype.done=function(){var n=WDChartAnimation.getAnim(this);n&&(n.m_dNow=1,WDChartAnimation.prototype.done.apply(this,arguments))};WDPieChartAnimationSurbrillancePartNoDraw.prototype=new WDChartAnimationNoDraw;WDPieChartAnimationSurbrillancePartNoDraw.prototype.constructor=WDPieChartAnimationSurbrillancePartNoDraw;WDPieChartAnimationSurbrillancePartNoDraw.prototype.run=function(){this.m_domPartEnSurbrillance.clearQueue().finish().animate({opacity:this.m_bEtat?.8:1},this.m_bEtat?this.duration:1,this.easing);this.m_oAnimator.retireAnimation(this.m_domPartEnSurbrillance.parent().data("wbGrfAnim"));this.m_domPartEnSurbrillance.parent().data("wbGrfAnim",this).clearQueue().finish().animate({content:1},this)};WDPieChartAnimationSurbrillancePartNoDraw.prototype.step=function(n){var t=WDChartAnimation.getAnim(this),i;t&&(i=t.tween(t.m_nEcartInitial,t.m_bEtat?t.m_nEcart:0,n),WDPieChartRenderer.prototype.m_bDessinneSelonBissectire&&$(this).data("wbGrfAnimSurbrillanceEcart",i).attr("transform","translate("+i+", 0)"))};WDPieChartAnimationSelectionLegende.prototype=new WDChartAnimation;WDPieChartAnimationSelectionLegende.prototype.constructor=WDPieChartAnimationSelectionLegende;WDPieChartAnimationSelectionLegende.prototype.tweenValue=function(n,t,i){return this.m_nIndiceValeurDansSerie==i?(this.m_bAffiche?this.m_dNow:1-this.m_dNow)*t:t};WDPieChartAnimationSelectionLegende.prototype.done=function(){};WDPieChartAnimationSelectionLegende.prototype.run=function(){for(var n,t=this.m_oAnimator.m_tabAnimations.length-1;t>-1;--t)(n=this.m_oAnimator.m_tabAnimations[t],n!==this)&&n.constructor==this.constructor&&n.m_nIndiceValeurDansSerie===this.m_nIndiceValeurDansSerie&&WDChartAnimation.prototype.done.apply(n,arguments);WDChartAnimation.prototype.run.apply(this,arguments)};WDPieChartAnimationSelectionLegende.prototype.tweenLabelPaint=function(n,t){return this.m_nIndiceValeurDansSerie==n&&(t.m_oStyle.opacity=this.m_bAffiche?this.m_dNow:1-this.m_dNow),t};WDPieChartAnimationSelectionLegende.prototype.tweenPartPaint=function(n,t){return this.m_nIndiceValeurDansSerie==WDPieChartRenderer.nGetIndicePart(this.m_oPicture,n)&&(t.m_oStyle.opacity=this.m_bAffiche?this.m_dNow:1-this.m_dNow),t};WDPieChartAnimationSelectionLegende.prototype.tweenLegendPaint=function(n,t){return t};WDPieChartAnimationSurbrillancePart.prototype=new WDChartAnimation;WDPieChartAnimationSurbrillancePart.prototype.constructor=WDPieChartAnimationSurbrillancePart;WDPieChartAnimationSurbrillancePart.prototype.tweenPartPaint=function(n,t){return this.m_oPicture.getId(this.m_domPartEnSurbrillance)===this.m_oPicture.getId(n)&&(t.m_oStyle.opacity=this.tween(this.m_bEtat?1:.8,this.m_bEtat?.8:1)),t};WDPieChartAnimation1erAffichageBase.prototype=new WDChartAnimation;WDPieChartAnimation1erAffichageBase.prototype.constructor=WDPieChartAnimation1erAffichageBase;WDPieChartAnimation1erAffichageBase.prototype.tweenLabelPaint=function(n,t){return t.m_oStyle.opacity=(t.m_oStyle.opacity===undefined?1:t.m_oStyle.opacity)*Math.max(0,Math.exp(this.m_dNow)*Math.log(this.m_dNow)+1),t};WDPieChartAnimation1erAffichageArretDuVinyle.prototype=new WDPieChartAnimation1erAffichageBase;WDPieChartAnimation1erAffichageArretDuVinyle.prototype.constructor=WDPieChartAnimation1erAffichageArretDuVinyle;WDPieChartAnimation1erAffichageArretDuVinyle.prototype.tweenInitialStartAngle=function(n,t){return this.m_dNow*t*this.m_dPourcentRotation+t*(1-this.m_dPourcentRotation)};WDPieChartAnimationSelectionPart.prototype=new WDChartAnimation;WDPieChartAnimationSelectionPart.prototype.constructor=WDPieChartAnimationSelectionPart;WDPieChartAnimationSelectionPart.prototype.tweenInitialStartAngle=function(){return this.tween(this.m_dAngleInitial,this.m_dAngleFinal)};WDPieChartAnimationSelectionPart.prototype.done=function(){var n=WDChartAnimation.getAnim(this);n&&(n.m_oGraphe.m_oVue.m_oRenderer.m_params.m_dAngle=Number(n.m_dAngleFinal-270).toRad(),WDChartAnimation.prototype.done.apply(this,arguments))};WDPieChartAnimation1erAffichageWindevLike.prototype=new WDPieChartAnimation1erAffichageBase;WDPieChartAnimation1erAffichageWindevLike.prototype.constructor=WDPieChartAnimation1erAffichageWindevLike;WDPieChartAnimation1erAffichageWindevLike.prototype.tweenInitialStartAngle=function(n,t){return this.m_dNow*t*this.m_dPourcentRotation+t*(1-this.m_dPourcentRotation)};WDPieChartAnimation1erAffichageWindevLike.prototype.tweenPart=function(n,t){return t.options.sweep*=this.m_dNow,t};WDPieChartAnimation1erAffichageWindevLike.prototype.tweenRectChart=function(n,t){this.m_dNow==0&&n.data("wbGrfWDPieChartAnimation1erAffichageWindevLikeRect",t);var i=n.data("wbGrfWDPieChartAnimation1erAffichageWindevLikeRect"),r=i.m_nTop+i.getHeight()/2,u=i.m_nLeft+i.getWidth()/2;return this.tweenRect(new WDRect(u,r,u,r),i)};WDPieChartAnimation1erAffichageClipPath.prototype=new WDPieChartAnimation1erAffichageBase;WDPieChartAnimation1erAffichageClipPath.prototype.constructor=WDPieChartAnimation1erAffichageClipPath;WDPieChartAnimation1erAffichageClipPath.prototype.tweenPart=function(n,t){var i=360*this.m_dNow,r;return t.options.startAngle-t.options.firstAngle>=i?t.options.sweep=0:(r=t.options.startAngle-t.options.firstAngle+t.options.sweep,i<r&&(t.options.sweep=i-(t.options.startAngle-t.options.firstAngle))),t};WDPieChartAnimation1erAffichageAngleFinCroissant.prototype=new WDPieChartAnimation1erAffichageBase;WDPieChartAnimation1erAffichageAngleFinCroissant.prototype.constructor=WDPieChartAnimation1erAffichageAngleFinCroissant;WDPieChartAnimation1erAffichageAngleFinCroissant.prototype.tweenInitialEndAngle=function(n,t){var r=this.m_oPicture.find(this.m_domEtatInitial,n),i=r.data("wbGrfAnimTweenInitialEndAngle");return i||(i=0),this.tween(i,t)};WDPieChartAnimation1erAffichageAngleFinCroissant.prototype.tweenInitialStartAngle=function(n,t){var r=this.m_oPicture.find(this.m_domEtatInitial,n),i=r.data("wbGrfAnimTweenInitialStartAngle");return i||(i=0),this.tween(i,t)};WDPieChartAnimation1erAffichageAngleFinCroissant.prototype.tweenHoleRadius=function(n,t){var r=this.m_oPicture.find(this.m_domEtatInitial,n),i=r.data("wbGrfAnimTweenHoleRadius");return i||(i=0),t||(t=0),this.tween(i,t)};WDPieChartAnimation1erAffichageAngleFinCroissant.prototype.tweenRectChart=function(n,t){this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect")===undefined&&this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect",t);var i=this.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect");return this.tweenRect(i,t)};WDPieChartAnimation1erAffichageAngleFinCroissant.prototype.done=function(){var n=WDChartAnimation.getAnim(this);n&&(n.m_oPicture.m_domBaliseSVG.data("wbGrfChartRect",n.m_oGraphe.m_oVue.m_oRenderer.m_rectChart),WDChartAnimation.prototype.done.apply(this,arguments))};WDChartListener.prototype.constructor=WDChartListener;WDChartListener.getListener=function(n,t){var i=$(n).data("wbGrfBind");return!t&&i&&i.m_oGraphe.m_oVue.m_oAnimator.bAnimationPasFinie()?undefined:i};WDChartListener.bind=function(n,t,i,r,u,f,e){var o,s,h;if(t.m_oParametres.m_eEtat)switch(t.m_oParametres.m_eEtat){case WDChamp.prototype.ms_eEtatLectureSeule:case WDChamp.prototype.ms_eEtatGrise:return undefined}if(o=WDChartListener.getListener(i,!0),o&&bCompareFonctions(o.constructor,n.prototype.constructor))return o;o=new n.prototype.constructor(t,i,r,u,f,e);for(s in o)h="on"+s,s!="constructor"&&(bIEAvec11||i[0][h]!==undefined)&&i.bind(s,o[s]);return o.setListener(i),o};WDChartListener.prototype.setListener=function(n){return n.data("wbGrfBind",this)};WDChartMireListener.prototype=new WDChartListener;WDChartMireListener.prototype.constructor=WDChartMireListener;WDChartMireListener.prototype.click=function(){$(this).trigger("mouseenter")};WDChartMireListener.prototype.mouseenter=function(){$(this).trigger("mousemove")};WDChartMireListener.prototype.mousemove=function(n){var t=WDChartListener.getListener(this);t&&t.UpdateMire(n)};WDChartMireListener.prototype.mouseleave=function(n){var t=WDChartListener.getListener(this);t&&t.UpdateMire(n)};WDChartMireListener.prototype.UpdateMire=function(n){this.m_oGraphe.m_oVue.m_oRenderer.drawMire(this.m_oGraphe.m_oVue.m_oPicture,this.m_oGraphe.m_oVue.m_oAnimator,this.m_oGraphe.m_oVue.m_oPicture.m_domBaliseSVG.find("#"+this.m_oGraphe.m_oVue.m_oPicture.getId(this.m_domBulle)),n)};WDXYChartLegendListener.prototype=new WDChartListener;WDXYChartLegendListener.prototype.constructor=WDXYChartLegendListener;WDXYChartLegendListener.prototype.click=function(){var n=WDChartListener.getListener(this);n&&n.SelectionneLegende()};WDXYChartLegendListener.prototype.mouseenter=function(){var n=WDChartListener.getListener(this);n&&($(this).css("cursor","pointer"),n.SurvolLegende(!0))};WDXYChartLegendListener.prototype.mouseleave=function(){var n=WDChartListener.getListener(this);n&&($(this).css("cursor",""),n.SurvolLegende(!1))};WDXYChartLegendListener.prototype.SurvolLegende=function(n){var t=this.m_domGroupeSerie.find("path"),i;t.length===0?(t=this.m_domGroupeSerie.find("rect"),i=this.m_oGraphe,i.m_oVue.m_oRenderer.surbrillanceSerieDepuisMire(i.m_oVue.m_oPicture,this.m_nIndexSerie,n,this.m_nIndexSerie)):t.css("stroke-width",parseInt10(t.attr("stroke-width")||1)+(n?1:0))};WDXYChartLegendListener.prototype.SelectionneLegende=function(){var r,u,t,n,i;for(this.m_oGraphe.m_oVue.toggleSerieMasquee(this.m_nIndexSerie),r=[undefined,undefined],n=0;n<this.m_oGraphe.m_oModele.m_tabSeries.length;++n)u=this.m_oGraphe.m_oModele.m_tabSeries[n].isOnSecondaryAxis()?1:0,r[u]===undefined&&(r[u]=!1),this.m_oGraphe.m_oVue.bEstSerieMasquee(n)||(r[u]=!0);if(r[0]===!1||r[1]===!1){this.m_oGraphe.m_oVue.toggleSerieMasquee(this.m_nIndexSerie);return}if(t=this.m_oGraphe.m_oVue,this.m_oGraphe.m_oVue.m_oRenderer.m_params.m_nDureeAnimation!=0)for(t.updateModeleReference(this.m_oGraphe),n=0;n<this.m_oGraphe.m_oModele.m_tabSeries.length;++n)i=this.m_oGraphe.m_oModele.m_tabSeries[n],this.m_oGraphe.m_oVue.bEstSerieMasquee(n)?this.m_oGraphe.m_oModele.m_tabSeries[n]=new WDChartSeries(this.m_oGraphe,i,Array.apply(null,new Array(i.m_tabValeur.length+(i.m_nOffset-1))).map(Number.prototype.valueOf,t.m_oRenderer.m_params.getType()==WDChartParameters.kHistoEmpile||t.m_oRenderer.m_params.getType()==WDChartParameters.kHisto||t.m_oRenderer.m_params.getType()==WDChartParameters.kHistoEmpileHorizontal||t.m_oRenderer.m_params.getType()==WDChartParameters.kHistoHorizontal||t.m_oRenderer.m_params.getType()==WDChartParameters.kWaterfall?0:i.m_dMinValue+(i.m_dMaxValue-i.m_dMinValue)/2)):n==this.m_nIndexSerie&&(this.m_oGraphe.m_oModele.m_tabSeries[n]=new WDChartSeries(this.m_oGraphe,i,t.m_oModeleInitialSeries.m_tabSeries[this.m_nIndexSerie].m_tabValeur)),this.m_oGraphe.m_oModele.m_tabSeries[n].m_nOffset=1;this.m_oGraphe.m_oModele.createAxis();this.m_oGraphe.m_oVue.onDraw(this.m_oGraphe,WDChartView.ms_nDessinNouvellesDonnees)};WDPieChartSelectionnePartListenerBase.prototype=new WDChartListener;WDPieChartSelectionnePartListenerBase.prototype.constructor=WDPieChartSelectionnePartListenerBase;WDPieChartSelectionnePartListenerBase.prototype.SelectionnePart=function(n,t){this.m_oVue.m_oAnimator.playSelectionPart(this.m_oGraphe,this.m_oVue.m_oPicture,n,t)};WDPieChartSelectionnePartListenerBase.prototype.SurbrillancePart=function(n,t,i){this.m_oVue.m_oAnimator.playSurbrillancePart(this.m_oGraphe,this.m_oVue.m_oPicture,n,t,i)};WDPieChartSelectionnePartListenerBase.prototype.SurbrillanceLegende=function(n,t,i){var r=t.find("text"),u,f;r.css("font-weight")===undefined&&r.css("font-weight",0);u=new WDSvgAnimation(this.m_oGraphe,this.m_oGraphe.m_oVue.m_oPicture,r,{"font-weight":r.css("font-weight")},{"font-weight":n?900:0});u.duration=1;u.run();f=this.m_oVue.bEstSerieMasquee(WDPieChartRenderer.nGetIndicePart(this.m_oVue.m_oPicture,i));f||this.m_oVue.m_oAnimator.playSurbrillancePart(this.m_oGraphe,this.m_oVue.m_oPicture,n,i,t)};WDPieChartSelectionnePartListenerBase.prototype.SelectionneLegende=function(n,t){this.m_oVue.m_oAnimator.playSelectionLegende(this.m_oGraphe,this.m_oVue.m_oPicture,t,n)};WDPieChartSelectionnePartListenerBase.prototype.domGetLegendeAssociee=function(n,t){return t?t:undefined};WDPieChartSelectionnePartListenerBase.prototype.domGetPartAssociee=function(n,t){return t?t:undefined};WDPieChartAnimationTourneNoDraw.prototype=new WDChartAnimationNoDraw;WDPieChartAnimationTourneNoDraw.prototype.constructor=WDPieChartAnimationTourneNoDraw;WDPieChartAnimationTourneNoDraw.prototype.run=function(){this.m_oGraphe.m_oVue.Redessine(this.m_oGraphe,WDChartView.ms_nDessinAnimation)};WDPieChartAnimationTourneNoDraw.prototype.tweenInitialStartAngle=function(n,t){return t+this.m_nAngle};WDPieChartPartListener.prototype=new WDPieChartSelectionnePartListenerBase;WDPieChartPartListener.prototype.constructor=WDPieChartPartListener;WDPieChartPartListener.prototype.click=function(){var n=WDChartListener.getListener(this);n&&n.SelectionnePart(n.m_domBalise,n.m_domLegende=n.domGetLegendeAssociee(n.m_domBalise,n.m_domLegende))};WDPieChartPartListener.prototype.mouseenter=function(){var n=WDChartListener.getListener(this);n&&n.SurbrillancePart(!0,n.m_domBalise,n.m_domLegende=n.domGetLegendeAssociee(n.m_domBalise,n.m_domLegende))};WDPieChartPartListener.prototype.mouseleave=function(){var n=WDChartListener.getListener(this);n&&n.SurbrillancePart(!1,n.m_domBalise,n.m_domLegende=n.domGetLegendeAssociee(n.m_domBalise,n.m_domLegende))};WDPieChartLegendListener.prototype=new WDPieChartSelectionnePartListenerBase;WDPieChartLegendListener.prototype.constructor=WDPieChartLegendListener;WDPieChartLegendListener.prototype.click=function(){var n=WDChartListener.getListener(this);n&&n.m_domPart&&n.SelectionneLegende(n.m_domBalise,n.m_domPart=n.domGetPartAssociee(n.m_domBalise,n.m_domPart))};WDPieChartLegendListener.prototype.mouseenter=function(){var n=WDChartListener.getListener(this);n&&($(this).css("cursor","pointer"),n.m_domPart&&n.SurbrillanceLegende(!0,n.m_domBalise,n.m_domPart=n.domGetPartAssociee(n.m_domBalise,n.m_domPart)))};WDPieChartLegendListener.prototype.mouseleave=function(){var n=WDChartListener.getListener(this);n&&($(this).css("cursor",""),n.m_domPart&&n.SurbrillanceLegende(!1,n.m_domBalise,n.m_domPart=n.domGetPartAssociee(n.m_domBalise,n.m_domPart)))}